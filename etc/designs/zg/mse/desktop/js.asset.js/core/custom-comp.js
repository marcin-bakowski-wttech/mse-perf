!function(e){function i(e){this.$scope=e,this.bindUIEvents(),this.init()}var t={emailTipBox:[]};i.prototype.init=function(){this.openTipBox(),this.closeTipPopUp(),this.submitEmail(),this.readCookie(),this.hideForScreenReader()},i.prototype.readCookie=function(){"tip"!==Cog.Cookie.read("tip")&&this.showTipPopupOnScroll()},i.prototype.hideForScreenReader=function(){this.$scope.parents(".tip-email-popup").length&&this.$scope.attr("aria-hidden","true")},i.prototype.openTipBox=function(){var e=this.$scope;e.find(".email-tip-box__collapse").click(function(){e.toggleClass("email-tip-box--collapsed email-tip-box--expanded")})},i.prototype.removeTipBox=function(){e("body").find(".reference-email-tip-box:not(.sidebar-section-container .reference-email-tip-box)").remove()},i.prototype.displayErrorMessage=function(i){Cog.fireEvent("analytics","tipbox.displayErrorMessage",{$target:this.$scope,elementExtraInfo:i});var t=this.$scope,o=t.parent(),s=o.parent().find(".email-tip-box__error"),a=e('<p class="email-tip-box__error" style="display: none">'+i+"</p>"),n=t.find(".inputs");if(s.length&&s.remove(),o.parent().hasClass("tip-email-popup"))o.after(a),a.fadeIn("normal");else if(t.parent().hasClass("tip-box-general"))o.after(a),a.fadeIn("normal");else if(t.parent().hasClass("tip-box-main")){var p=a;"Sorry, something went wrong - please enter a valid email address."!==i&&"Sorry, something went wrong - please enter your email address."!==i||(p=e('<p class="email-tip-box__error" style="display: none">\n                    Please enter a valid email address.</p>')),n.after(p),p.fadeIn("normal")}else t.after(a),a.fadeIn("normal")},i.prototype.displaySuccessMessage=function(i){Cog.fireEvent("analytics","tipbox.displaySuccessMessage",{$target:this.$scope,isHomeTipBox:this.$scope.is(".tip-box-general-form, .tip-box-main-form")});var t=this.$scope.parent().parent().find(".email-tip-box__error");t.length&&t.remove(),e("body").prepend('<p class="email-tip-box__success">'+i+"</p>"),e("body").find('.reference-email-tip-box input[type="email"]').val(""),setTimeout(function(){e("body").find(".email-tip-box__success").remove()},12e3)},i.prototype.closeTipPopUp=function(){var e=this,i=this.$scope;i.find(".email-tip-box__popup-close").click(function(){Cog.fireEvent("analytics","tipbox.closeTipBoxPopUp",{$target:e.$scope}),i.parent().parent().css({bottom:"-300px"}),setTimeout(function(){i.parent().parent().remove(),Cog.Cookie.create("tip","tip",90)},900)})},i.prototype.showTipPopupOnScroll=function(){var i=this,t=this.$scope.closest(".tip-email-popup"),o=e(document).height()/20,s=this.$scope,a=!1;t.length&&e(window).scroll(function(){!a&&e(document).scrollTop()>o&&(a=!0,t.css({bottom:"-1px",overflow:"visible"}),i.$scope.attr("aria-hidden","false"),Cog.fireEvent("analytics","tipbox.showTipBoxPopUp",{$target:s}))})},i.prototype.submitEmail=function(){var e=this.$scope,i=this;e.find("form").submit(function(t){var o=i.$scope.find("input[type=email]").val();t.preventDefault(),o.length?i.sendApiRequest("/services/email-tip-box/subscribe",o):i.displayErrorMessage("Sorry, something went wrong - please enter your email address."),e.addClass("sending-in-progress")})},i.prototype.sendApiRequest=function(i,t){var o=this;e.ajaxSetup({type:"POST",url:i,dataType:"json",data:{email:t}}),e.ajax({success:function(e){var i=e.success,t=e.existing_user;o.parseApiData(i,t)},error:function(){}})},i.prototype.parseApiData=function(e,i){switch(e){case 0:switch(i){case 0:this.displayErrorMessage("Sorry, something went wrong - please enter a valid email address.");break;case 1:this.displayErrorMessage("Sorry something went wrong - you may already have joined MSEâ€™s Money Tips email list with this email address. If not, please try again.")}break;case 1:switch(i){case 0:this.displaySuccessMessage("Youâ€™ve successfully joined MSEâ€™s Money Tips email list."),this.removeTipBox(),Cog.Cookie.create("tip","tip",90);break;case 1:this.displayErrorMessage("Sorry, something went wrong - you have already joined MSE's Money Tips email list with this email address.")}}},i.prototype.bindUIEvents=function(){this.$scope.find(".email-tip-box__input input[type=email], .tip-box-general-inputs input[type=email], .tip-box-main-inputs input[type=email]").on("focus",function(i){Cog.fireEvent("analytics","tipbox.focusEmailAddress",{$target:e(i.currentTarget)})}),this.$scope.find(".email-tip-box__input,.tip-box-general-inputs form, .tip-box-main-inputs form").on("submit",function(i){Cog.fireEvent("analytics","tipbox.submitEmailAddress",{$target:e(i.currentTarget)})})},t.onRegister=function(e){t.emailTipBox.push(new i(e.$scope))},Cog.registerComponent({name:"email-tip-box",api:t,selector:".email-tip-box, .tip-box-general-form, .tip-box-main-form"})}(Cog.jQuery());
!function(e){var n={},t=e(".header-bottom-menu");n.hideMenuItems=function(){t.find(".menuItem>div").removeClass("visible")},n.showMenuItem=function(n){e(n).find("~ div").addClass("visible")},n.onRegister=function(){t.on("keyup",function(t){var o=e(t.target),a=t.keyCode||t.which;o.parent().hasClass("menuItem")&&(9===a&&n.showMenuItem(t.target),40===a&&(t.preventDefault(),o.parent().find(".linksBlock a").eq(0).get(0).focus()))}),t.on("keydown",function(t){var o=e(t.target),a=t.keyCode||t.which;o.parent().hasClass("menuItem")&&(9===a&&n.hideMenuItems(),40===a&&t.preventDefault())}),t.on("mouseleave",n.hideMenuItems),e(document).on("touchstart",function(t){e(t.target).closest(".header-bottom-menu").length||n.hideMenuItems()})},Cog.registerComponent({name:"megaMenuMainNavigation",api:n,selector:".header-bottom-menu"})}(Cog.jQuery());
!function(e){var n={},i=e(".header-bottom-menu-mobile-version");n.toggleMobileMenu=function(e,n){n.click(function(){e.hasClass("searchExpanded")&&(e.removeClass("searchExpanded"),e.parents("#header").find(".header-top-paragraph").slideUp(200)),e.toggleClass("menuExpanded")})},n.toggleSearchBox=function(e,n){n.click(function(){e.hasClass("menuExpanded")&&e.removeClass("menuExpanded"),e.toggleClass("searchExpanded"),e.parents("#header").find(".header-top-paragraph").slideToggle(200)})},n.ShowSwipeHand=function(){Cog.Cookie.read("swipeHint")||(i.append('<div class="swipeHint"><span></span></div>'),Cog.Cookie.create("swipeHint","true",90),setTimeout(function(){i.find(".swipeHint").animate({opacity:0},300,"linear",function(){e(this).remove()})},5e3))},n.turnOffLinksMobile=function(){var n=e(".menuBar-desktop > ul > li .menuItem > a:nth-child(1)");Modernizr.touch&&(window.matchMedia("(min-width: 992px)").matches?n.bind("click",function(e){e.preventDefault()}):n.bind("click",function(){return!0}))},n.onRegister=function(i){var o=i.$scope,a=o.find(".mobile-menu-toggle"),t=o.find(".mobile-menu-search");e(".mobile-menu-homepage a:nth-child(1)").attr("href","http://www.moneysavingexpert.com"),n.toggleMobileMenu(o,a),n.toggleSearchBox(o,t),n.ShowSwipeHand(),n.turnOffLinksMobile(),e(window).on("resize",_.debounce(function(){n.turnOffLinksMobile()},150))},Cog.registerComponent({name:"megaMenuMobileVersion",api:n,selector:".header-bottom-menu-mobile-version"})}(Cog.jQuery());
function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}!function(){var t={},a={topNavMainLinks:".top-nav-v2__links",topNavLinksVariant:".top-nav-v2__links .richText",topNavLinkList:".top-nav-v2__links ul",topNavLinks:'[class*="top-nav-v2__links-"]',moreBtn:".top-nav-v2__moreButton > a"},n=function(){function t(a,n){_classCallCheck(this,t),this.$scope=a,this.status=n,this.checkMenuVariant()}return t.prototype.checkMenuVariant=function(){if(!this.status.isAuthor())if(this.$topNavLinkVariant=this.$scope.find(a.topNavLinksVariant),this.topNavLinks=this.$scope.find(a.topNavLinks),this.$topNavLinkVariant.is(a.topNavLinks)){var t=this.topNavLinks.attr("class").split(/\s+/).find(function(t){return t.match(/top-nav-v2__links-/gi)}),n=t.substr(t.length-1);this.createSubmenu(n)}else this.createSubmenu(4)},t.prototype.createSubmenu=function(t){this.$topNavLinkList=this.$scope.find(a.topNavLinkList),this.$topNavMainLinks=this.$scope.find(a.topNavMainLinks);var n=this.$topNavLinkList.children();n.each(function(a,i){a>t-1&&a<n.length-1&&$(i).addClass("top-nav-v2__moreItem").attr("role","menuitem")}),$(".top-nav-v2__moreItem").wrapAll('<ul class="top-nav-v2__moreList" />'),$(".top-nav-v2__moreList").wrap('<li class="top-nav-v2__moreButton" role="menu" aria-haspopup="true" aria-expanded="false">\n                    <a href="#">More</a>\n                </li>'),this.handleMoreButton(),this.$topNavMainLinks.addClass("is-visible")},t.prototype.handleMoreButton=function(){var t=this;this.$moreBtn=this.$scope.find(a.moreBtn),this.$moreBtn.on("click",function(t){t.preventDefault();var a=$(t.target).parent(),n="true"===a.attr("aria-expanded");a.toggleClass("active").attr("aria-expanded",n?"false":"true"),Cog.fireEvent("analytics","mobileTopnav.moreButtonClick",{target:t.target,currentTarget:t.currentTarget})}),$(document).on("click",function(a){t.$moreBtn.is($(a.target))||t.$moreBtn.parent().removeClass("active").attr("aria-expanded",!1)})},t}();t.onRegister=function(t){new n(t.$scope,this.external.status)},Cog.registerComponent({name:"Nav",api:t,selector:".top-nav-v2",requires:[{name:"utils.status",apiId:"status"}]})}();
function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}!function(e){var o={},t={topNavMobileWrapper:".top-nav-v2-mobile-view",topNavMobileHamburgerImage:".top-nav-v2-mobile-menu-open-image",topNavMobileCloseImage:".top-nav-v2-mobile-menu-close-image",topNavMobileSearchToggleLink:".top-nav-v2__search",topNavMobileToggleMenu:".top-nav-v2-mobile-menu-toggle",topNavMobileToggleMenuOpen:"top-nav-v2-mobile-menu-toggle--open",topNavMobileLogoAnchor:".top-nav-v2-mobile-logo-image-left a, .top-nav-v2-mobile-logo-mse a"},i=function(){function o(e,t){_classCallCheck(this,o),this.$element=e,this.status=t,this.bindUIElements(),this.bindValues(),this.bindUIEvents()}return o.prototype.bindUIElements=function(){this.$topNavMobileWrapper=this.$element,this.$topNavMobileHamburgerImage=this.$topNavMobileWrapper.find(t.topNavMobileHamburgerImage),this.$topNavMobileHamburgerLink=this.$topNavMobileHamburgerImage.find("a"),this.$topNavMobileCloseImage=this.$topNavMobileWrapper.find(t.topNavMobileCloseImage),this.$topNavMobileCloseLink=this.$topNavMobileCloseImage.find("a"),this.$topNavMobileLogoAnchor=this.$topNavMobileWrapper.find(t.topNavMobileLogoAnchor)},o.prototype.bindValues=function(){this.mobileTopNavSnippetName=this.status.isAuthor()?"":this.$topNavMobileWrapper.closest(".snippetReference").attr("class").split(" ").filter(function(e){return-1!==e.indexOf("mobile")}).toString()},o.prototype.bindUIEvents=function(){var o=this;this.$topNavMobileHamburgerLink.on("click",function(e){e.preventDefault();o.handleHamburgerMenuTracking(!0)}),this.$topNavMobileCloseLink.on("click",function(e){e.preventDefault();o.handleHamburgerMenuTracking(!1)}),this.$topNavMobileLogoAnchor.on("click",function(e){o.handleLogoTracking(e)}),e(document).ready(function(){return e(t.topNavMobileHamburgerImage).show()})},o.prototype.handleLogoTracking=function(o){var t=e(o.currentTarget),i=t.find("img").attr("alt"),n=t.attr("href");Cog.fireEvent("analytics","mobileTopnav.logoClick",{actionType:"click",clickType:"internal",siteSection:"MastHead TopNav",itemIdentifier:i||"",internalDestination:n,elementLayer1:"snippet "+this.mobileTopNavSnippetName,elementLayer2:"image",elementLayer3:void 0})},o.prototype.handleHamburgerMenuTracking=function(e){Cog.fireEvent("analytics","mobileTopnav.hamburgerMenuClick",{actionType:"click",clickType:"internal",siteSection:"MastHead TopNav",itemIdentifier:"Burger "+(e?"Open":"Close"),elementLayer1:"snippet "+this.mobileTopNavSnippetName,elementLayer2:"button",elementLayer3:void 0})},o}();o.onRegister=function(e){new i(e.$scope,this.external.status)},Cog.registerComponent({name:"NavMobile",api:o,selector:".top-nav-v2-mobile-view",requires:[{name:"utils.status",apiId:"status"}]})}(Cog.jQuery());
!function(e){var i={},n=e(".top-header-links"),o=e(".forum-link-button"),l=e(".header-top-navigation ul li");i.openTopLinks=function(){n.stop(!0,!0).slideToggle(300),o.toggleClass("open")},i.handleNavDropdowns=function(i){var n=e("ul.visible"),o=e(i);n.length&&!o.next("ul").hasClass("visible")?(n.removeClass("visible"),o.next("ul").addClass("visible")):o.next("ul").toggleClass("visible")},i.onRegister=function(){l.find("ul")&&l.find("ul").parent().addClass("has-children"),o.on("click",i.openTopLinks),o.on("keyup",function(e){13!==e.keyCode&&32!==e.keyCode||i.openTopLinks()}),e("body").click(function(n){e(n.target).is("li.has-children > a")?(n.preventDefault(),i.handleNavDropdowns(n.target)):e(n.target).is("ul.visible")||e("ul.visible").removeClass("visible")})},Cog.registerComponent({name:"topNavigation",api:i,selector:".header-top-navigation"})}(Cog.jQuery());
!function(){var i={};i.viewMoreTips=function(i,e){i.click(function(){e.addClass("view-all-tips"),this.remove()})},i.onRegister=function(e){var t=e.$scope,n=t.find(".tip-list__view-more"),o=t.find(".tips-div ul");i.viewMoreTips(n,o)},Cog.registerComponent({name:"tipList",api:i,selector:".tip-list-component"})}();
!function(e){var r={},n=e(".form.error-page-form"),o=e('.error-page-form input[name="textField"]'),a=n.find('input[value="mainSite"]'),i=n.find('input[value="forums"]');r.handleSearchQuery=function(){var e=void 0,r=o.val();a.is(":checked")?e="https://www.moneysavingexpert.com/advanced-search.php?q="+r+"&searchtype=guides":i.is(":checked")&&(e="http://forums.moneysavingexpert.com/search.php?q="+r+"&searchid=174650582"),window.location.href=e},r.onRegister=function(){n.submit(function(e){e.preventDefault(),r.handleSearchQuery()})},Cog.registerComponent({name:"errorPageForm",api:r,selector:".error-page-form"})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i={isVisible:"is-visible",isHidden:"is-hidden",isActive:"is-active",linkNext:"link-next",linkPrev:"link-prev",iconClear:"icon-clear",iconSearch:"icon-search",searchForm:"search-header-form",searchInput:"search-header-input",resultsContainer:"st-results-container",searchTipsContainer:"search-no-result-container",browseInsteadContainer:"search-browse-instead-container",spellingSuggestionContainer:"st-spelling-suggestion",spellingSuggestionLink:"st-spelling-suggestion-link",filtersAllItem:"filters-all-item",filtersItem:"filters-item",filtersContainer:"search-header-filters",forumLink:"forum-link"},s=function(){function t(e){_classCallCheck(this,t),this.$swiftSearch=e,this.engineKey=this.$swiftSearch.data("engine-key"),this.resultsPerPage=this.$swiftSearch.data("result-per-page"),this.initialQuery="",this.bindUIElements(),this.bindUIEvents(),this.init()}return t.prototype.init=function(){this.initializeTexts(),this.initializeTemplates(),this.initSwiftypeSearch(),this.updateSearchValue(),this.updateFiltersValue(),this.handleSearchIcons()},t.prototype.bindUIElements=function(){this.$searchForm=this.$swiftSearch.find("."+i.searchForm),this.$searchInput=this.$searchForm.find("."+i.searchInput),this.$iconClear=this.$searchForm.find("."+i.iconClear),this.$iconSearch=this.$searchForm.find("."+i.iconSearch),this.$resultsContainer=this.$swiftSearch.find("#"+i.resultsContainer),this.$searchTipsContainer=e("."+i.searchTipsContainer),this.$browseInsteadContainer=e("."+i.browseInsteadContainer),this.$spellingSuggestionContainer=e("."+i.spellingSuggestionContainer),this.$spellingSuggestionLink=e("."+i.spellingSuggestionLink),this.$window=e(window),this.$filtersAllItem=e("."+i.filtersAllItem),this.$filtersItem=e("."+i.filtersItem),this.filtersContainer=e("."+i.filtersContainer),this.$forumLink=e("."+i.forumLink)},t.prototype.bindUIEvents=function(){var t=this;this.$iconClear.on("click keyup",function(e){"click"!==e.type&&13!==e.which||(t.$searchInput.val(""),t.$filtersAllItem.addClass(i.isActive),t.$filtersItem.removeClass(i.isActive),t.$forumLink.removeClass(i.isVisible),t.initialQuery="",t.toggleSearchButtons(),location.hash="",t.$searchInput.data("filters",""))}),this.$window.on("hashchange",function(){var i=e.hashParams();t.initialQuery=i.stq,t.activeFilters=i.stf?i.stf.split(","):[],t.toggleSearchButtons(),t.showFilters()}),this.$iconSearch.on("click keyup",function(e){"click"!==e.type&&13!==e.which||t.$searchForm.trigger("submit")}),this.$searchForm.on("submit",function(){t.$searchInput.val()||t.$forumLink.removeClass(i.isVisible),Cog.fireEvent("analytics","search.searchBoxSubmit",{actionType:"click",clickType:"pageAction",siteSection:"mainSection",elementLayer1:"swiftypeResults",elementLayer2:"searchBox",elementLayer3:"searchButton",searchTerm:t.$searchInput.val()})}),e(document).on("click","."+i.spellingSuggestionLink,function(){e("."+i.spellingSuggestionContainer).parent().remove()}),this.$filtersItem.on("click keyup",function(s){if("click"===s.type||13===s.which){var n=e(s.delegateTarget);n.toggleClass(i.isActive),t.getFiltersStr().length>0?t.$filtersAllItem.removeClass(i.isHidden).removeClass(i.isActive):t.$filtersAllItem.addClass(i.isActive),t.reloadResults(),n.hasClass(i.isActive)||n.blur()}}),this.$filtersAllItem.on("click keyup",function(e){"click"!==e.type&&13!==e.which||(t.$filtersAllItem.addClass(i.isActive),t.$filtersItem.removeClass(i.isActive),t.reloadResults())}),this.$filtersAllItem.on("transitionend",function(){t.$filtersAllItem.hasClass(i.isActive)&&t.$filtersAllItem.addClass(i.isHidden)})},t.prototype.reloadResults=function(){var t=e.hashParams(),i=this.getFiltersStr();this.$searchInput.data("filters",i),t.stq&&Swiftype.setSearchHash(t.stq,t.stp,i)},t.prototype.getFiltersStr=function(){return e("."+i.filtersItem+"."+i.isActive).map(function(t,i){return encodeURIComponent(e(i).data("category"))}).get().toString()},t.prototype.initializeTexts=function(){this.texts={noResults:this.$swiftSearch.data("no-results")||'Sorry, we couldnâ€™t find any results for "*{query}*"',spellingSuggestionNoResults:this.$swiftSearch.data("spelling-suggestion-no-results")||'There are no results for "*{query}*"',spellingSuggestion:this.$swiftSearch.data("spelling-suggestion")||'Showing results for "*{suggestion}*" instead',spellingSuggestionWithResults:this.$swiftSearch.data("spelling-suggestion-with-results")||'Did you mean: "*{suggestion}*"?',error:this.$swiftSearch.data("error")||"*Sorry!* Our search isnâ€™t working. Weâ€™re hoping to have it up-and-running again soon.",forumLink:this.$forumLink.html()||""}},t.prototype.prepareHtmls=function(e,t){function i(e){return e.replace("*","<b>").replace("*","</b>")}function s(e){return i(e).replace("{suggestion}",'<a href="#" data-hash="true" class="st-spelling-suggestion-link" data-spelling-suggestion="'+t+'">'+t+"</a>")}function n(t){return i(t).replace("{query}",e).replace("q=query","q="+e)}return{noResult:'\n                    <div class="st-no-results-container">\n                        <div id="st-no-results" class="st-no-results">\n                            '+n(this.texts.noResults)+"\n                        </div>\n                    </div>",spellingSuggestionWithResults:'\n                    <div class="st-no-results-container">\n                        <div class="st-spelling-suggestion">\n                            '+s(this.texts.spellingSuggestionWithResults)+"\n                        </div>\n                    </div>",spellingSuggestion:'\n                    <div class="st-no-results-container is-hidden">\n                        <div class="st-spelling-suggestion">\n                            <span>'+n(this.texts.spellingSuggestionNoResults)+"</span>\n                            <p>"+s(this.texts.spellingSuggestion)+"</p>\n                        </div>\n                    </div>",error:'\n                    <div class="st-no-results-container">\n                        <div class="st-no-results st-no-results-error">\n                            '+i(this.texts.error)+"\n                        </div>\n                    </div>",forumLink:n(this.texts.forumLink)}},t.prototype.updateSearchValue=function(){var e=Swiftype.currentQuery||"";this.$searchInput.val(e)},t.prototype.updateFiltersValue=function(){var t=e.hashParams(),s=[];t.stf?(s=t.stf.split(","),this.$filtersAllItem.removeClass(i.isActive).removeClass(i.isHidden),this.$filtersItem.each(function(t,n){var r=e(n),a=r.data("category");-1!==e.inArray(a,s)?r.addClass(i.isActive):r.removeClass(i.isActive)})):(this.$filtersAllItem.addClass(i.isActive).addClass(i.isHidden),this.$filtersItem.removeClass(i.isActive));var n=s.map(encodeURIComponent).toString();this.$searchInput.data("filters",n)},t.prototype.handleSearchIcons=function(){var e=this;this.initialQuery.length&&this.toggleSearchButtons(),this.$searchInput.on("change keyup",function(){e.toggleSearchButtons()}),this.$searchInput.on("focus",function(){Cog.fireEvent("analytics","search.searchBoxFocus",{actionType:"textboxEntry",siteSection:"mainSection",elementLayer1:"swiftypeResults",elementLayer2:"searchInputText"})})},t.prototype.initializeTemplates=function(){this.resultTemplate=Hogan.compile('\n                {{#headline}}\n                {{#url}}\n                <div class="search-result">\n                    <a href="{{ url }}">\n                        {{#image}}\n                        <img alt="{{ headline }} image" src="{{ image }}" />\n                        {{/image}}\n                        {{#headlineHighlight}}\n                        <h4 class="result-title"> {{{ headlineHighlight }}} </h4>\n                        {{/headlineHighlight}}\n                        <p class="result-description"> {{{ description }}} </p>\n                        <p class="result-category">\n                            {{#label}}\n                            <span class="result-category-label"> {{ label }}  </span>\n                            {{/label}}\n                            {{#hasDate}}\n                            <span class="result-date"> {{ date }} </span>\n                            {{/hasDate}}\n                        </p>\n                    </a>\n                </div>\n                {{/url}}\n                {{/headline}}'),this.loadingTemplate='<div class="swiftype-loading">\n                   <div class="loading-spinner-container">\n                       <span class="loading-spinner"></span>\n                   </div>\n                </div>',this.pageLinkTemplate=Hogan.compile('<a href="#"\n                    class="page-link {{ cssClass }}"\n                    data-hash="true"\n                    aria-label="Goto Page {{ pageNumber }}"\n                    data-page="{{ pageNumber }}">{{ linkText }}</a>')},t.prototype.readFilters=function(){return{page:{category:this.activeFilters}}},t.prototype.initSwiftypeSearch=function(){this.$searchInput.swiftypeSearch({spelling:"always",fetchFields:{page:["headline","title","url","image","description","category","label","publication_date","publication_date_formatted"]},filters:this.readFilters.bind(this),resultContainingElement:this.$resultsContainer,engineKey:this.engineKey,postRenderFunction:this.customPostRenderer.bind(this),loadingFunction:this.customLoadingFunction.bind(this),renderFunction:this.customRenderResults.bind(this),renderPaginationForType:this.customRenderPagination.bind(this),perPage:this.resultsPerPage,renderErrorFunction:this.renderErrorFunction.bind(this),timeout:15e3}),this.initialQuery=Swiftype.currentQuery||""},t.prototype.showFilters=function(){window.location.hash?this.filtersContainer.removeClass("is-hidden"):this.filtersContainer.addClass("is-hidden")},t.prototype.toggleSearchButtons=function(){Swiftype.currentQuery&&Swiftype.currentQuery.length&&(this.$searchInput.val()!==this.initialQuery?(this.$iconClear.removeClass(i.isVisible),this.$iconSearch.addClass(i.isVisible),this.$iconClear.attr("tabindex","-1"),this.$iconSearch.attr("tabindex","0")):(this.$iconClear.addClass(i.isVisible),this.$iconSearch.removeClass(i.isVisible),this.$iconClear.attr("tabindex","0"),this.$iconSearch.attr("tabindex","-1")))},t.prototype.handleForumLink=function(e,t){t?(this.$forumLink.html(e.forumLink),this.$forumLink.addClass(i.isVisible)):this.$forumLink.removeClass(i.isVisible)},t.prototype.parseIsoDate=function(e){var t=new Date(e),i=t.getFullYear();return t.toLocaleString("en-us",{month:"short"})+" "+t.getDate()+", "+i},t.prototype.customRenderResults=function(e,t){var i={headline:t.headline||t.title,headlineHighlight:t.headline||t.title,url:t.url,image:"Deals"===t.category&&t.image,description:t.description,label:t.label,hasDate:t.publication_date_formatted||t.publication_date,date:t.publication_date_formatted||this.parseIsoDate(t.publication_date)};return this.resultTemplate.render(i)},t.prototype.customLoadingFunction=function(e,t){t.html(this.loadingTemplate)},t.prototype.customPostRenderer=function(t){var s=0,n=null,r=void 0,a=void 0;this.$spellingContainer&&(this.$resultsContainer.prepend(this.$spellingContainer),this.$spellingContainer.removeClass(""+i.isHidden),this.$spellingContainer=!1,a=!0),t.info&&t.info.page&&(r=this.escapeHtml(t.info.page.query),e.each(t.info,function(e,t){s+=t.total_result_count,t.spelling_suggestion&&(n=t.spelling_suggestion.text)}));var l=this.prepareHtmls(r,n);0!==s||n?0===s&&n?(this.$searchTipsContainer.removeClass(""+i.isVisible),this.$spellingContainer=e(l.spellingSuggestion),this.updateFiltersValue(),Swiftype.setSearchHash(n,1,this.getFiltersStr())):s&&n&&!a&&(this.$resultsContainer.prepend(l.spellingSuggestionWithResults),this.$searchTipsContainer.removeClass(""+i.isVisible)):(this.$resultsContainer.append(l.noResult),this.$searchTipsContainer.addClass(""+i.isVisible),this.$browseInsteadContainer.addClass(""+i.isVisible)),s&&(this.$searchTipsContainer.removeClass(""+i.isVisible),this.$browseInsteadContainer.removeClass(""+i.isVisible)),this.handleForumLink(l,s),this.updateSearchValue(),this.updateFiltersValue(),this.toggleSearchButtons(),this.$searchInput.blur(),Cog.fireEvent("analytics","search.searchResultsLoaded",{actionType:"resultsLoaded",searchTerm:r,filters:this.calculateFilters(),searchResultsNumber:s})},t.prototype.calculateFilters=function(){var t=[];e.hashParams().stf&&(t=e.hashParams().stf.split(","));var i={};return this.$filtersItem.each(function(s,n){var r=e(n),a=r.data("category");i[a]={label:r.text().trim(),active:-1!==e.inArray(a,t)}}),i},t.prototype.escapeHtml=function(e){if(_.isUndefined(e))return"";var t=/</g,i=/>/g,s=/'/g,n=/"/g;return e.toString().replace(t,"&lt;").replace(i,"&gt;").replace(s,"&#39;").replace(n,"&#34;")},t.prototype.customRenderPagination=function(e,t,s){if(s<2)return!1;var n='<div class="swiftype-pagination-container"><div class="swiftype-pagination"><nav role="navigation" aria-label="Pagination">',r=t===s||100===t,a=1===t,l=t-1,o=t+1;return r&&!a?(n+=this.renderPageLink(l,"Prev",i.linkPrev),n+=this.renderPagesRange(t-3,t,s,t)):a?n+=this.renderPagesRange(t,t+3,s,t):(n+=this.renderPageLink(l,"Prev",i.linkPrev),n+=this.renderPagesRange(l,o,s,t)),!r&&t<=100&&s>1&&(n+=this.renderPageLink(o,"Next",i.linkNext)),n+="</nav></div></div>"},t.prototype.renderPagesRange=function(e,t,s,n){for(var r="",a=e=e>0?e:1;a<=t&&a<=s;a++)r+=a===n?this.renderPageLink(a,a,i.isActive):this.renderPageLink(a);return r},t.prototype.renderErrorFunction=function(){var e=this.prepareHtmls();this.$browseInsteadContainer.addClass(""+i.isVisible),this.$resultsContainer.html(e.error)},t.prototype.renderPageLink=function(e){var t={pageNumber:e,linkText:arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,cssClass:arguments[2]};return this.pageLinkTemplate.render(t)},t}();t.onRegister=function(e){new s(e.$scope)},Cog.registerComponent({name:"swiftSearch",api:t,selector:".swiftype-container"})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e={},t={searchInputName:"searchBox",searchOptionInputName:"searchOption"},n=function(){function e(t){_classCallCheck(this,e),this.$swiftypeSearchBoxFrom=t,this.bindUIElements(),this.bindUIEvents()}return e.prototype.bindUIElements=function(){this.$searchInput=this.$swiftypeSearchBoxFrom.find("[name='"+t.searchInputName+"']"),this.$searchOptions=this.$swiftypeSearchBoxFrom.find("[name='"+t.searchOptionInputName+"']")},e.prototype.bindUIEvents=function(){var e=this;this.$swiftypeSearchBoxFrom.submit(function(t){t.preventDefault();var n=e.$searchOptions.filter(":checked").val(),s=e.$searchInput.val();window.location.href=encodeURI(n.replace("%s",s))})},e}();e.onRegister=function(e){new n(e.$scope)},Cog.registerComponent({name:"swiftypeSearchBoxForm",api:e,selector:".swiftype-search-box-form"})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i={styledSelect:"styled-select",selectOptions:"select-options",dataSelectedUrl:"data-selected-url",selectHidden:"select-hidden"},s=function(){function t(e){_classCallCheck(this,t),this.$formSelect=e,this.initUIElements(),this.bindUIEvents()}return t.prototype.initUIElements=function(){this.$formSelect.addClass(i.selectHidden),this.$formSelect.wrap('<div class="select"></div>'),this.$formSelect.after('<div class="styled-select" tabindex="0"></div>'),this.$styledSelect=this.$formSelect.next("."+i.styledSelect);var t=this.$formSelect.children("option").eq(0);this.$styledSelect.text(t.text()),this.$styledSelect.attr(i.dataSelectedUrl,t.val()),this.$document=e(document),this.prepareFormValues()},t.prototype.prepareFormValues=function(){this.$list=e("<ul />",{class:"select-options"});for(var t=this.$formSelect.children("option").length,i=0;i<t;i++){var s=this.$formSelect.children("option").eq(i);e("<li />",{text:s.text(),rel:s.val(),tabindex:0}).appendTo(this.$list)}this.$listItems=this.$list.children("li"),this.$list.insertAfter(this.$styledSelect)},t.prototype.bindUIEvents=function(){var t=this;this.$styledSelect.click(function(e){t.enrollTheList(e)}),this.$listItems.click(function(e){t.updateSelectedOptionAndHideTheList(e)}),this.$document.click(function(){t.hideTheList()}),this.$styledSelect.on("keydown",function(e){var i=e.keyCode||e.which;13===i&&(e.preventDefault(),t.enrollTheList(e)),40===i&&(e.preventDefault(),t.enrollTheList(e))}),this.$listItems.on("keydown",function(i){var s=i.keyCode||i.which;13===s&&(i.preventDefault(),t.updateSelectedOptionAndHideTheList(i),t.$formSelect.closest(".selectField").siblings(".textField").find("input").focus()),38===s&&(i.preventDefault(),e(i.target).prev().focus()),40===s&&(i.preventDefault(),e(i.target).next().focus())})},t.prototype.enrollTheList=function(t){t.stopPropagation();var s=e(t.currentTarget);e("div.styled-select.active").not(s).each(function(){s.removeClass("active").next("."+i.selectOptions).hide()}),s.toggleClass("active").next("."+i.selectOptions).toggleClass("active").fadeToggle("fast","linear")},t.prototype.updateSelectedOptionAndHideTheList=function(t){t.stopPropagation();var s=e(t.currentTarget);this.$styledSelect.text(s.text()).removeClass("active");var l=s.attr("rel");this.$formSelect.val(l),this.$styledSelect.attr(i.dataSelectedUrl,l),this.$list.hide()},t.prototype.hideTheList=function(){this.$styledSelect.removeClass("active"),this.$list.hide()},t}();t.onRegister=function(e){new s(e.$scope)},Cog.registerComponent({name:"navigationSearchSelect",api:t,selector:".navigation-search select"})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e={},n={navigationSearchForm:"form.navigation-search",dataSelectedUrl:"data-selected-url"},a=function(){function e(t){_classCallCheck(this,e),this.$searchForm=t,this.bindUIElements(),this.bindUIEvents(),this.addFormAction()}return e.prototype.bindUIElements=function(){this.$body=t("body"),this.$searchButton=this.$searchForm.find("button"),this.$searchInput=this.$searchForm.find('input[name="textField"]'),this.$formEl=this.$searchForm.find("form"),this.$firstOption=this.$searchForm.find(".select-options li").eq(0),this.$styledSelect=this.$searchForm.find(".styled-select")},e.prototype.bindUIEvents=function(){var e=this;t(window).on("resize",_.debounce(function(){e.clearSearchInput()},150)),this.$searchInput.on("focus",function(){Cog.fireEvent("analytics","search.searchBoxFocus",{actionType:"textboxEntry",siteSection:"masthead",elementLayer1:"searchBox",elementLayer2:"searchInputText"})}),this.$body.on("click",function(t){return e.handleFocusState(t)}),this.$body.on("focusin",function(t){return e.handleFocusState(t)}),this.$searchForm.on("submit",function(t){t.preventDefault(),e.handleSearchQuery(),e.clearSearchInput()})},e.prototype.handleFocusState=function(e){t(e.target).parents().filter("."+n.navigationSearchForm).length?this.$searchForm.hasClass("focus")||this.$searchForm.addClass("focus"):this.$searchForm.removeClass("focus")},e.prototype.addFormAction=function(){this.$formEl.attr("action","#")},e.prototype.handleSearchQuery=function(){function t(){window.location.href=encodeURI(e.replace("%s",a))}var e=this.$styledSelect.attr(n.dataSelectedUrl),a=this.$searchInput.val();Cog.fireEvent("analytics","search.searchBoxSubmit",{actionType:"click",clickType:"pageAction",siteSection:"masthead",elementLayer1:"searchBox",elementLayer2:"searchButton",elementLayer3:void 0,searchTerm:this.$searchInput.val(),filterLabel:this.$styledSelect.text(),callback:t}),setTimeout(t,2e3)},e.prototype.clearSearchInput=function(){this.$searchInput.val(""),this.$styledSelect.attr(n.dataSelectedUrl,this.$firstOption.attr("rel")),this.$styledSelect.text(this.$firstOption.text())},e}();e.onRegister=function(t){new a(t.$scope)},Cog.registerComponent({name:"navigationSearchBox",api:e,selector:".navigation-search"})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i={navigationSearchLink:"top-nav-v2__search",navigationMobileToggleLinkOpen:"top-nav-v2__search--open",navigationSearchForm:"form.navigation-search",navigationSeachContainer:"top-nav-v2-search-box",navigationSearchToggleClass:"top-nav-v2-search-box-open",searchResultsUrl:"search-results-url",topNavMobileWrapper:".top-nav-v2-mobile-view",topNavWrapper:".top-nav-v2"},n=function(){function t(e){_classCallCheck(this,t),this.$searchForm=e,this.bindUIElements(),this.bindValues(),this.bindUIEvents(),this.addFormAction(),this.makeAutocompleteOff()}return t.prototype.bindUIElements=function(){this.$body=e("body"),this.$document=e(document),this.$searchToggleButton=this.$body.find("."+i.navigationSearchLink).parent(),this.$searchContainer=this.$body.find("."+i.navigationSeachContainer),this.$formEl=this.$searchForm.find("form"),this.$searchInput=this.$searchForm.find('input[name="search"]'),this.$searchButton=this.$searchForm.find('button[type="submit"]'),this.$searchCloseButton=this.$searchForm.find('button[type="button"]'),this.$searchLink=this.$body.find("."+i.navigationSearchLink)},t.prototype.bindValues=function(){this.isMobileNavVisible=null},t.prototype.bindUIEvents=function(){var t=this;this.$searchToggleButton.on("click",function(n){n.preventDefault(),n.stopImmediatePropagation();var a=e(n.target),o=t.handleFormVisibility();t.isMobileNav(a),a.toggleClass(i.navigationMobileToggleLinkOpen),Cog.fireEvent("analytics","search.searchBoxToggle",{actionType:"click",clickType:"pageAction",siteSection:(t.isMobileNavVisible?"Mobile ":"")+"MastHead TopNav",itemIdentifier:o?"Search Open":"Search Close",elementLayer1:"snippetReference "+t.getTopNavSnippetName(a),elementLayer2:"box "+(t.isMobileNavVisible?i.topNavMobileWrapper:i.topNavWrapper),elementLayer3:"richText"})}),this.$searchCloseButton.on("click",function(e){e.preventDefault(),t.handleFormVisibility(),Cog.fireEvent("analytics","search.searchBoxClose",{actionType:"click",clickType:"pageAction",siteSection:"MastHead Search",itemIdentifier:"Close Icon",elementLayer1:"Search",elementLayer2:void 0,elementLayer3:void 0})}),this.$searchForm.on("submit",function(e){e.preventDefault(),t.handleSearchQuery(),t.clearSearchInput()}),this.$document.on("isMobile",this.handleSearchButton.bind(this))},t.prototype.getTopNavSnippetName=function(e){return e.closest(".snippetReference").attr("class").split(" ").filter(function(e){return-1!==e.indexOf("v2")}).toString()},t.prototype.isMobileNav=function(e){this.isMobileNavVisible=e.closest(i.topNavMobileWrapper).length>0},t.prototype.makeAutocompleteOff=function(){this.$searchInput.attr("autocomplete","off")},t.prototype.addFormAction=function(){this.$formEl.attr("action","#")},t.prototype.clearSearchInput=function(){this.$searchInput.val("")},t.prototype.handleFormVisibility=function(){var e=!1;return this.$searchContainer.toggleClass(i.navigationSearchToggleClass),this.$searchContainer.hasClass(i.navigationSearchToggleClass)?(this.$searchInput[0].focus(),e=!0):(this.$searchToggleButton.focus(),e=!1),e},t.prototype.handleSearchButton=function(){e("."+i.navigationSearchToggleClass).length?this.$searchLink.addClass(i.navigationMobileToggleLinkOpen):this.$searchLink.removeClass(i.navigationMobileToggleLinkOpen)},t.prototype.handleSearchQuery=function(){function e(){var e=window.location.protocol+"//"+window.location.host;window.location.href=encodeURI(e+t.replace("&amp;","&").replace("%s",n))}var t=this.$formEl.find("[name="+i.searchResultsUrl+"]").val(),n=this.$searchInput.val();Cog.fireEvent("analytics","search.searchBoxSubmit",{actionType:"click",clickType:"pageAction",siteSection:(this.isMobileNavVisible?"Mobile ":"")+"MastHead Search",itemIdentifier:"Search Icon",elementLayer1:"Search",elementLayer2:void 0,elementLayer3:void 0,searchTerm:this.$searchInput.val(),filterLabel:"all",callback:e}),setTimeout(e,1e3)},t}();t.onRegister=function(e){new n(e.$scope)},Cog.registerComponent({name:"navigationV2SearchFrom",api:t,selector:".navigation-search-v2"})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var t={},i={content:".component-content",closeButton:".tooltip-button--close",toggleButton:".toggle-button",tooltip:".tooltip"},o={isExpanded:"is-expanded",isCollapsed:"is-collapsed-by-default"},e={affiliateLinkExplainer:{key:"affiliateLinkExplainer",value:"displayed"}},n=function(){function t(i){_classCallCheck(this,t),this.bindElements(i),this.bindEvents(),this.checkIfShouldDsiplayTooltip(),this.saveInformationInLocalStorage()}return t.prototype.bindElements=function(t){this.$affiliateLinkExplainer=t,this.$closeButton=this.$affiliateLinkExplainer.find(i.closeButton),this.$toggleButton=this.$affiliateLinkExplainer.find(i.toggleButton),this.$tooltip=this.$affiliateLinkExplainer.find(i.tooltip)},t.prototype.bindEvents=function(){this.tooltipToggleHandler=this.onTooltipToggle.bind(this),this.$toggleButton.on("click",this.tooltipToggleHandler),this.$closeButton.on("click",this.tooltipToggleHandler)},t.prototype.checkIfShouldDsiplayTooltip=function(){var t=!this.getInformationFromLocalStorage(),i=this.$affiliateLinkExplainer.hasClass(o.isCollapsed);t&&!i&&this.toggleTooltip(),this.setAdditionalAriaAttributes()},t.prototype.toggleTooltip=function(){this.$affiliateLinkExplainer.toggleClass(o.isExpanded),this.setAdditionalAriaAttributes()},t.prototype.setAdditionalAriaAttributes=function(){var t=!!this.$affiliateLinkExplainer.hasClass(o.isExpanded);this.$toggleButton.attr("aria-expanded",t),this.$tooltip.attr("aria-hidden",!t)},t.prototype.getInformationFromLocalStorage=function(){var t=e.affiliateLinkExplainer.key;return localStorage.getItem(t)},t.prototype.saveInformationInLocalStorage=function(){var t=e.affiliateLinkExplainer,i=t.key,o=t.value;localStorage.setItem(i,o)},t.prototype.onTooltipToggle=function(t){this.toggleTooltip(),this.$affiliateLinkExplainer.hasClass(o.isExpanded)||0!==t.originalEvent.detail||this.$toggleButton.focus()},t}();t.onRegister=function(t){new n(t.$scope)},Cog.registerComponent({name:"affiliateLinkExplainer",api:t,selector:".affiliateLinkExplainer > .component-content"})}(Cog.jQuery());
function _taggedTemplateLiteralLoose(t,e){return t.raw=e,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _templateObject=_taggedTemplateLiteralLoose(["",""],["",""]);!function(t){var e={},o={isHidden:"is-hidden",isSelected:"is-selected",selectorYear:"selector-year",selectorMonth:"selector-month",searchButton:"archive-search-button",martinsBlogRhs:"martins-blog-rhs",teamBlogRhs:"team-blog-rhs",dealsHuntersRhs:"deals-hunters-rhs"},n=function(){function e(t){_classCallCheck(this,e),this.$archiveSelector=t,this.startYear=2005,this.currentYear=moment().year(),this.blogRootPath=this.$archiveSelector.find(".blog-root-path").attr("href"),this.bindUIElements(),this.bindUIEvents(),this.init()}return e.prototype.init=function(){this.handleStartingYear(),this.fillInMonthDropdown(),this.fillInYearDropdown()},e.prototype.bindUIElements=function(){this.$form=this.$archiveSelector.find("form"),this.$select=this.$archiveSelector.find("select"),this.$allOptions=this.$select.find("option:not(.placeholder):selected"),this.$selectorYear=this.$select.filter("."+o.selectorYear),this.$selectorMonth=this.$select.filter("."+o.selectorMonth),this.$searchButton=this.$archiveSelector.find("."+o.searchButton)},e.prototype.bindUIEvents=function(){var e=this;this.$select.on("change",function(n){var r=t(n.currentTarget),i=r.find("option:not(.placeholder):selected");e.$allOptions=e.$select.find("option:not(.placeholder):selected"),i.length?r.addClass(o.isSelected):(e.$searchButton.addClass(o.isHidden),r.removeClass(o.isSelected)),e.$allOptions.length?e.$searchButton.removeClass(o.isHidden):e.$searchButton.addClass(o.isHidden)}),this.$form.on("submit",function(t){t.preventDefault(),e.constructRedirectUrl()})},e.prototype.handleStartingYear=function(){var t=parseInt(this.$archiveSelector.data("startingYear"),10);t>0&&(this.startYear=t)},e.prototype.fillInMonthDropdown=function(){var e=moment.months();for(var o in e){var n=t(function(t,e){return'<option name="month">'+e+"</option>"}(0,e[o]));this.$selectorMonth.append(n)}},e.prototype.fillInYearDropdown=function(){for(var e=this.currentYear;e>=this.startYear;e--){var o=t(function(t,e){return'<option name="year">'+e+"</option>"}(0,e));this.$selectorYear.append(o)}},e.prototype.constructRedirectUrl=function(){var t=this.$selectorMonth.find("option:selected:not(.placeholder)").val(),e=this.$selectorYear.find("option:selected:not(.placeholder)").val(),o="",n="";o=_.isUndefined(t)?"":moment().month(t).format("MM"),_.isUndefined(e)&&(e=this.currentYear),-1===this.blogRootPath.indexOf("/",this.blogRootPath.length-1)&&(this.blogRootPath=this.blogRootPath+"/"),n=""+this.blogRootPath+e+(o?"/"+o:""),window.location.href=n},e}();e.onRegister=function(t){new n(t.$scope)},Cog.registerComponent({name:"archiveSelector",api:e,selector:".archive-selector"})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e={},i={activeFixedWidth:"table-fixed-width--active",cellClass:'span[class^="table-cell"]',cellWhite:"table-cell-white",cellGrey:"table-cell-grey",cellBlue:"table-cell-blue",cellOrange:"table-cell-orange",content:"component-content",firstColumn:"tr td:first-of-type",firstCellWithBlueBorderBottom:"table-cell-border-bottom:first",firstRow:"tbody > tr:first-of-type",fixedWidth:"table-fixed-width",hasImageRight:"has-image-right",hasImageLeft:"has-image-left",hasImage:"has-image",isOverflown:"table-scroll",row:"tr",swipeIcon:"table-swipe-icon",tableButton:"table-button",tableGuide:"table-guide",tableWithFixedColumn:"table-column-fixed",title:"table-title"},l=function(){function e(t,i){_classCallCheck(this,e),this.$table=t,this.media=i,this.bindUIElements(),this.bindUIEvents(),this.init()}return e.prototype.init=function(){this.$table.find("table tr:even").addClass("even"),this.moveSelectionStylesToCells(),this.doesTableOverflow()},e.prototype.bindUIElements=function(){this.$cells=this.$table.find("td, th"),this.$selectionStyledEls=this.$table.find(""+i.cellClass),this.$firstCol=this.$table.find(i.firstColumn),this.$button=this.$table.find("."+i.tableButton),this.$window=t(window)},e.prototype.bindUIEvents=function(){var t=this;this.$button.on("click",function(e){t.openTableWindow(e)}),this.$window.on("resize",_.debounce(function(){t.doesTableOverflow()})),Cog.addListener("table","check-overflow",this.doesTableOverflow,{scope:this}),Cog.addListener("table","check-swipe-icon-position",this.initSwipeIcon,{scope:this})},e.prototype.isMobile=function(){return this.$window.width()<768},e.prototype.openTableWindow=function(t){var e=this.$window.height()/2,i=this.$window.width()/2,l=t.target.href;return window.open(l,"","menubar=1,resizable=1,scrollbars=1,width="+i+",height="+e),!1},e.prototype.moveSelectionStylesToCells=function(){this.$selectionStyledEls.each(function(e,i){var l=t(i),s=l.parent(),n=l.closest("td, th"),o=l.attr("class");"TABLE_CELL_STYLE"===l.text()&&(s.is("td, th")?l.hide():s.hide()),n.addClass(o)}),this.$cells.each(function(e,l){var s=t(l),n=s.find("img").length,o=s.find("a ~ img").length,a=s.find("img ~ a").length;o?s.addClass(i.hasImageRight):a?s.addClass(i.hasImageLeft):n&&s.addClass(i.hasImage)})},e.prototype.doesTableOverflow=function(){this.setCellsHeight();var t=this.$table.find("table")[0].scrollWidth>this.$table[0].clientWidth;this.$table.hasClass(i.tableWithFixedColumn)&&this.isMobile()&&(t=this.$table.find("table")[0].scrollWidth>this.$table[0].clientWidth-this.$firstCol.outerWidth()),t?(this.$table.addClass(i.isOverflown),this.media.isMobileOrTablet()&&this.initSwipeIcon()):this.$table.removeClass(i.isOverflown)},e.prototype.initSwipeIcon=function(){var e=this.$table.find("."+i.swipeIcon),l=t('<span class="'+i.swipeIcon+'"></span>'),s=0!==e.length?e:l,n=this.$table.find("."+i.content),o=this.$table.find("."+i.title).get(0),a=this.$table.find("td."+i.firstCellWithBlueBorderBottom+", th."+i.firstCellWithBlueBorderBottom).first(),h=a.attr("rowspan")-1||a.closest(i.row).index(),d=h>=0?h:0,r=this.$table.find(i.row).get(d),c=(o?o.clientHeight:0)+(r?r.clientHeight+r.offsetTop:0)-12;s.css({top:c}),0===e.length&&n.prepend(l)},e.prototype.setCellsHeight=function(){if(this.$table.is("."+i.tableGuide)&&this.isMobile()){var t=this.$table.is("."+i.fixedWidth),e=this.$table.is("."+i.tableWithFixedColumn);t&&this.$table.addClass(i.activeFixedWidth),e&&this.$table.find("tr > td:first-of-type").each(function(t,e){var i=e.nextElementSibling.offsetHeight,l=e.offsetHeight;l<i?e.style.height=i+"px":e.nextElementSibling.style.height=l+"px"})}},e}();e.onRegister=function(t){new l(t.$scope,this.external.media)},Cog.registerComponent({name:"table",api:e,selector:".table",requires:[{name:"utils.media",apiId:"media"}]})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var t={},i={isActive:"is-active",listOpener:"az-list-opener",azList:"az-list-content"},n=function(){function t(i){_classCallCheck(this,t),this.$azListContainer=i,this.bindUIElements(),this.bindUIEvents()}return t.prototype.bindUIElements=function(){this.$listOpener=this.$azListContainer.find("."+i.listOpener),this.$azList=this.$azListContainer.find("."+i.azList)},t.prototype.bindUIEvents=function(){var t=this;this.$listOpener.on("click",function(){t.toggleList()})},t.prototype.toggleList=function(){this.$azList.toggleClass(i.isActive),this.$listOpener.toggleClass(i.isActive)},t}();t.onRegister=function(t){new n(t.$scope)},Cog.registerComponent({name:"AZList",api:t,selector:".a-z-list"})}();
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(t){var i={},s={azListNav:"az-list-nav",azListContent:"az-list-content",azListWrapper:"az-list-wrapper",azListDivider:"az-list-divider",azListTitle:"az-list-title",isFixed:"is-fixed",navAnchors:"a[href*=\\#]"},o={bottom:null,navHeight:null,scrollTop:null,scopeOffsetTop:null,listHeight:null,isMobile:null,prevWidth:null,contentHeight:null},e=function(){function i(t){_classCallCheck(this,i),this.$scope=t,this.init()}return i.prototype.init=function(){this.isMobileCheck(),this.bindElements(),this.setValues(),this.attachScroll(),this.attachResize(),this.attachClick(),o.isMobile?(this.setMobileNavigationMaxHeight(),this.setValues(),this.stickNav()):this.stickTitlebar()},i.prototype.isMobileCheck=function(){o.isMobile=window.matchMedia("screen and (max-width: 767px)").matches},i.prototype.bindElements=function(){this.$azListTitle=this.$scope.find("."+s.azListTitle),this.$azListWrapper=this.$azListTitle.find("."+s.azListWrapper),this.$azListDivider=this.$azListTitle.find("."+s.azListDivider),this.$azListNav=this.$azListWrapper.find("."+s.azListNav),this.$azListContent=this.$scope.find("."+s.azListContent),this.$navAnchors=this.$azListNav.find(s.navAnchors)},i.prototype.setValues=function(){this.setNavHeight(),this.setScopeOffsetTop(),this.setListHeight(),this.setScrollTop(),this.setBottom(),this.setWindowWidth(),this.setContentHeight()},i.prototype.setWindowWidth=function(){o.prevWidth=t(window).width()},i.prototype.setBottom=function(){o.bottom=o.isMobile?this.$azListContent.offset().top+this.$azListContent.outerHeight(!0)-o.listHeight:this.$scope.offset().top+this.$azListContent.outerHeight(!0)},i.prototype.setContentHeight=function(){o.contentHeight=this.$azListContent.height()},i.prototype.setListHeight=function(){o.listHeight=this.$azListNav.height()},i.prototype.setNavHeight=function(){o.navHeight=this.$azListWrapper.height()},i.prototype.setScrollTop=function(){o.scrollTop=t(document).scrollTop()},i.prototype.setScopeOffsetTop=function(){o.scopeOffsetTop=o.isMobile?this.$azListContent.offset().top:this.$scope.offset().top},i.prototype.stickTitlebar=function(){o.scrollTop>o.scopeOffsetTop&&o.scrollTop<o.bottom?(this.$azListWrapper.addClass(s.isFixed).css({top:0}),this.$azListDivider.css({"padding-bottom":o.navHeight})):o.scrollTop>o.scopeOffsetTop&&o.scrollTop>o.bottom?this.$azListWrapper.addClass(s.isFixed).css({top:-(o.scrollTop-o.bottom)}):o.scrollTop<o.scopeOffsetTop&&(this.$azListWrapper.removeClass(s.isFixed),this.$azListDivider.css({"padding-bottom":0}))},i.prototype.stickNav=function(){o.scrollTop>o.scopeOffsetTop&&o.scrollTop<o.bottom?this.$azListNav.addClass(s.isFixed).css({top:0}):o.scrollTop>o.scopeOffsetTop&&o.scrollTop>o.bottom?this.$azListNav.addClass(s.isFixed).css({top:-(o.scrollTop-o.bottom)}):o.scrollTop<o.scopeOffsetTop&&this.$azListNav.removeClass(s.isFixed).css({top:o.navHeight})},i.prototype.setMobileNavigationMaxHeight=function(){o.contentHeight<o.listHeight?this.$azListNav.css({"max-height":o.contentHeight}):this.$azListNav.css({"max-height":"100vh"})},i.prototype.attachScroll=function(){var i=this;t(document).on("scroll",function(){i.setScrollTop(),i.setScopeOffsetTop(),i.isMobileCheck(),i.setBottom(),!1===o.isMobile?i.stickTitlebar():i.stickNav()})},i.prototype.attachResize=function(){var i=this;t(window).on("resize",_.debounce(function(){o.prevWidth!==t(window).width()&&(i.isMobileCheck(),i.setValues(),o.isMobile?(i.setMobileNavigationMaxHeight(),i.$azListDivider.css({"padding-bottom":0}),i.$azListWrapper.removeClass(s.isFixed).css({top:0}),i.$azListNav.removeClass(s.isFixed).css({top:o.navHeight})):i.$azListNav.removeClass(s.isFixed).css({top:0}))},250))},i.prototype.attachClick=function(){this.$navAnchors.on("click",function(i){i.preventDefault();var s=t(document.getElementById(i.target.hash.substring(1)));t("html,body").animate({scrollTop:s.offset().top},500)})},i}();i.onRegister=function(t){new e(t.$scope)},Cog.registerComponent({name:"AzListNew",selector:".newAzlist",api:i})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e={},i={articleListItem:".articleList-article",articleListTitle:".articleList-title a",articleListDescription:".articleList-description"},s=function(){function e(t){_classCallCheck(this,e),this.$scope=t,this.init()}return e.prototype.init=function(){var t=this.$scope.find(i.articleListItem),e=50,s=1e3,n=1e3;this.$scope.hasClass("deals-hunters-blogs")&&(e=80),this.$scope.hasClass("category-news-list")&&(e=25),this.$scope.hasClass("featured-news-list")&&(s=163,n=82),this.addTitleAttr(t,i.articleListTitle),this.setLength(t,i.articleListTitle,e,e),this.setLength(t,i.articleListDescription,s,n)},e.prototype.addTitleAttr=function(e,i){e.each(function(e,s){var n=t(s).find(i),r=n.text();n.attr("title",r)})},e.prototype.setLength=function(e,i,s,n){var r=this;e.each(function(e,a){var c=t(a).find(i),l=c.text(),o=0===e?s:n,h=r.cutString(l,o);c.html(h)})},e.prototype.cutString=function(t,e){var i=t.indexOf(" ",e);return-1===i?t:t.length<e?t:t.substring(0,i)+"â€¦"},e}();e.onRegister=function(t){new s(t.$scope)},Cog.registerComponent({name:"relatedArticles",selector:".related-articles, .rhs-recent-blogs, .deals-hunters-blogs, .category-news-list, .featured-news-list",api:e})}(Cog.jQuery());
function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}!function(){var t={},n={flipButton:".button-fullinfo"},i=function(){function t(n){_classCallCheck(this,t),this.$dealPredictor=n,this.bindUIElements(),this.bindUIEvents()}return t.prototype.bindUIElements=function(){this.$flipButton=this.$dealPredictor.find(n.flipButton)},t.prototype.bindUIEvents=function(){var t=this;this.$flipButton.on("click",function(){return t.$dealPredictor.toggleClass("flip"),!1})},t}();t.onRegister=function(t){new i(t.$scope)},Cog.registerComponent({name:"dealPredictor",api:t,selector:".dealPredictor"})}();
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e={},t={prevButton:".flex-prev",nextButton:".flex-next",slides:".slides",dealCards:".dealPredictor",dealPagination:".deal-pagination>a",weekHeader:".week-title"},i=function(){function e(t){_classCallCheck(this,e),this.$dealPredictorWeek=t,this.bindUIElements(),this.bindUIEvents()}return e.prototype.bindUIElements=function(){this.$prevButton=this.$dealPredictorWeek.find(t.prevButton),this.$nextButton=this.$dealPredictorWeek.find(t.nextButton),this.$slides=this.$dealPredictorWeek.find(t.slides),this.$dealPagination=this.$dealPredictorWeek.find(t.dealPagination),this.$dealCards=this.$dealPredictorWeek.find(t.dealCards),this.$weekHeader=$(this.$dealPredictorWeek.find(t.weekHeader)[0])},e.prototype.bindUIEvents=function(){var e=this;this.$dealsNumber=this.$dealCards.length,this.$currentDeal=0,$(this.$dealPagination[this.$currentDeal]).addClass("active-slide"),this.$prevButton.on("click",function(){return e.goPrev(),!1}),this.$nextButton.on("click",function(){return e.goNext(),!1}),this.$dealPagination.each(function(t,i){$(i).on("click",function(){return e.goToPage(t,i),!1})}),this.$hammer=new Hammer(this.$slides[0],{enable:!0,velocity:.1,threshold:2}),this.$hammer.on("swipeleft",function(){e.goNext()}),this.$hammer.on("swiperight",function(){e.goPrev()}),this.goToDealAnchor()},e.prototype.goPrev=function(){var e=this.$currentDeal;return e>0?e--:(e=this.$dealsNumber-1,this.$slides.css("left",-100*this.$dealsNumber+"%")),this.goToPage(e,$(this.$dealPagination[e])),!1},e.prototype.goNext=function(){var e=this.$currentDeal;return e<this.$dealsNumber-1?e++:(e=0,this.$slides.css("left","100%")),this.goToPage(e,$(this.$dealPagination[e])),!1},e.prototype.goToPage=function(e,t){$(this.$dealPagination[this.$currentDeal]).removeClass("active-slide"),$(t).addClass("active-slide"),this.$currentDeal=e;var i=-100*this.$currentDeal;return this.$slides.css("left",i+"%"),!1},e.prototype.goToDealAnchor=function(){if(this.$weekHeader.data("currentweek")&&!window.location.hash&&(window.location.hash="#"+this.$weekHeader.attr("id")),window.location.hash&&window.location.hash.startsWith("#deal-")){var e=this.$dealPredictorWeek.find("[name='"+window.location.hash.replace("#","")+"']");if(1===e.length){var t=$(e[0]).closest(".dealPredictor").index();t>0&&t<this.$dealCards.length&&(this.$dealPredictorWeek.find(".flexslider").scrollLeft(0),this.goToPage(t,$(this.$dealPagination[t])))}}},e}();e.onRegister=function(e){new i(e.$scope)},Cog.registerComponent({name:"dealPredictorWeek",api:e,selector:".dealPredictorWeek"})}();
function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}!function(n){var t={},i={mainContentSectionContainer:"main-content-section"},e=function(){function t(){_classCallCheck(this,t),this.init()}return t.prototype.init=function(){var t=n("."+i.mainContentSectionContainer);this.resetEmptySpacing(t)},t.prototype.resetEmptySpacing=function(t){t.each(function(t,i){var e=n(i);0===e.children().length&&e.addClass("reset-margin")})},t}();t.init=function(){new e},Cog.registerStatic({name:"utils",api:t})}(Cog.jQuery());
function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}!function(i){var e={},t={sliderContainer:"> .component-content > .content",slidesElements:".product-box-compact-container > .content > .box"},n={slickInitialized:"slick-initialized"},s=function(){function e(i,t){_classCallCheck(this,e),this.$slider=i,this.media=t,this.bindUiElements(),this.bindUIEvents(),this.initSlider()}return e.prototype.bindUiElements=function(){this.$sliderContainer=this.$slider.find(t.sliderContainer),this.$slidesElements=this.$sliderContainer.find(t.slidesElements)},e.prototype.checkViewport=function(){this.media.isMobile()&&!this.$sliderContainer.hasClass(n.slickInitialized)&&this.initSlider()},e.prototype.makeSliderElementsEqualHeight=function(){var e=[];this.$slidesElements.each(function(t,n){var s=i(n);s.css("height",""),e.push(s.outerHeight())});var t=Math.max.apply(Math,e);this.media.isMobile()&&this.$slidesElements.css("height",t)},e.prototype.bindUIEvents=function(){var e=this;this.$sliderContainer.on("init",function(){return e.makeSliderElementsEqualHeight()}),i(window).on("resize",_.debounce(function(){e.checkViewport(),e.makeSliderElementsEqualHeight()},150))},e.prototype.initSlider=function(){this.$sliderContainer.slick({dots:!0,vertical:!1,slide:".section",slidesToShow:1,infinite:!1,variableWidth:!0,mobileFirst:!0,centerPadding:"20%",responsive:[{breakpoint:767,settings:"unslick"}]})},e}();e.onRegister=function(i){new s(i.$scope,this.external.media)},Cog.registerComponent({name:"Slider",api:e,selector:".slider:not(.cq-Editable-dom)",requires:[{name:"utils.media",apiId:"media"}]})}(Cog.jQuery());
function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}!function(t){var s={},e={dealsCompactList:"dealsCompactList-list",dealsCompactListHomepage:"deals-compact-list-homepage",dealsCompactListCategoryPage:"deals-compact-list-category-page",dealsCompactListTopDeals:"deals-compact-list-top-deals",dealsCompactListUncutText:"deals-compact-list-uncut-text",listTitle:"dealsCompactList-link-title",listDescription:"dealsCompactList-link-description",listConfig:"deals-count.config"},i=function(){function s(t,e){_classCallCheck(this,s),this.$scope=t,this.media=e,this.init(),this.bindUIEvents()}return s.prototype.init=function(){var t=this.$scope.find("."+e.listDescription),s=this.$scope.find("."+e.listTitle);(this.$scope.hasClass(e.dealsCompactListHomepage)||this.$scope.hasClass(e.dealsCompactListCategoryPage)||this.$scope.hasClass(e.dealsCompactListTopDeals))&&!this.$scope.hasClass(e.dealsCompactListUncutText)&&(this.setTextLength(s,15),this.setTextLength(t,25)),(this.$scope.hasClass(e.dealsCompactListHomepage)||this.$scope.hasClass(e.dealsCompactListCategoryPage))&&this.setListMinHeight()},s.prototype.bindUIEvents=function(){var s=this;t(window).on("resize",_.debounce(function(){(s.$scope.hasClass(e.dealsCompactListHomepage)||s.$scope.hasClass(e.dealsCompactListCategoryPage))&&s.setListMinHeight()},150))},s.prototype.setTextLength=function(s,e){var i=this,a=void 0,o=void 0;s.each(function(s,n){var c=t(n);a=c.text(),o=i.cutString(a,e),c.html(o)})},s.prototype.cutString=function(t,s){var e=t.indexOf(" ",s);return-1===e?t:t.length<s?t:t.substring(0,e)+"â€¦"},s.prototype.setListMinHeight=function(){var t=this.$scope.find("."+e.dealsCompactList),s=108*this.$scope.find("."+e.listConfig).data("items-limit");this.media.isMobile()?t.height(""):t.height(s)},s}();s.onRegister=function(t){new i(t.$scope,this.external.media)},Cog.registerComponent({name:"dealsCompactList",selector:".dealsCompactList",api:s,requires:[{name:"utils.media",apiId:"media"}]})}(Cog.jQuery());
function _classCallCheck(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}!function(o){var t={},n={overlayLink:"product-box-overlay-link",productBoxFullContainer:"product-box-full-container",productBoxCompactContainer:"product-box-compact-container",overlayContainer:"product-box-overlay-container",overlayContent:"product-box-overlay-content",overlayContentInner:"product-box-overlay-content-inner",overlayClose:"product-box-overlay-close",overlayBackground:"product-box-overlay-background",overlayVisible:"product-box-overlay-visible",isVisible:"is-visible",isHidden:"is-hidden"},e=function(){function t(o){_classCallCheck(this,t),this.$productBox=o,this.$productBoxContainer=this.$productBox.find("> .compact"),this.bindUIElements(),this.bindUIEvents(),this.buildOverlay()}return t.prototype.bindUIElements=function(){this.$body=o("body"),this.$document=o(document),this.$productBoxOverlayLink=this.$productBox.find("."+n.overlayLink),this.$productBoxFullContainer=this.$productBoxOverlayLink.closest("."+n.productBoxCompactContainer).siblings("."+n.productBoxFullContainer),this.$overlayBackground={},this.$overlayContainer={},this.$overlayContentInner={}},t.prototype.bindUIEvents=function(){var o=this;this.$productBoxOverlayLink.on("click",function(t){t.preventDefault(),t.stopPropagation(),o.showOverlay()}),this.$document.on("click touchstart","."+n.overlayContent,function(o){o.stopPropagation()}),this.$document.on("click touchstart","."+n.overlayBackground+", ."+n.overlayContainer+", ."+n.overlayClose,function(){o.isVisible&&o.hideOverlay()}),this.$document.on("keydown",function(t){27===t.keyCode&&o.hideOverlay()})},t.prototype.buildOverlay=function(){this.$productBoxFullContainer.addClass(""+n.overlayContentInner).removeClass(n.isHidden),this.$productBoxContainer.append(function(){return'<div class="'+n.overlayBackground+'" style="display: none;"></div>\n                       <div class="'+n.overlayContainer+'" style="display: none;">\n                            <div class="'+n.overlayContent+' lightbox--default-size">\n                                <div tabindex="0" class="'+n.overlayClose+'" style="display: block;"></div>\n                            </div>\n                       </div>'}),this.$overlayContainer=this.$productBox.find("."+n.overlayContainer),this.$overlayContent=this.$productBox.find("."+n.overlayContent),this.$overlayBackground=this.$productBox.find("."+n.overlayBackground),this.$productBoxFullContainer.appendTo(this.$overlayContent)},t.prototype.showOverlay=function(){this.isVisible=!0,this.scrollPosition=o(window).scrollTop(),this.$body.addClass(n.overlayVisible),this.$overlayContainer.fadeIn(),this.$overlayBackground.fadeIn(),this.$overlayContainer.css({top:"50px"})},t.prototype.hideOverlay=function(){var t=this;this.$overlayContainer.fadeOut(),this.$overlayBackground.fadeOut(),this.isVisible&&(this.isVisible=!1,setTimeout(function(){t.$body.removeClass(n.overlayVisible)},400)),o(".container-fluid").off("scroll"),o(window).scrollTop(this.scrollPosition)},t}();t.onRegister=function(o){new e(o.$scope)},Cog.registerComponent({name:"ProductBox",api:t,selector:".productBox"})}(Cog.jQuery());
function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}!function(){var t={},o={calculatorsAndNews:".promoBox > .calculators-and-news",promoBoxItem:".promoBoxItem > .component-content",promoBoxEmpty:".promoBoxItem:not(:has(>div))"},s=function(){function t(o,s){_classCallCheck(this,t),this.$scope=o,this.status=s,this.init()}return t.prototype.init=function(){if(!this.status.isEdit()){this.removeEmptyBoxes();var t=this.$scope.find(o.promoBoxItem).length;3===t?this.$scope.addClass("has-three-items"):2===t?this.$scope.addClass("has-two-items"):t<2&&this.$scope.parent().remove()}},t.prototype.removeEmptyBoxes=function(){this.$scope.find(o.promoBoxEmpty).remove()},t}();t.onRegister=function(t){new s(t.$scope,this.external.status)},Cog.registerComponent({name:"calculatorsAndNews",selector:o.calculatorsAndNews,api:t,requires:[{name:"utils.status",apiId:"status"}]})}();
function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var i={},t={promoboxTitle:".promobox-title, .promobox-title a, .promobox-title p",promoboxDescription:".promobox-description"},e={clamped:"clamped",initialized:"initialized"},s=function(){function i(t,e){_classCallCheck(this,i),this.$scope=t,this.promoBoxSection=e,this.init()}return i.prototype.init=function(){this.bindElements(),this.clampIt()},i.prototype.bindElements=function(){this.$title=this.$scope.find(t.promoboxTitle),this.$description=this.$scope.find(t.promoboxDescription),this.titleLineHeight=parseInt(this.$title.css("line-height"),10),this.descriptionLineHeight=parseInt(this.$description.css("line-height"),10),this.titleLines=this.$title.height()/this.titleLineHeight,this.descriptionLines=this.$description.height()/this.descriptionLineHeight},i.prototype.addClampedProps=function(i,t){i.addClass(e.clamped),i.css({"-webkit-line-clamp":t.toString()})},i.prototype.clampIt=function(){if(this.promoBoxSection.isSection(this.$scope)){var i=3;this.titleLines>=2?(this.addClampedProps(this.$title,2),i-=2,this.descriptionLines>=i&&this.addClampedProps(this.$description,i)):this.descriptionLines>=2?this.addClampedProps(this.$description,2):this.$scope.removeClass(e.initialized)}else this.titleLines>=3?(this.$elementToBeClamped=this.$title.find("a"),this.lineClampValue=3):this.titleLines+this.descriptionLines>=3&&(this.$elementToBeClamped=this.$description,this.lineClampValue=3-this.titleLines),this.$elementToBeClamped&&this.lineClampValue?(this.$elementToBeClamped.addClass(e.clamped),this.$elementToBeClamped.css({"-webkit-line-clamp":this.lineClampValue.toString()})):this.$scope.removeClass(e.initialized)},i}();i.onRegister=function(i){new s(i.$scope,this.external.promoBoxSection)},Cog.registerComponent({name:"PromoBoxContentClamping",api:i,selector:".promobox-content-standard",requires:[{name:"utils.promoBoxSection",apiId:"promoBoxSection"}]})}();
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var t={},i={contentCointainer:"promobox-content-hero",promoboxTitleVariations:".promobox-title, .promobox-title a, .promobox-title p",promoboxTitle:"promobox-title",promoboxDescription:"promobox-description"},e={clamped:"clamped"},o=function(){function t(i,e,o){_classCallCheck(this,t),this.$scope=i,this.status=e,this.promoBoxSection=o,this.init()}return t.prototype.init=function(){this.promoBoxSection.isSectionHero(this.$scope)&&!this.status.isAuthor()&&(this.bindElements(),this.clampTitle(),this.clampDescription(),this.watchWindowResize())},t.prototype.bindElements=function(){this.$window=$(window),this.$titleTag=this.$scope.find("."+i.promoboxTitle),this.$title=this.$scope.find(i.promoboxTitleVariations),this.$description=this.$scope.find("."+i.promoboxDescription),this.preservedTitle=$(this.$title[this.$title.length-1]).html().trim()},t.prototype.clampTitle=function(){var t=$(this.$title[this.$title.length-1]),i=3*parseInt(t.css("line-height"),10),e=this.preservedTitle.split(" ");if(this.$titleTag.height()>i||this.$titleTag.height()/i<1){t.text("");for(var o="",s="",n=0;n<e.length;n++){if(this.$titleTag.height()>i){t.html(s.trim()+"&hellip;");break}s=o,o+=e[n]+" ",t.html(o.trim()+"&hellip;")}this.$titleTag.height()>i&&t.html(s.trim()+"&hellip;");var r=t.html().trim();this.preservedTitle.split(" ").length===r.split(" ").length&&"â€¦"===r.slice(-1)&&t.html(r.slice(0,-1))}},t.prototype.clampDescription=function(){var t=this.$description;this.$description.length>1&&this.$description.each(function(i,e){$(e).is(".text, .large")&&(t=$(e))});var i=t,o=0,s=t.find("li"),n=t.find("p");if(s.length){var r=$(s[0]);o=parseInt(r.css("margin-bottom"),10),i=r.find("a")}else if(n.length){var l=$(n[0]);o=parseInt(l.css("margin-bottom"),10),i=l.find("a")}var h=parseInt(this.$title.css("margin-top"),10),p=parseInt(this.$title.css("margin-bottom"),10),a=this.$title.height()+p+h,c=this.$scope.parent().height()-a,m=parseInt(i.css("line-height"),10),g=Math.floor((c+o)/(m+o));t.addClass(e.clamped),t.css({"-webkit-line-clamp":g.toString()})},t.prototype.watchWindowResize=function(){var t=this;this.$window.resize(function(){t.clampTitle(),t.clampDescription()})},t}();t.onRegister=function(t){new o(t.$scope,this.external.status,this.external.promoBoxSection)},Cog.registerComponent({name:"PromoBoxHeroContentClamping",api:t,selector:".promobox-content-hero",requires:[{name:"utils.status",apiId:"status"},{name:"utils.promoBoxSection",apiId:"promoBoxSection"}]})}();
function _classCallCheck(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var o={},t={promoboxItem:".promoBoxItem",promoboxTitle:".promobox-title",promoboxImage:".promobox-image",lhsAccordion:".accordion.guide-side-column-dropdown",lhsAccordionTitle:".accordion-title-text"},e=function(){function o(t){_classCallCheck(this,o),this.$scope=t,this.init()}return o.prototype.init=function(){this.bindElements(),this.handleTracking()},o.prototype.bindElements=function(){this.$promoboxItem=this.$scope.find(t.promoboxItem),this.$titleLink=this.$promoboxItem.find(t.promoboxTitle).parent(),this.$imageLink=this.$promoboxItem.find(t.promoboxImage+" > a")},o.prototype.handleTracking=function(){var o=this;this.$titleLink.add(this.$imageLink).on("click",function(t){var e=$(t.target),i=$(t.currentTarget);Cog.fireEvent("analytics","promoBoxLeftHandSide.linkClick",{$target:e,$currentTarget:i,elementLayer1:o.getAccordionTitle(e),elementLayer2:"Links",elementLayer3:"link",elementLayer4:o.getPromoboxItemIndex(e),itemIdentifier:e.text()||o.getPromoboxItemTitle(e),href:i.attr("href")})})},o.prototype.getAccordionTitle=function(o){return o.closest(t.lhsAccordion).find(t.lhsAccordionTitle).text()},o.prototype.getPromoboxItemIndex=function(o){return o.closest(t.promoboxItem).index()},o.prototype.getPromoboxItemTitle=function(o){return o.closest(t.promoboxItem).find(t.promoboxTitle).text()},o}();o.onRegister=function(o){new e(o.$scope)},Cog.registerComponent({name:"PromoBoxLeftHandSide",api:o,selector:".promoBox > .left-hand-sidebar"})}();
function _classCallCheck(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var n={},i=function(){function n(i){_classCallCheck(this,n),this.$links=i.find(".deals-link-intro p:last"),this.$intro=i.find(".deals-link-intro"),this.$config=document.getElementsByClassName("config"),this.addLinks()}return n.prototype.addLinks=function(){if(this.$config.length>0){var n=JSON.parse(this.$config[0].getAttribute("data-list-config"));if(n&&n.length>0){this.$intro.removeClass("is-hidden");for(var i=0;i<n.length;i++)n[i].nonaffiliateLink&&this.$links.append("<a href='"+n[i].nonaffiliateLink+"' target='"+n[i].nonaffiliateLinkTarget+"'>"+n[i].nonaffiliateLinkText+"</a> ")}}},n}();n.onRegister=function(n){new i(n.$scope)},Cog.registerComponent({name:"dealsAffiLinks",api:n,selector:".deals-affilated-links"})}();
function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}!function(n){var t={},a=function(){function t(){_classCallCheck(this,t),n(document).ready(this.init)}return t.prototype.init=function(){var t=0;n(".deals-count.config").each(function(a,e){var c=parseInt(n(e).data("count"),10)||0;t+=c});var a=1===t?" Current Deal":" Current Deals";n(".deals_counter").html(t+a)},t}();t.init=function(){new a},Cog.registerStatic({name:"dealsCounter",api:t})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(t){var i={},e={expiryInMinutes:12e5},n={trendingItems:"trending-items",trendingConfig:"trending-config"},s=function(){function i(t,e){_classCallCheck(this,i),this.$trendingContainer=t,this.status=e,this.bindData(),this.bindEvents()}return i.prototype.bindData=function(){this.$trendingItems=this.$trendingContainer.find("."+n.trendingItems),this.$trendingConfig=this.$trendingItems.find("."+n.trendingConfig),this.$ol=this.$trendingItems.find("ol"),this.items=this.$trendingConfig.data("json").items,this.itemTemplate=this.$trendingItems.find("script").html().trim()},i.prototype.bindEvents=function(){t(document).ready(this.print.bind(this))},i.prototype.print=function(){var i=this;t.each(this.getItems(),function(e,n){i.$ol.append(t(i.itemTemplate.replace("$path",n.path).replace("$title",n.title)))}),Cog.fireEvent("most-popular","loaded")},i.prototype.getItems=function(){if(this.status.isAuthor())return this.items;var t=JSON.parse(window.sessionStorage.getItem("trending")),i=(new Date).getTime(),n=i+e.expiryInMinutes;return t&&t.items&&t.expiresAt>i?this.items=t.items:window.sessionStorage.setItem("trending",JSON.stringify({expiresAt:n,items:this.items})),this.items},i}();i.onRegister=function(t){new s(t.$scope,this.external.status)},Cog.registerComponent({name:"Trending",api:i,selector:".trending",requires:[{name:"utils.status",apiId:"status"}]})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var t={},i={dealsPriorityList:".dealsPriorityList",dealsPriorityListTitle:".dealsPriorityList-link-title"},n=function(){function t(i){_classCallCheck(this,t),this.$scope=i,this.init()}return t.prototype.init=function(){var t=this.$scope.find(i.dealsPriorityListTitle);this.setLength(t,42)},t.prototype.setLength=function(t,i){var n=this;t.each(function(t,e){var s=$(e),r=s.text(),o=n.cutString(r,i);s.html(o)})},t.prototype.cutString=function(t,i){var n=t.indexOf(" ",i);return-1===n?t:t.length<=i?t:t.substring(0,n)+"â€¦"},t}();t.onRegister=function(t){new n(t.$scope)},Cog.registerComponent({name:"dealsPriorityList",selector:i.dealsPriorityList,api:t})}();
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e={isActive:"is-active"},i={tickerContainer:".feed-provider-feeds",tweet:".twitter-feed"},o={mobileTickerAutoScrollingStep:1,mobileTickerAutoScrollingSpeed:15,desktopTickerAutoSwitchSpeed:8e3},s=function(){function t(e,i){_classCallCheck(this,t),this.$ticker=e,this.media=i,this.isMobileLayout=this.media.isMobileOrTablet(),this.mobileMouseOverHandler=this.onMobileMouseOver.bind(this),this.mobileMouseOutHandler=this.onMobileMouseOut.bind(this),this.desktopMouseOverHandler=this.onDesktopMouseOver.bind(this),this.desktopMouseOutHandler=this.onDesktopMouseOut.bind(this),this.desktopTransitionEndHandler=this.onDesktopTransitionEnd.bind(this),this.bindUiElements(),this.init()}return t.prototype.init=function(){var t=this;Cog.addListener("twitter","feedsLoaded",function(){t.initTicker(),t.showAdditionButtons(),t.bindResizeHandler()},{scope:this})},t.prototype.initTicker=function(){this.$tweets=this.$tickerContainer.find(i.tweet),this.isMobileLayout?(this.isDesktopTickerInitialized&&this.destroyDesktopTicker(),this.$tweets.length>0&&this.initMobileTicker()):(this.isMobileTickerInitialized&&this.destroyMobileTicker(),this.$tweets.length>0&&this.initDesktopTicker())},t.prototype.initDesktopTicker=function(){this.$tickerContainer.find("."+e.isActive).removeClass(e.isActive),this.tweetsCount=this.$tweets.length;var t=this.$tweets.eq(0).addClass(e.isActive);this.$currentTweet=t,this.changeTweetOnDesktop(t,0,this.tweetsCount),this.isDesktopTickerInitialized=!0},t.prototype.initMobileTicker=function(){this.destroyDesktopTicker(),this.$tickerContainer.smoothDivScroll({autoScrollingMode:"always",autoScrollingDirection:"endlessLoopRight",autoScrollingStep:o.mobileTickerAutoScrollingStep,autoScrollingInterval:o.mobileTickerAutoScrollingSpeed}),this.$tickerContainer.smoothDivScroll("startAutoScrolling"),this.bindMobileEvents(),this.isMobileTickerInitialized=!0},t.prototype.destroyDesktopTicker=function(){this.unbindDesktopEvents(),clearTimeout(this.tweetChangeTimer),this.isDesktopTickerInitialized=!1},t.prototype.destroyMobileTicker=function(){this.$tickerContainer.smoothDivScroll("destroy"),this.unbindMobileEvents(),this.isMobileTickerInitialized=!1},t.prototype.bindUiElements=function(){this.$tickerContainer=this.$ticker.find(i.tickerContainer)},t.prototype.changeTweetOnDesktop=function(t,i,s){var n=this;this.unbindDesktopEvents(),!this.ismouseOver&&t&&(this.tweetChangeTimer=setTimeout(function(){t.on("transitionend",n.desktopTransitionEndHandler),t.removeClass(e.isActive),n.nextTweetIdx=i+1<s?i+1:0,n.$currentTweet=n.$tweets.eq(n.nextTweetIdx)},o.desktopTickerAutoSwitchSpeed)),this.bindDesktopEvents()},t.prototype.showAdditionButtons=function(){var t=this.$ticker.find(">.component-content")[0].dataset,e='<a class="twitter-ticker-cta" href="'+t.followUsUrl+'">'+t.followUsLinklabel+"</a>";this.$tickerContainer.before('<span class="twitter-ticker-icon"></span>'),this.$tickerContainer.after(e)},t.prototype.onMobileMouseOver=function(){"ontouchstart"in window||this.$tickerContainer.smoothDivScroll("stopAutoScrolling")},t.prototype.onDesktopMouseOver=function(){this.ismouseOver=!0,this.$currentTweet&&this.$currentTweet.hasClass("is-active")&&clearTimeout(this.tweetChangeTimer)},t.prototype.onDesktopMouseOut=function(){this.ismouseOver=!1,this.changeTweetOnDesktop(this.$currentTweet,this.nextTweetIdx,this.tweetsCount)},t.prototype.onDesktopTransitionEnd=function(){this.$currentTweet.off("transitionend",this.desktopTransitionEndHandler),this.$currentTweet.addClass(e.isActive),this.changeTweetOnDesktop(this.$currentTweet,this.nextTweetIdx,this.tweetsCount)},t.prototype.onMobileMouseOut=function(){this.$tickerContainer.smoothDivScroll("startAutoScrolling")},t.prototype.bindResizeHandler=function(){var t=this;$(window).on("resize",_.debounce(function(){var e=t.isMobileLayout!==t.media.isMobileOrTablet();t.isMobileLayout=t.media.isMobileOrTablet(),e&&t.initTicker()},250))},t.prototype.bindMobileEvents=function(){this.$tickerContainer.on("mouseover",this.mobileMouseOverHandler),this.$tickerContainer.on("mouseout",this.mobileMouseOutHandler)},t.prototype.bindDesktopEvents=function(){this.$tickerContainer.on("mouseover",this.desktopMouseOverHandler),this.$tickerContainer.on("mouseout",this.desktopMouseOutHandler)},t.prototype.unbindMobileEvents=function(){this.$tickerContainer.off("mouseover",this.mobileMouseOverHandler),this.$tickerContainer.off("mouseout",this.mobileMouseOutHandler)},t.prototype.unbindDesktopEvents=function(){this.$tickerContainer.off("mouseover",this.desktopMouseOverHandler),this.$tickerContainer.off("mouseout",this.desktopMouseOutHandler)},t}();t.onRegister=function(t){new s(t.$scope,this.external.media)},Cog.registerComponent({name:"TwitterTicker",api:t,selector:".twitter-ticker",requires:[{name:"utils.media",apiId:"media"}]})}(Cog.jQuery());
!function(t){var e={},n={embeddedTweet:"embeddedTweet"};e.goToHash=function(){var e=window.location.hash,n=t(e);if(n.length){var o=n.offset().top;t("html, body").stop().animate({scrollTop:o},800)}},e.bindEvents=function(){void 0!==window.twttr.events?window.twttr.events.bind("loaded",e.goToHash):window.twttr.ready(function(){window.twttr.events.bind("loaded",e.goToHash)})},e.loadWidgetsJs=function(){window.twttr=function(t,e,n){var o,d=t.getElementsByTagName(e)[0],i=window.twttr||{};if(!t.getElementById(n))return o=t.createElement(e),o.id=n,o.src="https://platform.twitter.com/widgets.js",d.parentNode.insertBefore(o,d),i._e=[],i.ready=function(t){i._e.push(t)},i}(document,"script","twitter-wjs"),e.bindEvents()},e.init=function(){t("."+n.embeddedTweet).length&&e.loadWidgetsJs()},Cog.registerStatic({name:"embedded-tweet",api:e})}(Cog.jQuery());
!function(){var e={};e.onRegister=function(e){this.external.status.isEdit()||""!==e.$scope.text().trim()||e.$scope.remove()},Cog.registerComponent({name:"expirableBox",api:e,selector:".expirableBox",requires:[{name:"utils.status",apiId:"status"}]})}();
!function(){var e={},n=$(".tip-box-general-expand"),i=$(".tip-box-general-scroll ul");e.isMobile=function(){return window.matchMedia("screen and (max-width: 767px)").matches},e.resetTipBoxScrollHeight=function(){i.attr("style",""),n.removeClass("is-expanded")},e.cutString=function(e,n){var i=e.indexOf(" ",n);return-1===i?e:e.length<=n?e:e.substring(0,i)+"â€¦"},e.parseParagraphs=function(n){e.isMobile()||n.each(function(n,i){var t=e.cutString(i.innerText,25);i.innerText=t})},e.handleExpandClick=function(e){var t=i.get(0).scrollHeight,r=t===i.height()?210:t,a=$(e.target);i.animate({height:r},500),n.toggleClass("is-expanded"),Cog.fireEvent("analytics","clickable.click",{$target:a,href:"#see-more"})},e.bindEvents=function(i){n.find("div").click(e.handleExpandClick),$(window).on("resize",_.debounce(function(){e.resetTipBoxScrollHeight(),e.parseParagraphs(i)},150))},e.onRegister=function(n){var i=n.$scope.find(".tip-box-general-scroll .trim-text");e.parseParagraphs(i),e.bindEvents(i)},Cog.registerComponent({name:"tipListBoxGeneral",api:e,selector:".tip-box-general"})}();
function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i){var t={},e={componentSelector:"tipListBox",tipListBoxRHS:"tipListBox-rhs",scrollList:"tip-box-main-scroll",tipList:"tip-box-main-list",expandLinksWrapper:"tip-box-main-expand",showMoreLink:"tip-box-main-expand-more",showLessLink:"tip-box-main-expand-less",listExpandedClass:"is-expanded",listElements:"tip-box-main-list-item",hiddenClass:"hidden"},s=function(){function t(i,e){_classCallCheck(this,t),this.$scope=i,this.media=e,this.bindElements(),this.overrideTitles(),this.changeEmailFormPosition(this.$scope),this.bindEvents(this.$scope)}return t.prototype.bindElements=function(){this.$window=i(window),this.$expandLinksWrapper=this.$scope.find("."+e.expandLinksWrapper),this.$scrollList=this.$scope.find("."+e.scrollList),this.$tipList=this.$scrollList.find("."+e.tipList),this.$listElements=this.$tipList.find("."+e.listElements),this.initialTipBoxHeight=this.isRHS()?this.$tipList.height():310,this.itemsOnStart=this.isRHS()?4:3},t.prototype.bindEvents=function(){this.toggleListElements(this.itemsOnStart),this.watchWindowResize(),this.toggleList()},t.prototype.watchWindowResize=function(){var i=this,t=this.$window.width();this.$window.on("resize",_.debounce(function(){var e=i.$window.width();e!==t&&(i.changeEmailFormPosition(i.$scope),i.resetTipBoxScrollHeight(),i.initialTipBoxHeight=i.isRHS()?i.$tipList.height():310,t=e)},150))},t.prototype.isRHS=function(){return this.$scope.parents("."+e.tipListBoxRHS).length},t.prototype.resetTipBoxScrollHeight=function(){this.$tipList.attr("style",""),this.$expandLinksWrapper.removeClass("is-expanded")},t.prototype.toggleList=function(){var t=this;this.$expandLinksWrapper.find("a").on("click",function(s){s.preventDefault();var n=i(s.target),o=i(s.currentTarget).parent().hasClass(e.showMoreLink);t.$expandLinksWrapper.toggleClass(e.listExpandedClass),t.toggleListElements(t.itemsOnStart);var a=t.$tipList.get(0).scrollHeight,r=o?a:t.initialTipBoxHeight;t.$tipList.animate({height:r},500),Cog.fireEvent("analytics","clickable.click",{$target:n,href:"#see-more"})})},t.prototype.toggleListElements=function(t){var s=this;this.$listElements.each(function(n,o){n>t-1&&(s.$expandLinksWrapper.hasClass(e.listExpandedClass)?i(o).removeClass(e.hiddenClass):setTimeout(function(){return i(o).addClass(e.hiddenClass)},500))})},t.prototype.overrideTitles=function(){var t=i(".tip-box-main-list-item"),e=this.$tipList.data("json")&&this.$tipList.data("json").override;e&&i.each(e,function(e,s){i.each(t,function(t,e){i(e).children()[0].href===s.path&&i(e).find(".trim-text").replaceWith(i(s.title).addClass("trim-text"))})})},t.prototype.changeEmailFormPosition=function(i){var t=this.media.isMobile(),e=i.find(".tip-box-main-form"),s=i.find(".tip-box-main-scroll")[0],n=i.find(".tip-box-main-inputs-links.home");if(!(!t&&e[0].nextElementSibling!==s||t&&e[0].nextElementSibling===s))if(t||e[0].nextElementSibling===n[0]){var o=e.detach();i.find(".tip-box-heading-section").after(o)}else{var a=e.detach();n.before(a)}},t}();t.onRegister=function(i){new s(i.$scope,this.external.media)},Cog.registerComponent({name:"tipListBoxMain",api:t,selector:".tip-box-main",requires:[{name:"utils.media",apiId:"media"}]})}(Cog.jQuery());
!function(){function o(o,s,i){o.scrollLeft>0?s.classList.add("video-showcase-scroll-button-visible"):s.classList.remove("video-showcase-scroll-button-visible"),o.scrollWidth>o.clientWidth&&o.scrollLeft+o.clientWidth<o.scrollWidth?i.classList.add("video-showcase-scroll-button-visible"):o.scrollWidth>o.clientWidth&&i.classList.remove("video-showcase-scroll-button-visible")}var s={};s.onRegister=function(s){var i=s.$scope.find(".video-showcase-container")[0],e=s.$scope.find(".video-showcase-scroll-right-button")[0],t=s.$scope.find(".video-showcase-scroll-left-button")[0];i.scrollWidth>i.clientWidth&&e.classList.add("video-showcase-scroll-button-visible");var c=s.$scope.find(".video-image")[0].offsetWidth+10;t.onclick=function(){var o=i.scrollLeft%c;o?$(i).animate({scrollLeft:"-="+o},500):$(i).animate({scrollLeft:"-="+c},500)},e.onclick=function(){$(i).animate({scrollLeft:"+="+c},500)},$(window).onresize=function(){o(i,t,e)},i.onscroll=function(){o(i,t,e)}},Cog.registerComponent({name:"video-showcase",api:s,selector:".videoShowcase"})}(Cog.jQuery());
!function(){var e={},t={},a=function(e){var t={},a=document.createElement("a");a.href=e;for(var o=a.search.substring(1).split("&"),i=0;i<o.length;i++){var n=o[i].split("=");t[n[0]]=decodeURIComponent(n[1])}return t},o=function(e){window.youTubeApiQueue||(window.youTubeApiQueue=[]),e.$scope.find(".youtube-player-container").each(function(e,t){var a=$(t).find(".youtube-player-data"),o={title:a.data("title"),videoId:a.data("video-id"),elementId:a.data("video-id"),description:a.data("description"),altText:a.data("alt-text"),startTime:a.data("start-time"),startTimeAsSeconds:a.data("start-time-as-seconds")};o.videoId?window.youTubeApiQueue.push(o):(t.classList.add("youtube-player-hidden"),$(t).find(".youtube-player")[0].classList.add("youtube-player-hidden"),o.altText?$(t).find(".youtube-player-alt")[0].classList.add("alt-visible"):$(t).find(".youtube-player-alt-default")[0].classList.add("alt-visible"))}),$(window).on("hashchange",function(){window.location.hash.match(new RegExp("#youtube-player-(.+)-chapter(\\d+)"))&&$(""+window.location.hash)[0].click()})};window.onYouTubeIframeAPIReady=function(){if(window.youTubeApiQueue)for(var e=0;e<window.youTubeApiQueue.length;e++){var a="youtube-player-"+window.youTubeApiQueue[e].elementId;t[window.youTubeApiQueue[e].elementId]=new window.YT.Player(a,{videoId:window.youTubeApiQueue[e].elementId,events:{onReady:window.youtubeIframeAPI_onReady.bind(window.youTubeApiQueue[e]),onStateChange:window.youtubeIframeAPI_onPlayerStateChange.bind(window.youTubeApiQueue[e])}})}},window.youtubeIframeAPI_onReady=function(e){var t=a(window.location.href),o=/youtube-player-(.+)/,i=e.target.getIframe().id;if(e.target.getIframe().classList.add("youtube-player","lazyload"),$("[id^='"+i+"-chapter']").each(function(t,a){$(a).on("click",function(){e.target.seekTo(a.getAttribute("data-seek-time")),5===e.target.getPlayerState()&&e.target.mute(),e.target.playVideo()})}),window.location.hash&&window.location.hash.match(new RegExp("#"+i+"-chapter(\\d+)")))$(""+window.location.hash)[0].click();else if("true"===t.autoplay&&window.location.hash==="#"+i){var n=o.exec(window.location.hash)[1],u=t.t;n===this.videoId&&(e.target.mute(),e.target.playVideo(),u&&e.target.seekTo(u))}},window.youtubeIframeAPI_onPlayerStateChange=function(e){},e.onRegister=function(e){if(o(e),window.YT&&window.YT.loaded)window.onYouTubeIframeAPIReady();else{var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}},Cog.registerComponent({name:"youtubeIframeAPI",api:e,selector:"body"})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e={seeMoreElement:".tools-list-show-more",seeLessElement:".tools-list-show-less",toolsListItem:".toolsListItem"},s=function(){function t(e){_classCallCheck(this,t),this.$scope=e,this.bindElements(),this.bindEvents(),this.handleShowMoreButton()}return t.prototype.bindElements=function(){this.$toolsListSeeMore=this.$scope.find(e.seeMoreElement),this.$toolsListSeeLess=this.$scope.find(e.seeLessElement),this.$toolsListItems=this.$scope.find(e.toolsListItem),this.$showMoreText=this.$toolsListSeeMore[0].innerText,this.$window=$(window)},t.prototype.fireAnalyticsEvent=function(t,e){Cog.fireEvent("analytics","clickable.click",{$target:t,href:e})},t.prototype.scrollToToolsListTop=function(){if(this.$window.width()<768){var t=this.$scope.offset().top;this.$window.scrollTop(t)}},t.prototype.handleShowMoreButton=function(){var t=this,e=0;this.$toolsListItems.each(function(t,s){$(s).is(":hidden")&&e++}),e?this.$toolsListSeeMore.show():this.$toolsListSeeMore.hide(),this.$toolsListSeeMore.text(function(){return t.$showMoreText+" ("+e+")"})},t.prototype.bindEvents=function(){var t=this,e=this;this.$window.on("resize",_.debounce(e.handleShowMoreButton.bind(this),150)),this.$toolsListSeeMore.click(function(e){var s=$(e.target);t.$scope.addClass("is-expanded"),t.$toolsListSeeMore.hide(),t.fireAnalyticsEvent(s,"#see-more")}),this.$toolsListSeeLess.click(function(e){var s=$(e.target);t.$scope.removeClass("is-expanded"),t.$toolsListSeeMore.show(),t.fireAnalyticsEvent(s,"#see-less"),t.scrollToToolsListTop()})},t}();t.onRegister=function(t){new s(t.$scope)},Cog.registerComponent({name:"toolsList",api:t,selector:".toolsList"})}();
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e){var i={},n={trendingItems:"trending-items",mostPopularSlider:"most-popular-slider",mostPopularScrollbar:"most-popular-scrollbar",mostPopularNavNextPage:"most-popular-nav-next-page",mostPopularNavPrevPage:"most-popular-nav-prev-page"},r=function(){function i(t){_classCallCheck(this,i),this.$trendingContainer=t,this.sliderReached=0,this.bindData(),this.bindEvents(),this.prepareAdditionalMarkup(),this.initializeSlider(),this.bindAnalyticsEvents()}return i.prototype.bindData=function(){this.$trendingItems=this.$trendingContainer.find("."+n.trendingItems),this.$mostPopularSlider=this.$trendingItems.find("."+n.mostPopularSlider)},i.prototype.bindEvents=function(){var e=this;t(window).on("resize",_.debounce(function(){e.slider.reload()},150)),this.$trendingItems.on("keyup",function(i){var n=t(i.target);9===(i.keyCode||i.which)&&e.slider.activate(n.closest("li"))})},i.prototype.fireAnalyticsEvent=function(e,i,n,r){var a=r||t(e.target);Cog.fireEvent("analytics","clickable.click",{$target:a,href:i,elementExtraInfo:n})},i.prototype.handleSliderScrollEvent=function(t){this.fireAnalyticsEvent(null,"#slider",t+"%",this.$scrollBar)},i.prototype.handleSliderScroll=function(){var t=this.slider.pos,e=t.cur,i=t.end,n=parseInt(e/i*100,10);this.sliderReached<100&&100===n?this.handleSliderScrollEvent(100):this.sliderReached<75&&n>=75?this.handleSliderScrollEvent(75):this.sliderReached<50&&n>=50?this.handleSliderScrollEvent(50):this.sliderReached<25&&n>=25&&this.handleSliderScrollEvent(25),this.sliderReached=Math.max(n,this.sliderReached)},i.prototype.bindAnalyticsEvents=function(){var t=this;this.$nextPageButton.click(function(e){return t.fireAnalyticsEvent(e,"#>","right")}),this.$prevPageButton.click(function(e){return t.fireAnalyticsEvent(e,"#<","left")}),this.slider.on("moveEnd",function(){return t.handleSliderScroll()})},i.prototype.prepareAdditionalMarkup=function(){var e=t('<div class="'+n.mostPopularScrollbar+'"><div class="handle"></div></div>'),i=t('<div class="most-popular-nav-buttons">\n                <button aria-label="Scroll to left" class="'+n.mostPopularNavPrevPage+'"></button>\n                <button aria-label="Scroll to right" class="'+n.mostPopularNavNextPage+'"></button>\n            </div>');this.$trendingItems.append(e).append(i),this.$scrollBar=this.$trendingContainer.find("."+n.mostPopularScrollbar),this.$prevPageButton=this.$trendingContainer.find("."+n.mostPopularNavPrevPage),this.$nextPageButton=this.$trendingContainer.find("."+n.mostPopularNavNextPage)},i.prototype.initializeSlider=function(){this.slider=new e(this.$mostPopularSlider,{slidee:this.$mostPopularSlider.find("ol"),horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBar:this.$scrollBar,activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1,prevPage:this.$prevPageButton,nextPage:this.$nextPageButton}),this.slider.init(),this.slider.reload()},i}();i.onRegister=function(t){new r(t.$scope)},Cog.registerComponent({name:"TrendingWithScrollbar",api:i,selector:".trending-with-scrollbar"})}(Cog.jQuery(),window.Sly);
function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}!function(e,s){var t={},n={dealsHuntersBlogs:"deals-hunters-blogs",dealsHuntersBlogsContent:"component-content",dealsHuntersBlogsScrollbar:"deals-hunters-blogs-scrollbar",dealsHuntersBlogsNavNextPage:"deals-hunters-blogs-nav-next-page",dealsHuntersBlogsNavPrevPage:"deals-hunters-blogs-nav-prev-page"},a=function(){function t(e){_classCallCheck(this,t),this.$dealsHuntersBlogsComposite=e,this.bindData(),this.bindEvents(),this.prepareAdditionalMarkup(),this.initializeSlider()}return t.prototype.bindData=function(){this.$dealsHuntersBlogs=this.$dealsHuntersBlogsComposite.find("."+n.dealsHuntersBlogs),this.$dealsHuntersBlogsContent=this.$dealsHuntersBlogs.find("."+n.dealsHuntersBlogsContent)},t.prototype.bindEvents=function(){var s=this;e(window).on("resize",_.debounce(function(){s.slider.reload()},150)),this.$dealsHuntersBlogs.on("keyup",function(t){var n=e(t.target);9===(t.keyCode||t.which)&&s.slider&&s.slider.activate(n.closest("li"))})},t.prototype.prepareAdditionalMarkup=function(){var s=e('<div class="'+n.dealsHuntersBlogsScrollbar+'"><div class="handle"></div></div>'),t=e('<div class="deals-hunters-blogs-nav-buttons">\n                    <button aria-label="Scroll to left" class="'+n.dealsHuntersBlogsNavPrevPage+'"></button>\n                    <button aria-label="Scroll to right" class="'+n.dealsHuntersBlogsNavNextPage+'"></button>\n                </div>');this.$dealsHuntersBlogs.append(s).append(t),this.$scrollBar=this.$dealsHuntersBlogsComposite.find("."+n.dealsHuntersBlogsScrollbar),this.$prevPageButton=this.$dealsHuntersBlogsComposite.find("."+n.dealsHuntersBlogsNavPrevPage),this.$nextPageButton=this.$dealsHuntersBlogsComposite.find("."+n.dealsHuntersBlogsNavNextPage)},t.prototype.initializeSlider=function(){this.slider=new s(this.$dealsHuntersBlogsContent,{slidee:this.$dealsHuntersBlogsContent.find("ul"),horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBar:this.$scrollBar,activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1,prevPage:this.$prevPageButton,nextPage:this.$nextPageButton}),this.slider.init(),this.slider.reload()},t}();t.onRegister=function(e){new a(e.$scope)},Cog.registerComponent({name:"DealsHuntersBlogs",api:t,selector:".composite-variation-recent-deals-hunters-blogs"})}(Cog.jQuery(),window.Sly);
!function(){var e={},n={seeMoreElement:".editors-picks-expand-more",seeLessElement:".editors-picks-expand-less",editorsPicksInfoShown:".editors-picks-expand-shown",editorsPicksInfoAll:".editors-picks-expand-all"};e.adjustInformation=function(e,n,s){s.$editorsPicksInfoShown.text(e),s.$editorsPicksInfoAll.text(n)},e.handleSeeMoreClick=function(n,s,o,t){var i=$(n.target);s.addClass("is-expanded"),t.$seeMoreElement.hide(),t.$seeLessElement.show(),e.adjustInformation(o,o,t),$(s.find("> .content > .promoBoxItem")[5]).find(".promobox-content-standard .promobox-title a").focus(),Cog.fireEvent("analytics","clickable.click",{$target:i,href:"#see-more"}),Cog.init(s)},e.handleSeeLessClick=function(n,s,o,t){var i=$(n.target);s.removeClass("is-expanded"),t.$seeMoreElement.show(),t.$seeLessElement.hide(),e.adjustInformation(5,o,t),Cog.fireEvent("analytics","clickable.click",{$target:i,href:"#see-less"})},e.bindEvents=function(n,s){var o=n.find(".promoBoxItem").length;e.adjustInformation(5,o,s),s.$seeMoreElement.click(function(t){return e.handleSeeMoreClick(t,n,o,s)}),s.$seeLessElement.click(function(t){return e.handleSeeLessClick(t,n,o,s)})},e.onRegister=function(s){var o=s.$scope,t={$seeMoreElement:o.find(n.seeMoreElement),$seeLessElement:o.find(n.seeLessElement),$editorsPicksInfoShown:o.find(n.editorsPicksInfoShown),$editorsPicksInfoAll:o.find(n.editorsPicksInfoAll)};e.bindEvents(o,t)},Cog.registerComponent({name:"promoBoxEditorsPicks",api:e,selector:".editors-picks"})}();
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e={isVisible:"is-visible",isItemVisible:"is-item-visible"},i={expandMoreButton:".dynamic-guides-expand-more",expandInfo:".dynamic-guides-expand-info",secondContainer:".container2",thirdContainer:".container3",thirdContainerItems:".item",itemsShown:".dynamic-guides-indicator-shown",itemsAll:".dynamic-guides-indicator-all",visibleContainerItems:".container1 > .item",updatedDynamicGuides:".subcategory-top-promo-box",promoBoxItem:".promoBoxItem",fourthContainer:".container4"},n=function(){function t(e,i,n){_classCallCheck(this,t),this.$scope=e,this.status=i,this.media=n,this.bindUIElements(),this.isUpdated()||(this.bindUIEvents(),this.itemsAll=parseInt(this.$expandInfoAll.text(),10)),this.init(),this.isUpdated()||this.updateComponentInAuthoring()}return t.prototype.init=function(){this.isUpdated()?(this.handleCounterAndButtonOnLoad(),this.showMoreItems()):(this.getShownElementsQty(),this.updateExpandInfo(),this.updateShowMoreButtonState(),this.setNextScrollTop())},t.prototype.bindUIElements=function(){this.$seeMoreButton=this.$scope.find(i.expandMoreButton),this.$expandInfo=this.$scope.find(i.expandInfo),this.$secondContainer=this.$scope.find(i.secondContainer),this.$thirdContainer=this.$scope.find(i.thirdContainer),this.$thirdContainerItems=this.$scope.find(i.thirdContainerItems),this.$fourthContainer=this.$scope.find(i.fourthContainer),this.$expandInfoShown=this.$expandInfo.find(i.itemsShown),this.$expandInfoAll=this.$expandInfo.find(i.itemsAll),this.$visibleContainerItems=this.$scope.find(i.visibleContainerItems),this.$allItems=this.$scope.find(i.promoBoxItem)},t.prototype.isUpdated=function(){return!!this.$scope.parents().find(i.updatedDynamicGuides).length},t.prototype.handleCounterAndButtonOnLoad=function(){this.$allItems.length<=19?this.updateVisibleItemsCounter(this.$allItems.length):(this.updateVisibleItemsCounter(19),this.$seeMoreButton.css("display","inline-block"))},t.prototype.updateVisibleItemsCounter=function(t){this.$expandInfoShown.text(t)},t.prototype.showMoreItems=function(){var t=this,n=19;this.$seeMoreButton.on("click",function(){var o=0,s=t.$fourthContainer.find(i.promoBoxItem+":not(."+e.isItemVisible+")"),a=void 0;s.each(function(i,h){i===o&&i<8&&($(h).addClass(e.isItemVisible),o++,n++),0===i&&(a=$(h),$(h).find(".promobox-content-standard .promobox-title a").focus()),o>=s.length&&t.$seeMoreButton.css("display","none")}),t.media.isTabletHorizontalOrDesktop()?a.find(".promobox-content-standard .promobox-title a").focus():$("html,body").animate({scrollTop:a.offset().top},500,function(){a.find(".promobox-content-standard .promobox-title a").focus()}),t.updateVisibleItemsCounter(n),Cog.fireEvent("analytics","clickable.click",{$target:t.$seeMoreButton,href:"#see-more"})})},t.prototype.setNextScrollTop=function(){this.nextScrollTop=this.$scope.position().top+this.$scope.offset().top+this.$scope.outerHeight()},t.prototype.scrollToExpandedItems=function(){this.media.isTabletHorizontalOrDesktop()||$("html,body").animate({scrollTop:this.nextScrollTop},500)},t.prototype.getShownElementsQty=function(){this.itemsShown=this.media.isTabletHorizontalOrDesktop()?Math.min(13,this.itemsAll):this.$visibleContainerItems.length,this.media.isTabletHorizontalOrDesktop()&&(this.isSecondContainerShown=!0,this.$secondContainer.addClass(e.isVisible))},t.prototype.updateExpandInfo=function(){this.$expandInfoShown.text(this.itemsShown)},t.prototype.updateShowMoreButtonState=function(){this.itemsAll>this.itemsShown?this.$seeMoreButton.addClass(e.isVisible):this.$seeMoreButton.removeClass(e.isVisible)},t.prototype.bindUIEvents=function(){var t=this;this.$seeMoreButton.click(function(){return t.handleSeeMoreClick()}),$(window).on("resize",_.debounce(function(){t.setNextScrollTop()},250))},t.prototype.revealItems=function(){this.$thirdContainerItems.slice(0,this.itemsShown).addClass(e.isItemVisible)},t.prototype.focusOnElement=function(t,e){t.find(".item").eq(e).find("a").eq(0).focus()},t.prototype.handleSeeMoreClick=function(){if(this.isSecondContainerShown)if(this.itemsShown<this.itemsAll){var t=this.itemsShown;this.$thirdContainer.addClass(e.isVisible),this.itemsShown=Math.min(this.itemsShown+9,this.itemsAll),this.revealItems(),this.focusOnElement(this.$thirdContainer,t-13),Cog.init({$element:this.$thirdContainer})}else this.$thirdContainer.addClass(e.isVisible),this.itemsShown=this.itemsAll,Cog.init({$element:this.$thirdContainer});else this.$secondContainer.addClass(e.isVisible),this.focusOnElement(this.$secondContainer,0),this.itemsShown=Math.min(this.itemsShown+7,this.itemsAll),this.isSecondContainerShown=!0,Cog.init(this.$secondContainer);Cog.fireEvent("analytics","clickable.click",{$target:this.$seeMoreButton,href:"#see-more"}),this.updateExpandInfo(),this.updateShowMoreButtonState(),this.scrollToExpandedItems(),this.setNextScrollTop()},t.prototype.updateComponentInAuthoring=function(){if(this.status.isAuthor()){var t=this.$scope.find(".promoBoxItem");if(!(t.length<=6)){var e=t.eq(12);0===e.length&&(e=t.last()),e.addClass("dynamic-guides-last-item")}}},t}();t.onRegister=function(t){new n(t.$scope,this.external.status,this.external.media)},Cog.registerComponent({name:"promoBoxDynamicGuides",api:t,selector:".dynamic-guides",requires:[{name:"utils.status",apiId:"status"},{name:"utils.media",apiId:"media"}]})}();
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(t,i){var e={},n={isWrapped:"is-wrapped",toggleButtonWrapper:"in-page-navigation-button",navList:"in-page-navigation-items",navWrapper:"in-page-navigation-wrapper",leftGradient:"left-gradient",rightGradient:"right-gradient"},a=function(){function e(t,i){_classCallCheck(this,e),this.$scope=t,this.media=i,this.init()}return e.prototype.init=function(){this.bindElements(),this.bindEvents(),this.wrapNavigation()},e.prototype.bindElements=function(){this.$toggleButtonWrapper=this.$scope.find("."+n.toggleButtonWrapper),this.$toggleButton=this.$toggleButtonWrapper.find("button"),this.$navList=this.$scope.find("."+n.navList),this.$navWrapper=this.$scope.find("."+n.navWrapper)},e.prototype.bindEvents=function(){var i=this;this.$toggleButton.on("click",function(e){var n="true"===i.$toggleButtonWrapper.attr("aria-expanded"),a=t(e.target);i.$toggleButtonWrapper.attr("aria-expanded",n?"false":"true"),Cog.fireEvent("analytics","clickable.click",{$target:a,href:n?"#close":"#open",elementExtraInfo:n?"close":"open"})}),t(window).on("resize",_.debounce(function(){i.wrapNavigation()},250)),this.$navWrapper.on("keyup",function(e){if(9===(e.keyCode||e.which)){var n=t(e.target);i.slider.toCenter(n.parent())}})},e.prototype.wrapNavigation=function(){var t=this.$navWrapper[0].scrollWidth,i=this.media.isTabletOrDesktop();i&&t>this.$navList.width()&&(this.$scope.addClass(n.isWrapped),this.slider&&this.slider.initialized||this.initializeSlider()),!i&&this.slider&&this.slider.destroy()},e.prototype.initializeSlider=function(){var t=this;this.slider=new i(this.$navWrapper,{slidee:this.$navList,horizontal:1,itemNav:"centered",smart:!1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,scrollSource:this.$navWrapper,scrollBy:1,scrollTrap:!0,startAt:0,activatePageOn:"click",speed:300,elasticBounds:0,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1,activeClass:"sly-active"}),this.slider.init(),this.slider.on("move",function(){return t.handleSliderScroll()}),this.slider.toCenter(this.$navList.find(".active").parent()),this.handleSliderScroll()},e.prototype.handleSliderScroll=function(){var t=this.slider.pos,i=t.cur,e=t.end,a=parseInt(i/e*100,10);this.$scope.toggleClass(n.leftGradient,a>1),this.$scope.toggleClass(n.rightGradient,a<99)},e}();e.onRegister=function(t){new a(t.$scope,this.external.media)},Cog.registerComponent({name:"InpageNavigation",api:e,selector:".in-page-navigation-component",requires:[{name:"utils.media",apiId:"media"}]})}(Cog.jQuery(),window.Sly);
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e={rightArrow:39,leftArrow:37,space:32,enter:13,tab:9},i={tabs:[]},s={isDesktop:null},a=function(){function i(e,s,a){_classCallCheck(this,i),this.logger=Cog.logger("MegaMenu"),this.$scope=e,this.status=s,this.media=a,this.bindEvents(),this.init(),this.bindElements(),this.attachResize(),t(window).trigger("resize")}return i.prototype.attachResize=function(){var e=this;t(window).on("resize",_.debounce(function(){e.isDesktopCheck(),s.isDesktop||e.status.isAuthor()?(e.detachEvents(),e.attachEvents()):e.detachEvents()},200))},i.prototype.init=function(){this.addActivatedStateIfUrlMatches(),this.halfOfTheViewportWidth=t(window).width()/2,this.tabFocus=0,t(".mobile-header-fixed-height").addClass("no-padding"),this.activateTabTimeout=[]},i.prototype.addActivatedStateIfUrlMatches=function(){var t=this.$scope.find('.megaMenu-nav-item > a[href="'+window.location.href+'"]');1===t.length?t.closest(".megaMenu-nav-item").addClass("activated"):this.logger.info("Category URLs should be unique")},i.prototype.bindEvents=function(){this.activateTab=this.activateTab.bind(this),this.deactivateTabs=this.deactivateTabs.bind(this),this.activateFirstOrLastTab=this.activateFirstOrLastTab.bind(this),this.handleKeysForAccessibility=this.handleKeysForAccessibility.bind(this)},i.prototype.bindElements=function(){var e=this;this.$tabs=this.$scope.find(".component-content > .megaMenu-nav .megaMenu-nav-item"),this.$header=t("#header"),this.$componentContent=this.$scope.find(".megaMenu-wrapper").children(".component-content").first(),this.$contents=this.$scope.find(".component-content > .megaMenu-content"),this.$contents.addClass("is-hidden"),this.$megaMenuNav=this.$scope.find(".megaMenu-nav"),this.$moreList=t(".top-nav-v2__moreButton"),this.$lastAnchorsInEachTab={},this.$contents.each(function(i,s){var a=t(s);e.$lastAnchorsInEachTab[a.attr("id")]=a.find("a").last()})},i.prototype.attachEvents=function(){this.status.isAuthor()?this.$tabs.on("click",this.activateTab):(this.$tabs.on("click",function(e){return t(e.currentTarget).children("a").blur()}),this.$tabs.on("mouseenter",this.activateTab),this.$componentContent.on("mouseleave",this.deactivateTabs),this.$megaMenuNav.on("mouseenter",this.activateFirstOrLastTab),this.$componentContent.on("keydown",this.handleKeysForAccessibility)),this.$tabs.filter(".is-active").trigger("click")},i.prototype.detachEvents=function(){this.$tabs.off("mouseenter",this.activateTab),this.$componentContent.off("mouseleave",this.deactivateTabs),this.$megaMenuNav.off("mouseenter",this.activateFirstOrLastTab),this.$componentContent.off("keydown",this.handleKeysForAccessibility)},i.prototype.activateTab=function(e){e.preventDefault(),this.activate(t(e.currentTarget))},i.prototype.activate=function(t){var e=this;this.activateTabTimeout.push(setTimeout(function(){e.showCurrentTab(t),e.markAsActive(t),e.markAsSelectedForAccessibility(t),e.showOverlay(),e.hideMoreList(),e.shrinkMoreListForAccessibility()},200))},i.prototype.showCurrentTab=function(t){this.$contents.addClass("is-hidden"),this.$contents.filter(t.find("a").data("category-id")).removeClass("is-hidden")},i.prototype.markAsActive=function(t){this.$tabs.removeClass("is-active"),t.addClass("is-active")},i.prototype.markAsSelectedForAccessibility=function(t){this.$tabs.attr("aria-selected",!1),t.attr("aria-selected",!0)},i.prototype.showOverlay=function(){this.$header.addClass("megaMenu__overlay")},i.prototype.hideMoreList=function(){this.$moreList.removeClass("active")},i.prototype.shrinkMoreListForAccessibility=function(){this.$moreList.attr("aria-expanded",!1)},i.prototype.deactivateTabs=function(t){t.preventDefault(),this.activateTabTimeout.forEach(function(t){return clearTimeout(t)}),this.activateTabTimeout=[],this.hideMegamenu()},i.prototype.hideMegamenu=function(){this.hideAllTabs(),this.markAsInactive(),this.hideOverlay()},i.prototype.hideAllTabs=function(){this.$contents.addClass("is-hidden")},i.prototype.markAsInactive=function(){this.$tabs.removeClass("is-active")},i.prototype.hideOverlay=function(){this.$header.removeClass("megaMenu__overlay")},i.prototype.activateFirstOrLastTab=function(t){this.isHoveringOnTheSidesOfMenu(t)&&(this.isHoveringOnTheLeft(t)?this.activateFirstTab():this.activateLastTab())},i.prototype.isHoveringOnTheSidesOfMenu=function(t){return t.currentTarget===t.target},i.prototype.isHoveringOnTheLeft=function(t){return t.pageX<this.halfOfTheViewportWidth},i.prototype.activateFirstTab=function(){this.activate(this.$tabs.first())},i.prototype.activateLastTab=function(){this.activate(this.$tabs.last())},i.prototype.handleKeysForAccessibility=function(i){if(Object.values(e).includes(i.keyCode))switch(this.$focusedTab=t(this.$tabs[this.tabFocus]),i.keyCode){case e.rightArrow:this.moveFocusToRight();break;case e.leftArrow:this.moveFocusToLeft();break;case e.space:this.openCurrentCategory(i);break;case e.enter:this.followCategoryUrl();break;case e.tab:this.hideMegamenuAfterLastAnchor(i)}},i.prototype.moveFocusToLeft=function(){this.$focusedTab.attr("tabindex",-1),this.tabFocus--,this.tabFocus<0&&(this.tabFocus=this.$tabs.length-1),this.changeFocus()},i.prototype.changeFocus=function(){var e=t(this.$tabs[this.tabFocus]);e.attr("tabindex",0),e.focus()},i.prototype.moveFocusToRight=function(){this.$focusedTab.attr("tabindex",-1),this.tabFocus++,this.tabFocus>=this.$tabs.length&&(this.tabFocus=0),this.changeFocus()},i.prototype.openCurrentCategory=function(t){t.preventDefault(),this.$openedTab=this.$focusedTab,this.$focusedTab.mouseenter()},i.prototype.followCategoryUrl=function(){var t=this.$focusedTab.children("a");t&&t.attr("href")&&(window.location.href=t.attr("href"))},i.prototype.isDesktopCheck=function(){this.$scope.hasClass("megaMenu-tabletHorizontal")?s.isDesktop=this.media.isDesktop():s.isDesktop=this.media.isDesktopLarge()},i.prototype.hideMegamenuAfterLastAnchor=function(t){if(this.$openedTab){var e=this.$openedTab.attr("aria-controls");this.$lastAnchorsInEachTab[e].is(t.target)&&this.hideMegamenu()}},i}();i.onRegister=function(t){i.tabs.push(new a(t.$scope,this.external.status,this.external.media))},Cog.registerComponent({name:"megaMenu",api:i,selector:".megaMenu",requires:[{name:"utils.status",apiId:"status"},{name:"utils.media",apiId:"media"}]})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e={},t={$previousCategory:null,$previousLink:null,isTabletOrDesktopSmall:null,isMobile:null,isThirdLevelDisabled:!1},i={additionalLinksNavySection:".megaMenu__additional-links-navy",additionalLinksGreySection:".megaMenu__additional-links-grey",categoriesWrapper:".megaMenu-wrapper > .component-content",contentWrapper:".megaMenu-wrapper",navContainer:".top-nav-v2-mobile-view",toggleMegaMenuHamburger:".top-nav-v2-mobile-menu-open-image",toggleMegaMenuClose:".top-nav-v2-mobile-menu-close-image",backButtonLvl2:".megaMenu-back-lvl2"},a={active:"is-active",animate:"animate",overlay:"overlay",pageOverlay:"megaMenu__overlay",megaMenuButtonOpen:"top-nav-v2-mobile-menu-toggle--open",thirdLevelDisabled:"megaMenu-third-level-disabled"},n=function(){function e(t,i,a){_classCallCheck(this,e),this.$scope=t,this.status=i,this.media=a,this.status.isAuthor()||(this.addAdditionalLinksSection(),this.bindElements(),this.bindEvents(),this.bindValues(),this.attachResize(),$(window).trigger("resize"),this.addCategoryLinks())}return e.prototype.bindEvents=function(){this.closeMegaMenu=this.closeMegaMenu.bind(this),this.openMegamenu=this.openMegamenu.bind(this),this.setMegaMenuHeight=this.setMegaMenuHeight.bind(this),this.removeHeightSetting=this.removeHeightSetting.bind(this)},e.prototype.bindElements=function(){this.$document=$(document),this.$header=$("#header"),this.$toggleMegaMenuHamburger=$(i.toggleMegaMenuHamburger),this.$toggleMegaMenuHamburgerLink=this.$toggleMegaMenuHamburger.find("a"),this.$toggleMegaMenuClose=$(i.toggleMegaMenuClose),this.$toggleMegaMenuCloseLink=this.$toggleMegaMenuClose.find("a"),this.$category=this.$scope.find(".megaMenu-nav-item"),this.$categories=this.$scope.find(".megaMenu-content"),this.$subcategory=this.$scope.find(".tabContent h3"),this.$categoryList=this.$scope.find(".megaMenu-nav-list"),this.$search=$(".top-nav-v2-search-box")},e.prototype.bindValues=function(){this.megaMenuSnippetName=this.$scope.closest(".snippetReference").attr("class").split(" ").filter(function(e){return 0===e.indexOf("reference")}).toString(),this.isThirdLevelDisabledActive()},e.prototype.detachEvents=function(){this.$document.off("click",this.closeMegaMenu),this.$toggleMegaMenuHamburgerLink.off("click",this.openMegamenu),this.$toggleMegaMenuCloseLink.off("click",this.closeMegaMenu),this.$category.off("click",this.openSubcategory),this.$document.off("cookieAccepted",this.setMegaMenuHeight)},e.prototype.attachEvents=function(){var e=this;this.$document.on("cookieAccepted",this.setMegaMenuHeight),this.$toggleMegaMenuHamburgerLink.on("click",this.openMegamenu),this.$toggleMegaMenuCloseLink.on("click",this.closeMegaMenu),this.$category.on("click",this.openSubcategory),$(i.backButtonLvl2).on("click",function(t){return e.closeSubcategory(t)})},e.prototype.attachPhoneEvents=function(){var e=this;this.$subcategory.on("click",function(i){t.isThirdLevelDisabled?e.fireSubcategoryClickEvent(i):e.addThirdLvlMenu(i)})},e.prototype.detachPhoneEvents=function(){this.$subcategory.off("click")},e.prototype.isThirdLevelDisabledActive=function(){t.isThirdLevelDisabled=this.$scope.hasClass(a.thirdLevelDisabled)},e.prototype.addAdditionalLinksSection=function(){var e=this,t=$(i.additionalLinksNavySection),a=$(i.additionalLinksGreySection);t.insertAfter(i.categoriesWrapper),a.insertAfter(i.categoriesWrapper),t.find("a").on("click",function(t){return e.fireBottomLinksClickEvent(t)}),a.find("a").on("click",function(t){return e.fireBottomLinksClickEvent(t)})},e.prototype.fireBottomLinksClickEvent=function(e){var t=$(e.currentTarget),i=t.attr("href"),a=t.text();Cog.fireEvent("analytics","mobileMegaMenu.bottomLinksClick",{actionType:"click",href:i,elementLayer1:"snippet "+this.megaMenuSnippetName,elementLayer2:"megamenu",elementLayer3:"richtext",itemIdentifier:a,siteSection:"MastHead BottomNav"})},e.prototype.openMegamenu=function(e){e.stopImmediatePropagation(),this.$toggleMegaMenuHamburger.css("display","none"),this.$toggleMegaMenuClose.css("display","block"),this.$scope.css("display","block"),this.$scope.css("width"),this.$scope.addClass(a.active),$("body").css({position:"fixed",width:"100%"}),t.isTabletOrDesktopSmall&&this.$header.addClass(a.pageOverlay),this.$document.on("click",this.closeMegaMenu)},e.prototype.closeMegaMenu=function(e){e.stopImmediatePropagation();var t=$(e.target),a=$(i.toggleMegaMenuClose),n=t.is(a.find("img")),o=t.is(a.find("a")),s=0===t.closest(i.navContainer).length,r=0===t.closest(this.$scope).length,c=0===t.closest(this.$search).length;(n||o||s&&r&&c)&&(this.hideMegaMenu(),this.$document.off("click",this.closeMegaMenu),this.$toggleMegaMenuHamburger.css("display","block"),this.$toggleMegaMenuClose.css("display","none"))},e.prototype.hideMegaMenu=function(){var e=this;this.$scope.hasClass(a.active)&&($("body").css("position","static"),this.$scope.removeClass(a.active),t.isTabletOrDesktopSmall&&t.$previousCategory&&t.$previousCategory.removeClass(a.active),setTimeout(function(){e.$scope.css("display",""),$(i.toggleMegaMenuHamburger).removeClass(a.megaMenuButtonOpen),e.$header.removeClass(a.pageOverlay),e.$toggleMegaMenuHamburger.css("display","block"),e.$toggleMegaMenuClose.css("display","none"),t.$previousCategory&&t.$previousCategory.removeClass(a.active+" "+a.animate),t.$previousLink&&t.$previousLink.removeClass(a.active),$(i.contentWrapper).removeClass(a.animate),e.$categoryList.removeClass(a.active),e.$scope.removeClass(a.overlay),$(".megaMenu-nav-lvl3").remove()},500))},e.prototype.openSubcategory=function(e){e.preventDefault();var n=$(".megaMenu"),o=$(this).attr("aria-controls"),s=$("#"+o),r=t.$previousCategory,c=t.$previousLink;r?r.attr("id")===o?r.hasClass(a.active)?(r.removeClass(a.active),$(this).removeClass(a.active),n.removeClass(a.overlay)):(r.addClass(a.active),$(this).addClass(a.active),n.addClass(a.overlay)):(c.removeClass(a.active),t.$previousCategory=s,t.$previousLink=$(this),n.hasClass(a.overlay)?($(this).addClass(a.active),r.css("transition","none").removeClass(a.active),s.css("transition","none").addClass(a.active),setTimeout(function(){s.css("transition",""),r.css("transition","")},100)):(n.addClass(a.overlay),$(this).addClass(a.active),r.removeClass(a.active),s.addClass(a.active))):(s.addClass(a.active),$(this).addClass(a.active),t.$previousCategory=s,t.$previousLink=$(this),n.addClass(a.overlay)),t.isMobile&&(n.scrollTop(0),$(i.contentWrapper).addClass(a.animate))},e.prototype.closeSubcategory=function(e){e.preventDefault(),this.fireBackButtonEvent(this.giveSecondLevelBackButtonIdentifier(e));var t=$(e.currentTarget).parent().parent();$(i.contentWrapper).removeClass(a.animate),t.removeClass(a.active)},e.prototype.fireBackButtonEvent=function(e){Cog.fireEvent("analytics","mobileMegaMenu.backButtonClick",{actionType:"click",clickType:"internal",elementLayer1:"snippet "+this.megaMenuSnippetName,elementLayer2:"megamenu",elementLayer3:"button",itemIdentifier:e,siteSection:"MastHead MegaMenu"})},e.prototype.giveSecondLevelBackButtonIdentifier=function(e){var t=$(e.target).closest('[role="tabpanel"]').attr("id");return"Back - "+this.giveCategoryName(t)},e.prototype.giveCategoryName=function(e){return this.$scope.find('[aria-controls="'+e+'"]').find(".text-wrapper").text()},e.prototype.addCategoryLinks=function(){var e=this;this.$categories.each(function(){var e=$(this),t=e.attr("id"),i=$("[data-category-id=#"+t+"]"),a=i.attr("href"),n=i.find(".text-wrapper").text(),o=e.find(".tabContent");o.prepend('<div class="megaMenu-category-lvl2"><a href="'+a+'">'+n+"</a></div>"),o.prepend('<div class="megaMenu-back-lvl2"><a href="#">Back</a></div>')}),this.$categories.find(".megaMenu-category-lvl2 > a").on("click",function(t){return e.fireParentNavigationAnchorClick(t)})},e.prototype.fireParentNavigationAnchorClick=function(e){var t=$(e.currentTarget).attr("href");Cog.fireEvent("analytics","mobileMegaMenu.parentCategoryNavigationClick",{actionType:"click",clickType:"internal",elementLayer1:"snippet "+this.megaMenuSnippetName,elementLayer2:"megamenu",elementLayer3:"richtext",elementExtraInfo:"Parent Navigation Element",internalDestination:t,itemIdentifier:this.giveActivePanelCategoryName(),siteSection:"MastHead MegaMenu"})},e.prototype.addThirdLvlMenu=function(e){var t=this;e.preventDefault(),this.fireSubcategoryClickEvent(e);var i=$(e.currentTarget),n=$(".megaMenu-content.is-active"),o=i.parent().clone();o.prepend('<div class="megaMenu-back-lvl3"><a href="#">Back</a></div>'),o.addClass("megaMenu-nav-lvl3"),o.insertAfter(i.closest(".megaMenu-content")),o.css("width"),o.addClass(a.active),n.addClass(a.animate);var s=$(".megaMenu-back-lvl3");s.on("click",function(){o.removeClass(a.active),n.removeClass(a.animate),setTimeout(function(){return o.remove()},500)}),o.find("h3 > a").on("click",function(e){return t.fireParentNavigationAnchorClick(e)}),o.find("li > a").on("click",function(e){return t.fireThirdLevelAnchorClickEvent(e)}),s.on("click",function(e){return t.fireThirdLevelBackButtonClickEvent(e)})},e.prototype.fireSubcategoryClickEvent=function(e){var t=$(e.currentTarget).find("a"),i=t.attr("href"),a=t.text();Cog.fireEvent("analytics","mobileMegaMenu.subcategoryClick",{actionType:"click",clickType:"internal",elementLayer1:"snippet "+this.megaMenuSnippetName,elementLayer2:"megamenu",elementLayer3:"richtext",internalDestination:i,itemIdentifier:this.giveActivePanelCategoryName()+" - "+a,siteSection:"MastHead MegaMenu"})},e.prototype.fireThirdLevelAnchorClickEvent=function(e){var t=$(e.currentTarget),i=t.closest(".megaMenu-nav-lvl3").find("h3 > a").text(),a=t.attr("href");Cog.fireEvent("analytics","mobileMegaMenu.thirdLevelAnchorClick",{actionType:"click",href:a,elementLayer1:"snippet "+this.megaMenuSnippetName,elementLayer2:"megamenu",elementLayer3:"richtext",internalDestination:a,itemIdentifier:this.giveActivePanelCategoryName()+" - "+i+" - "+t.text(),siteSection:"MastHead MegaMenu"})},e.prototype.fireThirdLevelBackButtonClickEvent=function(e){this.fireBackButtonEvent(this.giveThirdLevelBackButtonIdentifier(e))},e.prototype.giveThirdLevelBackButtonIdentifier=function(e){var t=$(e.currentTarget).closest(".megaMenu-nav-lvl3").find("h3 a").text();return"Back - "+this.giveActivePanelCategoryName()+" - "+t},e.prototype.giveActivePanelCategoryName=function(){var e=this.$categories.filter(".is-active").attr("id");return this.giveCategoryName(e)},e.prototype.setMegaMenuHeight=function(){var e=$(i.navContainer).outerHeight(),t=$(window).height()-e;this.$scope.height(t),this.$categories.outerHeight(t)},e.prototype.removeHeightSetting=function(){this.$scope.removeAttr("style"),this.$categories.removeAttr("style")},e.prototype.isTabletOrDesktopSmallCheck=function(){this.$scope.hasClass("megaMenu-tabletHorizontal")?t.isTabletOrDesktopSmall=this.media.isTablet():t.isTabletOrDesktopSmall=this.media.isTabletOrDesktopSmall()},e.prototype.isMobileCheck=function(){t.isMobile=this.media.isMobile()},e.prototype.attachResize=function(){var e=this;$(window).on("resize",_.debounce(function(){e.isTabletOrDesktopSmallCheck(),e.isMobileCheck(),t.isTabletOrDesktopSmall||t.isMobile?(e.setMegaMenuHeight(),e.detachEvents(),e.attachEvents(),$(document).trigger("isMobile")):(e.hideMegaMenu(),e.removeHeightSetting(),e.detachEvents()),t.isMobile?(e.detachPhoneEvents(),e.attachPhoneEvents()):(e.hideMegaMenu(),e.detachPhoneEvents())},200))},e}();e.onRegister=function(e){new n(e.$scope,this.external.status,this.external.media)},Cog.registerComponent({name:"MegaMenuMobileV2",api:e,selector:".megaMenu",requires:[{name:"utils.status",apiId:"status"},{name:"utils.media",apiId:"media"}]})}();
!function(e){function i(i,t){this.obj=i,this.url=t,this.properties={href:e(i).attr("href"),width:e(i).data("overlaywidth"),extenalLink:e(i).data("externallink")||"",label:e(i).text()}}function t(){return"mobile"===Cog.Cookie.read("device-group")}var l={},n={overlayContainer:null,overlayContent:null,overlayContentInner:null,overlayBackground:null,overlayLoading:null,overlayClose:null,mobileChecked:!1,mobile:!1,scrollPosition:null,startingPositionTop:100,eligibilityInternalCta:null,eligibilityExternalCta:null},o={eligibilityOverlayCta:".eligibility-overlay-mse-calc-cta",eligibilityOverlayDirectCta:".eligibility-overlay-external-calc-cta"};i.prototype.attachEvents=function(){var i=this,t=i.properties.href;t&&(n.mobile||(t.indexOf(".html")>-1?t=this.url.setSelector(t,"lightbox"):"/"===t.substring(t.length-1)?t=t.substring(0,t.lastIndexOf("/"))+".lightbox/":t+=".lightbox/"),e(i.obj).on("click",function(l){l.preventDefault(),l.stopPropagation(),n.mobile||(i.initOverlayContainer(),i.showLoadingContainer()),i.visible=!0,e.ajax({type:"GET",url:t,dataType:"html",success:function(e){i.overlayBuilder(e),Cog.init({$element:n.overlayContentInner})}}),i.handleEligibilityOverlayClick()}),e(document).on("click touchstart",".overlay-content",function(e){e.stopPropagation()}).on("click touchstart",".overlay-background, .overlay-container, .overlay-close",function(){i.visible&&i.hideOverlay()}).on("keydown",function(e){27===e.keyCode&&i.hideOverlay()}))},i.prototype.handleEligibilityOverlayClick=function(){var e=this;Cog.fireEvent("analytics","eligibilityOverlay.triggerAnchorClick",{actionType:"click",clickType:(e.properties.extenalLink.indexOf("/redir/")>=0?"externalPaid":"externalUnpaid")+"_Eligibility_Overlay_Triggered",siteSection:"mainSection",itemIdentifier:e.properties.label,destination:e.properties.extenalLink,target:e.obj})},i.prototype.handleEligibilityOverlayInternalButtonClick=function(e){var i=this;Cog.fireEvent("analytics","eligibilityOverlay.internalButttonClick",{actionType:"click",target:e,trigger:i.obj})},i.prototype.handleEligibilityOverlayExternalButtonClick=function(e){var i=this;Cog.fireEvent("analytics","eligibilityOverlay.externalButttonClick",{actionType:"click",target:e,trigger:i.obj})},i.prototype.setEligibilityExternalUrl=function(){n.eligibilityExternalCta.attr("href",this.properties.extenalLink)},i.prototype.setEligibilityExternalIdentifier=function(){n.eligibilityExternalCta.attr("data-item-identifier",this.properties.label)},i.prototype.bindEligibilityOverlayElements=function(){var i=this;n.eligibilityExternalCta=e(o.eligibilityOverlayDirectCta),n.eligibilityInternalCta=e(o.eligibilityOverlayCta),this.setEligibilityExternalUrl(),this.setEligibilityExternalIdentifier(),n.eligibilityInternalCta.on("click",function(e){i.handleEligibilityOverlayInternalButtonClick(e.target)}),n.eligibilityExternalCta.on("click",function(e){i.handleEligibilityOverlayExternalButtonClick(e.target)})},i.prototype.initOverlayContainer=function(){var i=e("body");n.overlayContainer?n.overlayContentInner.empty():(i.append("<div class='overlay-background'></div>","<div class='overlay-container eligibility-overlay-container'>\n                    <div class='overlay-content'>\n                        <div tabindex='0' class='overlay-close'></div>\n                        <div class='overlay-loading'></div>\n                        <div class='overlay-content-inner'></div>\n                    </div>\n                </div>"),n.overlayBackground=e(".overlay-background"),n.overlayContainer=e(".overlay-container"),n.overlayContent=e(".overlay-content"),n.overlayContentInner=e(".overlay-content-inner"),n.overlayLoading=e(".overlay-loading"),n.overlayClose=e(".overlay-close"))},i.prototype.showLoadingContainer=function(){n.overlayClose.hide(),n.overlayBackground.show(),n.overlayContainer.css({top:"50px"}),n.overlayContainer.show(),n.overlayLoading.show()},i.prototype.overlayBuilder=function(e){var i=this;n.mobile?window.open(i.properties.href,"_blank"):i.showOverlay(e)},i.prototype.showOverlay=function(i){var t=this.properties.width;n.overlayLoading.hide(),n.overlayClose.show(),n.scrollPosition=e(window).scrollTop(),e("body").addClass("overlayVisible"),n.overlayContent.removeClass("lightbox--full-content-size lightbox--default-size"),n.overlayContent.css("max-width","none"),t?n.overlayContent.addClass("lightbox--default-size"):n.overlayContent.addClass("lightbox--full-content-size"),n.overlayContentInner.append(i),n.overlayContentInner.find(".video").length?n.overlayContent.css({width:t}):n.overlayContent.css({"max-width":t}),e(".container-fluid").on("scroll",function(e){return e.preventDefault(),e.stopPropagation(),!1}),this.bindEligibilityOverlayElements()},i.prototype.hideOverlay=function(){n.overlayContainer.fadeOut(),n.overlayBackground.fadeOut(),this.visible&&(this.visible=!1,Cog.fireEvent("overlay","close"),e("body").removeClass("overlayVisible")),e(".container-fluid").off("scroll"),e(window).scrollTop(n.scrollPosition)},l.onRegister=function(e){var l=this;n.mobileChecked||(n.mobile=t(),n.mobileChecked=!0),e.$scope.each(function(){new i(this,l.external.url).attachEvents()})},Cog.registerComponent({name:"EligibilityOverlay",api:l,selector:"a.eligibility-overlay-trigger",requires:[{name:"utils.status",apiId:"status"},{name:"utils.url",apiId:"url"}]})}(Cog.jQuery());
function _classCallCheck(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var s={},e={resultsIframe:"#survey-results",pollClosedMessage:".sg-disqualify",showResultsLink:"#show-results-link"},t=function(){function s(e){_classCallCheck(this,s),this.$surveyGizmoPoll=e,this.bindUIElements(),this.bindUIEvents()}return s.prototype.bindUIElements=function(){this.$resultsIframe=this.$surveyGizmoPoll.find(e.resultsIframe).first(),this.$showResultsLink=this.$surveyGizmoPoll.find(e.showResultsLink).first(),this.$showResultsLabel=this.$showResultsLink.data("show-results-label"),this.$hideResultsLabel=this.$showResultsLink.data("hide-results-label")},s.prototype.bindUIEvents=function(){var s=this,t=this,i=0;!function s(){i<=5&&(t.$surveyGizmoPoll.find(e.pollClosedMessage).length>0?(t.$resultsIframe.show(),t.$showResultsLink.hide()):(i++,setTimeout(s,1e3)))}(),this.$showResultsLink.on("click",function(){return t.$resultsIframe.is(":visible")?(t.$resultsIframe.hide(),t.$showResultsLink.text(s.$showResultsLabel)):(t.$resultsIframe.show(),t.$showResultsLink.text(s.$hideResultsLabel)),!1})},s}();s.onRegister=function(s){new t(s.$scope)},Cog.registerComponent({name:"surveyGizmoPoll",api:s,selector:".surveyGizmoPoll"})}();
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t={},i={pageEvent:null},n=window.dataLayer,r=null,a=null,o=function(){function e(){_classCallCheck(this,e),this.logger=Cog.logger("AnalyticsContainer"),this.bindEvents()}return e.prototype.bindEvents=function(){Cog.addListener("analytics","track",this._pushToDataLayerIfAvailableWithCallback,{scope:this})},e.prototype._pushToDataLayerIfAvailable=function(e){this.logger.info("GTM event {{0}}",e),_.isUndefined(n)||n.push(e)},e.prototype._pushToDataLayerIfAvailableWithCallback=function(e){this._pushToDataLayerIfAvailable(e.eventData.analyticsObject),_.isUndefined(n)&&_.isFunction(e.eventData.callback)&&e.eventData.callback()},e}(),s=function(){function e(t){_classCallCheck(this,e),this.event=t.event,this.actionType=t.actionType,this.clickType=t.clickType,this.pageElement=t.pageElement,_.isUndefined(t.productDetails)||(this.productDetails=t.productDetails),_.isUndefined(t.formEntry)||(this.formEntry=t.formEntry),_.isUndefined(t.searchCriteria)||(this.searchCriteria=t.searchCriteria),_.isUndefined(t.deal)||(this.deal=t.deal),_.isUndefined(t.product)||(this.product=t.product)}return _createClass(e,null,[{key:"Builder",get:function(){return function(){function t(e,i){_classCallCheck(this,t),this.event="pageEvent",this.actionType=e,this.$target=i,this.clickType=void 0,this.pageElement=void 0,this.productDetails=void 0,this.formEntry=void 0,this.searchCriteria=void 0,this.deal=void 0}return t.prototype.withClickType=function(e){return this.clickType=e,this},t.prototype.withSiteSection=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.siteSection=e,this.pageElement=t}return this},t.prototype.withElementLayers=function(e){for(var t=0;t<=4;t++)this.withElementLayer(e[t],t+1);return this},t.prototype.withElementLayer=function(e,t){if(!_.isUndefined(e)){var i=this.hiddenPageElement();i["elementLayer"+t]=e,this.pageElement=i}return this},t.prototype.withAppendedElementLayer=function(e){return _.isUndefined(e)||(this.elementLayerToAppend=e),this},t.prototype.withLastElementLayer=function(e){return _.isUndefined(e)||(this.lastElementLayer=e),this},t.prototype.withItemIdentifier=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.itemIdentifier=e,this.pageElement=t}return this},t.prototype.withElementExtraInfo=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.elementExtraInfo=e,this.pageElement=t}return this},t.prototype.withListLocation=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.listLocation=e,this.pageElement=t}return this},t.prototype.withDestination=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.destination=e,this.pageElement=t}return this},t.prototype.withInternalDestination=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.internalDestination=e,this.pageElement=t}return this},t.prototype.withPaginationNumber=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.paginationNumber=e,this.pageElement=t}return this},t.prototype.withLinkID=function(e){if(!_.isUndefined(e)){var t=this.hiddenPageElement();t.linkID=e,this.pageElement=t}return this},t.prototype.withSearchCriteria=function(e){return this.searchCriteria=e,this},t.prototype.withSearchTerm=function(e){if(!_.isUndefined(e)){var t=this.hiddenFromEntry();t.searchTerm=e,this.formEntry=t}return this},t.prototype.withSearchDropdownSelection=function(e){if(!_.isUndefined(e)){var t=this.hiddenFromEntry();t.searchDropdownSelection=e,this.formEntry=t}return this},t.prototype.withExtraObject=function(e){return _.isUndefined(e)||_.assign(this,e),this},t.prototype.hiddenPageElement=function(){var e=this.pageElement;return _.isUndefined(this.pageElement)&&(e={siteSection:void 0,elementLayer1:void 0,elementLayer2:void 0,elementLayer3:void 0,elementLayer4:void 0,elementLayer5:void 0,itemIdentifier:void 0,elementExtraInfo:void 0,listLocation:void 0,destination:void 0,internalDestination:void 0,paginationNumber:void 0,linkID:void 0}),e},t.prototype.hiddenFromEntry=function(){var e=this.formEntry;return _.isUndefined(this.formEntry)&&(e={searchTerm:void 0,searchDropdownSelection:void 0}),e},t.prototype.setDefaults=function(){if(this.$target){if((_.isUndefined(this.pageElement)||_.isUndefined(this.pageElement.siteSection))&&this.withSiteSection(r.getSiteSectionOf(this.$target)),_.isUndefined(this.pageElement)||_.isUndefined(this.pageElement.elementLayer1)){var e=a.getLayers(this.$target);_.isUndefined(this.lastElementLayer)||(e[e.length-1]=this.lastElementLayer),_.isUndefined(this.elementLayerToAppend)||e.push(this.elementLayerToAppend),this.withElementLayers(e)}delete this.$target}},t.prototype.build=function(){return this.setDefaults(),new e(this)},t}()}}]),e}();t.init=function(){i.pageEvent=s,r=this.external.analyticsSiteSectionProvider.siteSectionProvider,a=this.external.analyticsLayerProvider.layerProvider,new o},Cog.registerStatic({name:"analyticsModule",api:t,sharedApi:i,requires:[{name:"analyticsSiteSectionProvider",apiId:"analyticsSiteSectionProvider"},{name:"analyticsLayerProvider",apiId:"analyticsLayerProvider"}]})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e=null,i=function(){function t(){_classCallCheck(this,t),this.bindEvents()}return t.prototype.bindEvents=function(){Cog.addListener("analytics","guide.backToTopClick",this.backToTopClicked,{scope:this})},t.prototype.backToTopClicked=function(t){var i=t.eventData.$target,n=new e.Builder("click",i).withClickType("pageAction").withElementLayer("Sharing",1).withItemIdentifier(i.text()).build();Cog.fireEvent("analytics","track",{analyticsObject:n})},t}();t.init=function(){e=this.external.analyticsModule.pageEvent,new i},Cog.registerStatic({name:"analyticsBackToTopModule",api:t,requires:[{name:"analyticsModule",apiId:"analyticsModule"}]})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(t){var i={},e={analyticsModule:null,analyticsHomepageModule:null,analyticsTipPageModule:null},n=null,l=null,a=null,o=null,s=function(){function i(t){_classCallCheck(this,i),this.logger=Cog.logger("AnalyticsContainer"),this.bindEvents()}return i.prototype.bindEvents=function(){Cog.addListener("analytics","clickable.click",this.customClick,{scope:this}),t("body").on("click","a",this.linkClick.bind(this))},i.prototype.customClick=function(t){this.trackClick(t.eventData.$target,t.eventData.href,t.eventData.elementExtraInfo,t)},i.prototype.linkClick=function(i){var e=t(i.currentTarget),n=e.attr("href");this.isCustomClick(n)||this.isCustomListClick(e)||this.isSocialShareDealClick(e)||this.isProductBoxClick(e)||this.isDealsTileClick(e)||this.isMegaMenuClick(e)||this.trackClick(e,n,void 0,i)},i.prototype.trackClick=function(t,i,e,s){var c=new n.Builder("click",t).withClickType(l.getClickType(i)).withDestination(l.getDestination(i)).withItemIdentifier(this.getItemIdentifier(t,i)).withLinkID(this.getLinkID(t)).withElementExtraInfo(e);a.isHomepage&&(c=a.attachHomepageAnalytics(c,s,t,e)),o.isTipPage&&(c.withInternalDestination(l.getInternalDestination(i)),c=o.attachTipPageAnalytics(c,s,t));var r=c.build();Cog.fireEvent("analytics","track",{analyticsObject:r})},i.prototype.getLinkID=function(t){return t.data("linkId")},i.prototype.getItemIdentifier=function(t,i){var e=t.text().trim()||(0===i.indexOf("#")?i.substring(1):"")||t.attr("title");if(!e){var n=t.find("img");e=n.length?n.attr("alt")||n.attr("title"):""}return e},i.prototype.isCustomClick=function(t){var i=["#tab","#accordion"];return void 0!==_.find(i,function(i){return t&&0===t.indexOf(i)})},i.prototype.isCustomListClick=function(t){var i=[".articleList-list",".page-list",".tip-box-general-list",".tip-box-main-list",".tools-list-items",".promoBox",".popularGuides",".most-popular-slider"];return void 0!==_.find(i,function(i){return t.closest(i).length>0})},i.prototype.isSocialShareDealClick=function(t){return t.closest(".deals-full-list-article .share-this-bottom").length>0},i.prototype.isProductBoxClick=function(t){return t.closest(".composite-productboxes").length>0},i.prototype.isDealsTileClick=function(t){return t.closest(".dealsCompactList-article").length>0||t.closest(".deals-full-list-article").length>0||t.closest(".dealsPriorityList-article").length>0},i.prototype.isMegaMenuClick=function(t){return t.closest(".top-nav-v2").length>0||t.closest(".megaMenu").length>0},i}();i.init=function(){n=this.external.analyticsModule.pageEvent,l=this.external.analyticsClickTypeProvider.clickTypeProvider,a=this.external.analyticsHomepageModule,o=this.external.analyticsTipPageModule,new s},Cog.registerStatic({name:"analyticsClickableModule",api:i,externalApi:e,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"},{name:"analyticsHomepageModule",apiId:"analyticsHomepageModule"},{name:"analyticsTipPageModule",apiId:"analyticsTipPageModule"}]})}(Cog.jQuery(),_);
function _classCallCheck(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var n={},i={clickTypeProvider:null},t=function(){function n(){_classCallCheck(this,n)}return n.prototype.getClickType=function(n){return this.isPageAction(n)?"pageAction":this.isPaid(n)?"externalPaid":this.isInternal(n)?"internal":"externalUnpaid"},n.prototype.getDestination=function(n){var i="";if(this.isPaid(n)){var t=(i=n.substring(n.indexOf("/redir/")+"/redir/".length)).indexOf("?");t>0&&(i=i.substring(0,t))}else this.isPageAction(n)||this.isInternal(n)||(i=n);return i},n.prototype.getInternalDestination=function(n){return this.isInternal(n)?n:""},n.prototype.isPageAction=function(n){var i=["#","mailto:","javascript:"];return void 0!==_.find(i,function(i){return 0===n.indexOf(i)})},n.prototype.isPaid=function(n){return n.indexOf("/redir/")>=0},n.prototype.isInternal=function(n){var i=["www.megashopbot.com","www.mobilevaluer.com","www.tunechecker.com","travelmoneymax.com","mse-demo.local","moneysavingexpert.com"],t=n.indexOf("?"),e=_.find(i,function(i){var e=n.indexOf(i);return e>=0&&(-1===t||e<t)});return"/"===n[0]||void 0!==e},n}();n.init=function(){i.clickTypeProvider=new t},Cog.registerStatic({name:"analyticsClickTypeProvider",api:n,sharedApi:i})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e={},n=function(){function t(e){_classCallCheck(this,t),this.bindEvents()}return t.prototype.bindEvents=function(){Cog.addListener("tab","change",this.collapsibleClick,{scope:this}),Cog.addListener("accordion","change",this.collapsibleClick,{scope:this})},t.prototype.collapsibleClick=function(t){if(t.eventData.manual){var e=t.eventData.$target;Cog.fireEvent("analytics","clickable.click",{$target:e,elementExtraInfo:t.eventData.elementExtraInfo,href:e.attr("href")})}},t}();e.init=function(){new n},Cog.registerStatic({name:"analyticsCollapsibleModule",api:e})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(t){var i={compact:{dealsList:".dealsCompactList",dealsListItem:".dealsCompactList-article"},full:{dealsList:".dealsFullList",dealsListItem:".deals-full-list-article"},priority:{dealsList:".dealsPriorityList-list",dealsListItem:".dealsPriorityList-article"}},e={A:"text",H3:"text",IMG:"image"},a={HEADLINE:"headline",BRAND_IMAGE:"brand_image",MORE_INFO:"more_info",CTA:"cta_button",DEAL_CONTENT:"body_content"},s={H3:a.HEADLINE,IMG:a.BRAND_IMAGE},n={},r=null,l=null,o=function(){function n(){_classCallCheck(this,n),this.bindElements(),this.bindEvents()}return n.prototype.bindElements=function(){this.$dealsCompactList=t(i.compact.dealsList),this.$compactListAnchors=this.$dealsCompactList.find("a"),this.$dealsFullList=t(i.full.dealsList),this.$fullListAnchors=this.$dealsFullList.find("a"),this.$dealsPriorityList=t(i.priority.dealsList),this.$priorityListAnchors=this.$dealsPriorityList.find("a")},n.prototype.bindEvents=function(){var t=this;this.$compactListAnchors.on("click",function(e){return t.dealsListTileClick(e,i.compact)}),this.$fullListAnchors.on("click",function(e){return t.dealsListTileClick(e,i.full)}),this.$priorityListAnchors.on("click",function(e){return t.dealsListTileClick(e,i.priority)})},n.prototype.dealsListTileClick=function(i,e){var a=t(i.currentTarget);if(!(a.closest(".share-section").length>0||this.isAccordionPanel(a)||this.isCompactListCta(a))){var s=t(i.target),n=this.createDealAnalyticsObject(a,s,e);Cog.fireEvent("analytics","track",{analyticsObject:n})}},n.prototype.isAccordionPanel=function(t){return this.containsClass(t,"accordion-title-link")},n.prototype.containsClass=function(t,i){var e=t.attr("class");return!!e&&-1!==e.split().indexOf(i)},n.prototype.isCompactListCta=function(t){return this.containsClass(t,"dealsCompactList-cta")},n.prototype.createDealAnalyticsObject=function(t,i,e){var s=t.attr("href"),n=this.isImage(i)?i.attr("alt"):t.text().trim(),o=new r.Builder("click",t).withClickType(l.getClickType(s)).withItemIdentifier(n).withDestination(l.getDestination(s)).withElementExtraInfo(this.getElementExtraInfo(t,i)).withListLocation(this.getDealTileLocation(t,e)).withExtraObject(this.getAnalyticsData(t,e));if(this.isDealsFullList(t)){var c=this.recognizeClickedDealPart(t,i);c===a.MORE_INFO?o.withLastElementLayer(c):o.withAppendedElementLayer(c)}return o.build()},n.prototype.isImage=function(t){return"IMG"===t.prop("tagName")},n.prototype.recognizeClickedDealPart=function(t,i){var e=a.DEAL_CONTENT;return t.closest(".deal-header").length>0?e=s[this.tagName(i)]:t.closest(".accordion-container").length>0?e=a.MORE_INFO:this.isCta(t)&&(e=a.CTA),e},n.prototype.tagName=function(t){return t.prop("tagName")},n.prototype.getElementExtraInfo=function(t,i){var e=this.getElementFrom(i),a=e||this.getElementFrom(t);return this.isCta(t)?"cta":a},n.prototype.getElementFrom=function(t){return e[this.tagName(t)]},n.prototype.isCta=function(t){var i=t.attr("class");return!!i&&this.hasProductBoxButtonClass(i)},n.prototype.hasProductBoxButtonClass=function(t){for(var i=!1,e=t.split(" "),a=Array.isArray(e),s=0,e=a?e:e[Symbol.iterator]();;){var n;if(a){if(s>=e.length)break;n=e[s++]}else{if((s=e.next()).done)break;n=s.value}if(-1!==n.indexOf("button-primary")){i=!0;break}}return i},n.prototype.getDealTileLocation=function(t,i){var e=t.closest(i.dealsListItem);return e.parent().find(i.dealsListItem).index(e)+1},n.prototype.getAnalyticsData=function(t,i){var e=t.closest(i.dealsListItem);return{deal:{id:this.dealId(e),headline:this.headline(e),brand:this.brand(e),expiry:this.expiry(e)}}},n.prototype.dealId=function(t){return t.data("deal-id")},n.prototype.headline=function(t){return t.data("deal-headline")},n.prototype.brand=function(t){return t.data("deal-brand")},n.prototype.expiry=function(t){return t.data("deal-expiry")},n.prototype.isDealsFullList=function(t){return t.closest(i.full.dealsList).length>0},n}();n.init=function(){r=this.external.analyticsModule.pageEvent,l=this.external.analyticsClickTypeProvider.clickTypeProvider,new o},Cog.registerStatic({name:"analyticsDealsListsModule",api:n,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i){var t={},e=null,a=null,n={externalPaid:"externalPaid",externalUnpaid:"externalUnpaid"},l={sectionExternalPaid:"Eligibility_Overlay_externalPaid",sectionExternalUnPaid:"Eligibility_Overlay_externalUnPaid"},r=function(){function t(){_classCallCheck(this,t),this.bindEvents(),this.isExternalPaid=!1}return t.prototype.bindEvents=function(){Cog.addListener("analytics","eligibilityOverlay.triggerAnchorClick",this.eligibilityOverlayTriggerClickHandler,{scope:this}),Cog.addListener("analytics","eligibilityOverlay.internalButttonClick",this.eligibilityOverlayInternalButtonClickHandler,{scope:this}),Cog.addListener("analytics","eligibilityOverlay.externalButttonClick",this.eligibilityOverlayExternalButtonClickHandler,{scope:this})},t.prototype.eligibilityOverlayTriggerClickHandler=function(t){var n=t.eventData,l=new e.Builder(n.actionType,i(n.target)).withClickType(n.clickType).withItemIdentifier(n.itemIdentifier).withSiteSection(n.siteSection).withDestination(a.getDestination(n.destination)).build();this.isExternalPaid=a.isPaid(n.destination),Cog.fireEvent("analytics","track",{analyticsObject:l})},t.prototype.eligibilityOverlayInternalButtonClickHandler=function(t){var n=t.eventData,r=i(n.target),c=new e.Builder(n.actionType,i(n.trigger)).withClickType(a.getClickType(r.attr("href"))).withSiteSection(this.isExternalPaid?l.sectionExternalPaid:l.sectionExternalUnPaid).withItemIdentifier(r.text()).withDestination("").build();Cog.fireEvent("analytics","track",{analyticsObject:c})},t.prototype.eligibilityOverlayExternalButtonClickHandler=function(t){var r=t.eventData,c=i(r.target),s=new e.Builder(r.actionType,i(r.trigger)).withClickType(this.isExternalPaid?n.externalPaid:n.externalUnpaid).withSiteSection(this.isExternalPaid?l.sectionExternalPaid:l.sectionExternalUnPaid).withItemIdentifier(i(r.trigger).text()).withDestination(a.getDestination(c.attr("href"))).build();Cog.fireEvent("analytics","track",{analyticsObject:s})},t}();t.init=function(){e=this.external.analyticsModule.pageEvent,a=this.external.analyticsClickTypeProvider.clickTypeProvider,new r},Cog.registerStatic({name:"analyticsEligibilityOverlayModule",api:t,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var e={},i=null,t=function(){function e(){_classCallCheck(this,e),this.linkType={topLevelLink:"Headline",secondLevelLink:"SubHeadline"},this.bindEvents()}return e.prototype.bindEvents=function(){Cog.addListener("analytics","guidePageNavigation.topLevelNavigationClick",this.handleTopLevelLinkClick(),{scope:this}),Cog.addListener("analytics","guidePageNavigation.secondLevelNavigationClick",this.handleSecondLevelLinkClick(),{scope:this}),Cog.addListener("analytics","guidePageNavigation.toggleSecondLevelClick",this.handleExpandCollapseClick,{scope:this})},e.prototype.handleLinkClick=function(e){return function(t){var n=t.eventData,a=n.$target,l=n.index,o=a.text()||"",c=a.attr("href"),r=new i.Builder("click",a).withClickType("pageAction").withSiteSection("In Page Navigation").withElementLayer("In this guide",1).withElementLayer(e,2).withElementLayer("jumplink",3).withElementLayer(l,4).withItemIdentifier(o.trim()).withInternalDestination(c).build();Cog.fireEvent("analytics","track",{analyticsObject:r})}},e.prototype.handleExpandCollapseClick=function(e){var t=e.eventData,n=t.$target,a=t.index,l=t.expanded?"collapse":"expand",o=n.text()||"",c=n.attr("href"),r=new i.Builder("click").withClickType(l).withSiteSection("In Page Navigation").withElementLayer("In this guide",1).withElementLayer(this.linkType.topLevelLink,2).withElementLayer(l,3).withElementLayer(a,4).withItemIdentifier(o.trim()).withInternalDestination(c).build();Cog.fireEvent("analytics","track",{analyticsObject:r})},e.prototype.handleTopLevelLinkClick=function(){return this.handleLinkClick(this.linkType.topLevelLink)},e.prototype.handleSecondLevelLinkClick=function(){return this.handleLinkClick(this.linkType.secondLevelLink)},e}();e.init=function(){i=this.external.analyticsModule.pageEvent,new t},Cog.registerStatic({name:"analyticsGuidePageNavigation",api:e,requires:[{name:"analyticsModule",apiId:"analyticsModule"}]})}(Cog.jQuery());
!function(t){function e(e){var n=t(e.target),i="text";return n&&"IMG"===n.prop("tagName")&&(i=t(e.currentTarget).hasClass("video-article")?"video":"image"),i}function n(t){var e=void 0,n=void 0;return i(t)||o(t)||s(t)?e="li":a(t)?e=".hotDealsItem":l(t)&&(e=".dealsPriorityList-article"),1===(n=t.closest(e)).length?n.parent().children(e).index(n[0])+1:1===(n=t.closest(e)).length?n.closest(void 0).find(e).index(n[0])+1:r(t)?0:void 0}function i(t){return t.closest(".trending-items").length>0}function o(t){return t.closest(".tip-box-general-scroll, .tip-box-main").length>0}function a(t){return t.closest(".hotDealsItem").length>0}function l(t){return t.closest(".dealsPriorityList-article").length>0}function r(t){var e=t.closest("[data-id^='section-guides-']"),n=0===t.closest(".promoBoxItem").length,i=0===t.closest("ul > li").length;return e.length>0&&n&&i}function s(t){var e=t.closest("[data-id^='section-guides-']"),n=t.closest("ul > li").length>0;return e.length>0&&n}var c={isHomepage:!1,attachHomepageAnalytics:null};c.isHomepage=1===t("body.layout-homepage.template-homepage").length,c.attachHomepageAnalytics=function(t,i,o,a){var l=a||e(i);return t.withListLocation(n(o)).withElementExtraInfo(l)},Cog.registerStatic({name:"analyticsHomepageModule",api:{},sharedApi:c})}(Cog.jQuery(),_);
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e={layerProvider:null},n=function(){function t(){_classCallCheck(this,t)}return t.getLayers=function(t){return this.getStaticLayers(t)||this.getCalculatedLayers(t)},t.getStaticLayers=function(t){return 1===t.closest(".tip-email-popup").length?["tipSignUpBanner"]:void 0},t.getCalculatedLayers=function(t){var e=_.map(t.parents(),function(t){return this.getAnalyticsId($(t))}.bind(this));return(e=this.invertArray(e)).push(this.addAnalyticsIdForCurrent(t)),e=_.filter(e,function(t){return""!==t}),e=this.isInSectionGuides(t)?this.replaceWithSectionGuidesLayers(t):this.limitLayers(e)},t.invertArray=function(t){var e=[];return _.eachRight(t,function(t){return e.push(t)}),e},t.limitLayers=function(t){var e=[];if(t.length>5){e.push(t[0]);for(var n=t.length-4;n<t.length;n++)e.push(t[n])}else e=t;return e},t.addAnalyticsIdForCurrent=function(t){return this.getAnalyticsIdFromDataId(t.find("> .tabMenuItem"))||this.getAnalyticsId(t)},t.getAnalyticsId=function(t){return this.getAnalyticsIdFromDataId(t)||this.getAnalyticsIdFromId(t)||this.getAnalyticsIdFromHref(t)||this.getAnalyticsIdFromClassReference(t)||this.getAnalyticsIdFromClassAnalytics(t)},t.getAnalyticsIdFromDataId=function(t){return t.data("id")},t.getAnalyticsIdFromId=function(t){return t.is(".accordion-content-wrapper, .tabs-content")?this.cleanupId(t.attr("id")):""},t.getAnalyticsIdFromHref=function(t){var e="",n=t.attr("href")||"";return 0!==n.indexOf("#tab")&&0!==n.indexOf("#accordion")||(e=this.cleanupId(n)),e},t.cleanupId=function(t){return t.replace(/#/,"").replace(/content-/i,"").replace(/\d+-/i,"")},t.getAnalyticsIdFromClassAnalytics=function(t){return this.getSelectorValue(t,"analytics-")},t.getAnalyticsIdFromClassReference=function(t){var e=this.getSelectorValue(t,"reference-"),n=this.getSelectorValue(t,"analytics-"),i=e;return e&&n&&(i=e+" "+n),i},t.getSelectorValue=function(t,e){var n="",i=t.attr("class")||"",r=i.indexOf(e);if(r>=0){var a=(n=i.substring(r+e.length)).indexOf(" ");a>=0&&(n=n.substring(0,a))}return n},t.isInSectionGuides=function(t){return t.closest("[data-id^='section-guides-']").length>0},t.replaceWithSectionGuidesLayers=function(t){var e=t.closest("[data-id^='section-guides-']"),n=e.find(".component-content .paragraphSystem > .richText"),i=e.find(".promoBoxItem"),r=e.attr("data-id"),a=void 0;return 4===n.index(t.closest(".richText"))?a=r+"-tags":2===n.index(t.closest(".richText"))?a="popular-guides":-1!==i.index(t.closest(".promoBoxItem"))&&(a="promo-guide-"+(i.index(t.closest(".promoBoxItem"))+1)),[r,a]},t}();t.init=function(){e.layerProvider=n},Cog.registerStatic({name:"analyticsLayerProvider",api:t,sharedApi:e})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i=null,a=null,n=function(){function e(){_classCallCheck(this,e),this.bindEvents()}return e.prototype.bindEvents=function(){Cog.addListener("analytics","singleButtonShareThis.shareThisButton",this.handleShareThisButtonClick,{scope:this}),Cog.addListener("analytics","singleButtonShareThis.shareThisItem",this.handleShareThisItemClick,{scope:this})},e.prototype.handleShareThisButtonClick=function(e){var t=e.eventData,n=new i.Builder("click",t.$target).withClickType(a.getClickType("#")).withElementLayer(t.elementLayer1,1).withItemIdentifier(t.itemIdentifier).build();Cog.fireEvent("analytics","track",{analyticsObject:n})},e.prototype.handleShareThisItemClick=function(e){var t=e.eventData,n=t.$target,l=n.attr("href"),r=new i.Builder("click",n).withClickType(a.getClickType(l)).withElementLayer(t.elementLayer1,1).withItemIdentifier(n.attr("title")).withDestination(l.indexOf("mailto")>=0?void 0:l).build();Cog.fireEvent("analytics","track",{analyticsObject:r})},e}();t.init=function(){i=this.external.analyticsModule.pageEvent,a=this.external.analyticsClickTypeProvider.clickTypeProvider,new n},Cog.registerStatic({name:"analyticsLhsBylineShareThis",api:t,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i=null,n=null,a=function(){function e(){_classCallCheck(this,e),this.bindEvents()}return e.prototype.bindEvents=function(){Cog.addListener("analytics","promoBoxLeftHandSide.linkClick",this.handleTitleLinkClick,{scope:this})},e.prototype.handleTitleLinkClick=function(e){var t=e.eventData,a=new i.Builder("click",t.$target).withClickType(n.getClickType(t.href)).withElementLayer(t.elementLayer1,1).withElementLayer(t.elementLayer2,2).withElementLayer(t.elementLayer3,3).withElementLayer(t.elementLayer4,4).withItemIdentifier(t.itemIdentifier.trim()).withInternalDestination(n.getInternalDestination(t.href)).build();Cog.fireEvent("analytics","track",{analyticsObject:a})},e}();t.init=function(){i=this.external.analyticsModule.pageEvent,n=this.external.analyticsClickTypeProvider.clickTypeProvider,new a},Cog.registerStatic({name:"analyticsLhsPromoboxModule",api:t,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i){var t={},n="",o=function(){function t(i){_classCallCheck(this,t),this.bindEvents()}return t.prototype.bindEvents=function(){i("a.lightbox:not(.eligibility-overlay-trigger)").on("click",this.lightboxLinkClick.bind(this)),Cog.addListener("overlay","close",this.lightboxCloseClick,{scope:this})},t.prototype.lightboxCloseClick=function(t){Cog.fireEvent("analytics","clickable.click",{$target:i("<div>"+n+"</div>"),href:"#lightbox-close"})},t.prototype.lightboxLinkClick=function(t){var o=i(t.currentTarget);n=o.text().trim(),Cog.fireEvent("analytics","clickable.click",{$target:o,href:"#lightbox-open"})},t}();t.init=function(){new o},Cog.registerStatic({name:"analyticsLightboxModule",api:t})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(t){var i={},e={analyticsModule:null},n=null,s=null,o=function(){function i(t){_classCallCheck(this,i),this.bindElements(),this.bindEvents()}return i.prototype.bindEvents=function(){this.$promoBoxItem.on("click",this.promoBoxItemClick.bind(this)),this.$articleListItem.on("click",this.recentArticlesClick.bind(this)),this.$pageListItem.on("click",this.recentPaginatedListItemClick.bind(this)),this.$tipBoxGeneralListItem.on("click",this.tipBoxListItemClick.bind(this)),this.$tipBoxMainListItem.on("click",this.tipBoxListItemClick.bind(this)),this.$toolsListItem.on("click",this.toolsListItemClick.bind(this)),this.$popularGuidesItem.on("click",this.regularListItemClick.bind(this)),this.$trending.on("click",this.regularListItemClick.bind(this))},i.prototype.bindElements=function(){this.$pageList=t(".page-list"),this.$articleList=t(".articleList-list"),this.$tipBoxGeneralList=t(".tip-box-general-list"),this.$tipBoxGeneralListItem=this.$tipBoxGeneralList.find(".tip-box-general-list-item"),this.$tipBoxMainList=t(".tip-box-main-list"),this.$tipBoxMainListItem=this.$tipBoxMainList.find(".tip-box-main-list-item"),this.$toolsList=t(".tools-list-items"),this.$articleListItem=this.$articleList.find(".articleList-article"),this.$pageListItem=this.$pageList.find(".page-list-item"),this.$toolsListItem=this.$toolsList.find(".toolsListItem"),this.$promoBoxItem=t(".promoBoxItem, .promoBox .dynamic-guides .item"),this.$popularGuidesItem=t(".popularGuides a"),this.$trending=t(".trending")},i.prototype.recentPaginatedListItemClick=function(i){var e=t(i.target),o=this.findAnchorAndHref(e),l=new n.Builder("click",e).withClickType(s.getClickType(o)).withElementExtraInfo(this.getElementExtraInfo(e)).withListLocation(this.getListLocation(e,".page-list-item")).withItemIdentifier(this.getPageListItemHeadline(e)).withPaginationNumber(this.getPageNumber()).build();Cog.fireEvent("analytics","track",{analyticsObject:l})},i.prototype.promoBoxItemClick=function(i){var e=t(i.target),o=this.findAnchor(e),l=this.findAnchorAndHref(e),a=e.closest("[data-id='martins-blog']").length>0?"[data-id='martins-blog']":void 0,r=new n.Builder("click",e).withClickType(s.getClickType(l)).withElementExtraInfo(this.getElementExtraInfo(e)).withListLocation(this.getListLocationByType(e,".promoBoxItem, .item",a)).withItemIdentifier(o.text().trim()||o.attr("title")).build();Cog.fireEvent("analytics","track",{analyticsObject:r})},i.prototype.regularListItemClick=function(i){var e=t(i.target),o=this.findAnchor(e);if(0!==o.size()){var l=this.findHrefFromAnchor(o),a=new n.Builder("click",e).withClickType(s.getClickType(l)).withElementExtraInfo(this.getElementExtraInfo(e)).withListLocation(this.getListLocation(e,"li")).withItemIdentifier(e.text().trim()).build();Cog.fireEvent("analytics","track",{analyticsObject:a})}},i.prototype.recentArticlesClick=function(i){var e=t(i.target),o=this.findAnchorAndHref(e),l=new n.Builder("click",e).withClickType(s.getClickType(o)).withElementExtraInfo(this.getElementExtraInfo(e)).withListLocation(this.getListLocation(e,".articleList-article")).withItemIdentifier(this.getArticleListItemHeadline(e)).build();Cog.fireEvent("analytics","track",{analyticsObject:l})},i.prototype.tipBoxListItemClick=function(i){var e=t(i.target),o=t(i.currentTarget),l=e.closest(".tip-box-general-list").length>0?".tip-box-general-list-item":".tip-box-main-list-item",a=this.findAnchorAndHref(e),r=new n.Builder("click",o).withClickType(s.getClickType(a)).withDestination(s.getDestination(a)).withElementExtraInfo(this.getElementExtraInfo(o)).withListLocation(this.getListLocation(e,l)).withItemIdentifier(o.text().trim()).build();Cog.fireEvent("analytics","track",{analyticsObject:r})},i.prototype.toolsListItemClick=function(i){var e=t(i.target),o=t(i.currentTarget),l=this.findAnchorAndHref(e),a=new n.Builder("click",o).withClickType(s.getClickType(l)).withDestination(s.getDestination(l)).withElementExtraInfo(this.getElementExtraInfo(o)).withListLocation(this.getListLocation(e,".toolsListItem")-1).withItemIdentifier(o.text().trim()).build();Cog.fireEvent("analytics","track",{analyticsObject:a})},i.prototype.findAnchor=function(t){return t.is("a")?t:t.closest("a")},i.prototype.findHrefFromAnchor=function(t){return t.attr("href")||"#"},i.prototype.findAnchorAndHref=function(t){var i=this.findAnchor(t);return this.findHrefFromAnchor(i)},i.prototype.getListLocationByType=function(t,i,e){var n=t.closest(i),s=e?n.closest(e):n.parent(),o=n.data("index");return 1+(void 0!==o?o:s.find(i).index(n))||void 0},i.prototype.getListLocation=function(t,i){return t.parent().closest(i).index()+1},i.prototype.getPageListItemHeadline=function(t){return t.closest(".page-list-item").find(".list-item-link, .news-list-item-headline, .pressreleases-list-item-headline").text()},i.prototype.getArticleListItemHeadline=function(t){return t.closest(".articleList-article").find(".articleList-title a").text()},i.prototype.getElementExtraInfo=function(t){var i=t.closest("div,h1,h3").attr("class"),e=t.attr("class");return"IMG"===t.prop("tagName")?t.closest("a").hasClass("video-article")?"video":"image":i.includes("list-item-cta")?"cta":i.includes("list-item-title")||i.includes("articleList-title")||i.includes("news-list-item-headline")||e&&e.includes("pressreleases-list-item-headline")||i.includes("promobox-title")||i.includes("promobox-content")||i.includes("promobox-description")?"text":i.includes("image-full")||e&&e.includes("articleList-thumbnail")||i.includes("news-list-item-image")?"image":void 0},i.prototype.getPageNumber=function(){var t=this.$pageList.find(".pagination-navigation .is-active").text()||1;return parseInt(t,10)},i}();i.init=function(){n=this.external.analyticsModule.pageEvent,s=this.external.analyticsClickTypeProvider.clickTypeProvider,new o},Cog.registerStatic({name:"analyticsListModule",api:i,externalApi:e,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e={},i=null,n=null,a=function(){function e(t){_classCallCheck(this,e),this.bindElements(),this.bindEvents(),this.media=t}return e.prototype.bindElements=function(){this.$navLinks=t(".megaMenu a")},e.prototype.bindEvents=function(){var t=this;this.$navLinks.on("click",function(e){t.navLinksClick(e)})},e.prototype.navLinksClick=function(e){var i=t(e.currentTarget),n=this.createMegaMenuAnalyticsObject(i);Cog.fireEvent("analytics","track",{analyticsObject:n})},e.prototype.createMegaMenuAnalyticsObject=function(t){var e=t.attr("href"),a=this.getItemIdentifier(t,"MastHead MegaMenu"),r="richtext",s=n.getInternalDestination(e);return this.media.isTabletOrDesktopSmall()&&this.isBackBtn(t)&&(a="Back - "+a,r="button",s=void 0),new i.Builder("click",t).withElementLayer("snippet "+this.giveSnippetName(t),1).withElementLayer("megamenu",2).withElementLayer(r,3).withClickType(n.getClickType(e)).withItemIdentifier(a).withInternalDestination(s).withDestination(n.getDestination(e)).withSiteSection("MastHead MegaMenu").build()},e.prototype.giveSnippetName=function(t){return t.closest(".snippetReference").attr("class").split(" ").filter(function(t){return 0===t.indexOf("reference")}).toString()},e.prototype.getItemIdentifier=function(t,e){if("MastHead MegaMenu"===e&&t.parent().is("h3"))return this.getCategoryName(t)+" - "+t.text().trim();if("MastHead MegaMenu"===e&&t.parent().is("li")&&!t.parent().hasClass("megaMenu-nav-item")){var i=t.closest(".richText-content").find("h3"),n=i.text().trim();return this.getCategoryName(i)+" - "+n+" - "+t.text().trim()}return t.text().trim()},e.prototype.getCategoryName=function(e){var i=e.closest(".megaMenu-content").attr("id");return t("[data-category-id=#"+i+"]").text().trim()},e.prototype.isBackBtn=function(t){return t.parent().hasClass("is-active")},e}();e.init=function(){i=this.external.analyticsModule.pageEvent,n=this.external.analyticsClickTypeProvider.clickTypeProvider,new a(this.external.media)},Cog.registerStatic({name:"analyticsMegaMenuModule",api:e,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"},{name:"utils.media",apiId:"media"}]})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i=null,n=null,a=function(){function t(){_classCallCheck(this,t),this.bindEvents()}return t.prototype.bindEvents=function(){Cog.addListener("analytics","mobileMegaMenu.backButtonClick",this.backButtonClick,{scope:this}),Cog.addListener("analytics","mobileMegaMenu.subcategoryClick",this.subcategoryClick,{scope:this}),Cog.addListener("analytics","mobileMegaMenu.bottomLinksClick",this.bottomLinksClick,{scope:this}),Cog.addListener("analytics","mobileMegaMenu.thirdLevelAnchorClick",this.thirdLevelAnchorClick,{scope:this}),Cog.addListener("analytics","mobileMegaMenu.parentCategoryNavigationClick",this.parentCategoryNavigationClick,{scope:this})},t.prototype.backButtonClick=function(t){var n=t.eventData,a=new i.Builder(n.actionType,e(t.currentTarget)).withClickType(n.clickType).withElementLayer(n.elementLayer1,1).withElementLayer(n.elementLayer2,2).withElementLayer(n.elementLayer3,3).withItemIdentifier(n.itemIdentifier).withSiteSection(n.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:a})},t.prototype.subcategoryClick=function(t){var n=t.eventData,a=new i.Builder(n.actionType,e(t.currentTarget)).withClickType(n.clickType).withElementLayer(n.elementLayer1,1).withElementLayer(n.elementLayer2,2).withElementLayer(n.elementLayer3,3).withInternalDestination(n.internalDestination).withItemIdentifier(n.itemIdentifier).withSiteSection(n.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:a})},t.prototype.bottomLinksClick=function(t){var a=t.eventData,r=new i.Builder(a.actionType,e(t.currentTarget)).withClickType(n.getClickType(a.href)).withElementLayer(a.elementLayer1,1).withElementLayer(a.elementLayer2,2).withElementLayer(a.elementLayer3,3).withInternalDestination(a.href).withDestination(n.isInternal(a.href)?"":n.getDestination(a.href)).withItemIdentifier(a.itemIdentifier).withSiteSection(a.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:r})},t.prototype.thirdLevelAnchorClick=function(t){var a=t.eventData,r=new i.Builder(a.actionType,e(t.currentTarget)).withClickType(n.getClickType(a.href)).withElementLayer(a.elementLayer1,1).withElementLayer(a.elementLayer2,2).withElementLayer(a.elementLayer3,3).withInternalDestination(a.internalDestination).withItemIdentifier(a.itemIdentifier).withSiteSection(a.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:r})},t.prototype.parentCategoryNavigationClick=function(t){var n=t.eventData,a=new i.Builder(n.actionType,e(t.currentTarget)).withClickType(n.clickType).withElementLayer(n.elementLayer1,1).withElementLayer(n.elementLayer2,2).withElementLayer(n.elementLayer3,3).withElementExtraInfo(n.elementExtraInfo).withInternalDestination(n.internalDestination).withItemIdentifier(n.itemIdentifier).withSiteSection(n.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:a})},t}();t.init=function(){i=this.external.analyticsModule.pageEvent,n=this.external.analyticsClickTypeProvider.clickTypeProvider,new a},Cog.registerStatic({name:"analyticsMobileMegaMenuModule",api:t,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){function e(t){return"paid"===t||"unpaid"===t}var i={productBox:".composite-productboxes"},o={A:"text",IMG:"image"},n={},r=null,a=null,c=function(){function n(){_classCallCheck(this,n),this.bindElements(),this.bindEvents()}return n.prototype.bindElements=function(){this.$productBox=t(".productBox"),this.$anchors=this.$productBox.find("a")},n.prototype.bindEvents=function(){var t=this;this.$anchors.on("click",function(e){return t.productBoxClick(e)})},n.prototype.productBoxClick=function(e){var i=t(e.currentTarget),o=t(e.target),n=this.createProductBoxAnalyticsObject(i,o);Cog.fireEvent("analytics","track",{analyticsObject:n})},n.prototype.createProductBoxAnalyticsObject=function(t,e){var i=t.attr("href"),o=t.text();return new r.Builder("click",t).withClickType(a.getClickType(i)).withItemIdentifier(o).withDestination(a.getDestination(i)).withElementExtraInfo(this.getElementExtraInfo(e)).withListLocation(this.getProductBoxLocation(t)).withExtraObject(this.getAnalyticsData(t)).build()},n.prototype.getElementExtraInfo=function(t){return this.isCta(t)?"cta":o[t.prop("tagName")]},n.prototype.isCta=function(t){var e=t.attr("class"),i=!1;return e&&(i=this.hasProductBoxButtonClass(e)),i},n.prototype.hasProductBoxButtonClass=function(t){for(var e=!1,i=t.split(" "),o=Array.isArray(i),n=0,i=o?i:i[Symbol.iterator]();;){var r;if(o){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}if(-1!==r.indexOf("product-box-button")){e=!0;break}}return e},n.prototype.getProductBoxLocation=function(e){var o=e.closest(i.productBox),n=0;return t(i.productBox).each(function(t,e){0===n&&o.is(e)&&(n=t+1)}),n},n.prototype.getAnalyticsData=function(t){var o=t.attr("href"),n=t.closest(i.productBox).find("[data-product]").data(),r="externalPaid"===a.getClickType(o)?"paid":"unpaid";return e(n.product.afflink)||(n.product.afflink=r),n},n}();n.init=function(){r=this.external.analyticsModule.pageEvent,a=this.external.analyticsClickTypeProvider.clickTypeProvider,new c},Cog.registerStatic({name:"analyticsProductBoxModule",api:n,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}!function(t){var n={},e=function(){function n(t){_classCallCheck(this,n),this.bindEvents()}return n.prototype.bindEvents=function(){t(document).ready(this.createLinkIds).bind(this)},n.prototype.createLinkIds=function(n){t(".richText-content").each(function(n,e){t(e).find("a").each(function(n,e){var i=t(e),a=i.text().trim().replace(/[.,]/g,"").replace(/\s+/g,"-").toLowerCase();i.attr("data-link-id",a+"-"+(n+1))})})},n}();n.init=function(){new e},Cog.registerStatic({name:"analyticsRichtextLinkModule",api:n})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i={analyticsModule:null},a=null,l=function(){function t(){_classCallCheck(this,t),this.bindEvents()}return t.prototype.bindEvents=function(){Cog.addListener("analytics","search.searchBoxSubmit",this.searchBoxSubmit,{scope:this}),Cog.addListener("analytics","search.searchBoxFocus",this.searchBoxFocus,{scope:this}),Cog.addListener("analytics","search.searchResultsLoaded",this.searchResultsLoaded,{scope:this}),Cog.addListener("analytics","search.searchBoxClose",this.searchBoxClosed,{scope:this}),Cog.addListener("analytics","search.searchBoxToggle",this.searchBoxToggle,{scope:this})},t.prototype.searchBoxSubmit=function(t){var i=t.eventData,l=new a.Builder(i.actionType,e(t.currentTarget)).withClickType(i.clickType).withElementLayer(i.elementLayer1,1).withElementLayer(i.elementLayer2,2).withElementLayer(i.elementLayer3,3).withSearchTerm(i.searchTerm).withSearchDropdownSelection(i.filterLabel).withItemIdentifier(i.itemIdentifier).withSiteSection(i.siteSection).build();_.isUndefined(i.callback)||(l.eventCallback=i.callback,l.eventTimeout=2e3),Cog.fireEvent("analytics","track",{analyticsObject:l,callback:i.callback})},t.prototype.searchBoxClosed=function(e){var t=e.eventData,i=new a.Builder(t.actionType).withClickType(t.clickType).withElementLayer(t.elementLayer1,1).withItemIdentifier(t.itemIdentifier).withSiteSection(t.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:i})},t.prototype.searchBoxToggle=function(e){var t=e.eventData,i=new a.Builder(t.actionType).withClickType(t.clickType).withElementLayer(t.elementLayer1,1).withElementLayer(t.elementLayer2,2).withElementLayer(t.elementLayer3,3).withItemIdentifier(t.itemIdentifier).withSiteSection(t.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:i})},t.prototype.searchBoxFocus=function(e){var t=e.eventData,i=new a.Builder(t.actionType).withSiteSection(t.siteSection).withElementLayer(t.elementLayer1,1).withElementLayer(t.elementLayer2,2).build();Cog.fireEvent("analytics","track",{analyticsObject:i})},t.prototype.searchResultsLoaded=function(e){var t=e.eventData,i={searchTerm:t.searchTerm,filterSelection:{filter1:{filterLabel:t.filters.Guides.label,filterSetting:t.filters.Guides.active},filter2:{filterLabel:t.filters.News.label,filterSetting:t.filters.News.active},filter3:{filterLabel:t.filters.Deals.label,filterSetting:t.filters.Deals.active},filter4:{filterLabel:t.filters.Blogs.label,filterSetting:t.filters.Blogs.active},filter5:{filterLabel:t.filters["Weekly Email"].label,filterSetting:t.filters["Weekly Email"].active}},totalNumberSearchResults:t.searchResultsNumber},l=new a.Builder(t.actionType).withSearchCriteria(i).build();Cog.fireEvent("analytics","track",{analyticsObject:l})},t}();t.init=function(){a=this.external.analyticsModule.pageEvent,new l},Cog.registerStatic({name:"analyticsSearchModule",api:t,externalApi:i,requires:[{name:"analyticsModule",apiId:"analyticsModule"}]})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e={siteSectionProvider:null},i=function(){function t(){_classCallCheck(this,t)}return t.prototype.getSiteSectionOf=function(t){var e="";return 0!==t.closest("[data-site-section]").length?e=t.closest("[data-site-section]").data("site-section"):0!==t.closest(".left-sidebar-section").length?e="LHS":0!==t.closest(".sidebar-section-container,.sidebar-section,.right-sidebar-section").length?e=0!==t.closest(".email-tip-box-wrapper, .guide-side-column-dropdown, .sidebar-sticky").length?"In Page Navigation":"RHS":0!==t.closest("#header").length?e="masthead":0!==t.closest("#content").length?e="mainSection":0!==t.closest(".tip-email-popup").length?e="bottomAlert":0!==t.closest(".cookiePolicy").length?e="topAlert":0!==t.closest("#footer").length&&(e="footer"),e},t}();t.init=function(){e.siteSectionProvider=new i},Cog.registerStatic({name:"analyticsSiteSectionProvider",api:t,sharedApi:e})}(Cog.jQuery());
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e=null,i=null,a=function(){function t(){_classCallCheck(this,t),this.bindElements(),this.bindEvents()}return t.prototype.bindElements=function(){this.$dealsFullList=$(".deals-full-list"),this.$shareThisItem=this.$dealsFullList.find(".shareThis-item")},t.prototype.bindEvents=function(){var t=this;this.$shareThisItem.on("click",function(e){return t.handleClick(e)})},t.prototype.handleClick=function(t){var e=$(t.target),i=$(t.currentTarget).find("a"),a=this.createSocialShareDealExtraObject(e);this.trackSocialShareDealClick(e,i.attr("href"),"cta",a)},t.prototype.trackSocialShareDealClick=function(t,a,n,r){var l=new e.Builder("click",t).withClickType(i.getClickType(a)).withDestination(i.getDestination(a)).withItemIdentifier(this.getItemIdentifier(t,a)).withElementExtraInfo(n).withElementLayer("social_share",2).withListLocation(this.getListLocation(t,".deals-full-list-article")).withExtraObject(r).build();Cog.fireEvent("analytics","track",{analyticsObject:l})},t.prototype.getItemIdentifier=function(t,e){return t.text().trim()||(0===e.indexOf("#")?e.substring(1):"")},t.prototype.getListLocation=function(t,e){var i=t.closest(e);return i.parent().find(e).index(i)+1},t.prototype.createSocialShareDealExtraObject=function(t){var e=t.closest(".deals-full-list-article");if(0!==e.length){var i=e.attr("id"),a=e.find(".deal-heading h3").text(),n=e.attr("data-expiry-date");return{deal:{id:i,headline:a,brand:e.attr("data-brand-name").replace(" ","-"),expiry:n}}}},t}();t.init=function(){e=this.external.analyticsModule.pageEvent,i=this.external.analyticsClickTypeProvider.clickTypeProvider,new a},Cog.registerStatic({name:"analyticsSocialShare",api:t,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e={},t=null,i=function(){function e(){_classCallCheck(this,e),this.bindEvents()}return e.prototype.bindEvents=function(){Cog.addListener("analytics","tipbox.focusEmailAddress",this.focusEmailInput,{scope:this}),Cog.addListener("analytics","tipbox.submitEmailAddress",this.submitEmailAddress,{scope:this}),Cog.addListener("analytics","tipbox.displaySuccessMessage",this.displaySuccessMessage,{scope:this}),Cog.addListener("analytics","tipbox.displayErrorMessage",this.displayErrorMessage,{scope:this}),Cog.addListener("analytics","tipbox.showTipBoxPopUp",this.showTipBoxPopUp,{scope:this}),Cog.addListener("analytics","tipbox.closeTipBoxPopUp",this.closeTipBoxPopUp,{scope:this})},e.prototype.focusEmailInput=function(e){var i=new t.Builder("textboxEntry",e.eventData.$target).build();Cog.fireEvent("analytics","track",{analyticsObject:i})},e.prototype.submitEmailAddress=function(e){var i=e.eventData.$target,a=i.find("input[type=submit]").val(),n=void 0;n=i.parents(".email-tip-box-wrapper, .main-content-section-paragraph, .tip-box-main").length?new t.Builder("click",i).withClickType("pageAction").withElementLayer("Tip",1).withItemIdentifier("Sign Up Button").build():new t.Builder("click",i).withClickType("pageAction").withItemIdentifier(a).build(),Cog.fireEvent("analytics","track",{analyticsObject:n})},e.prototype.displaySuccessMessage=function(e){var i=e.eventData.$target,a=void 0;a=i.parents(".email-tip-box-wrapper, .main-content-section-paragraph, .tip-box-main").length?new t.Builder("feedbackEvent",i).withElementLayer("Tip",1).withItemIdentifier("Sign Up Success").build():e.eventData.isHomeTipBox?new t.Builder("feedbackEvent",i).withItemIdentifier("success").build():new t.Builder("feedbackEvent",i).withSiteSection("topAlert").withElementLayer("tipSignupSuccessAlertBanner",1).withItemIdentifier("success").build(),Cog.fireEvent("analytics","track",{analyticsObject:a})},e.prototype.displayErrorMessage=function(e){var i=e.eventData.$target,a=void 0;a=i.parents(".email-tip-box-wrapper, .main-content-section-paragraph, .tip-box-main").length?new t.Builder("feedbackEvent",i).withElementLayer("Tip",1).withItemIdentifier("Sign Up failure").withElementExtraInfo(e.eventData.elementExtraInfo).build():new t.Builder("feedbackEvent",i).withItemIdentifier("failure").withElementExtraInfo(e.eventData.elementExtraInfo).build(),Cog.fireEvent("analytics","track",{analyticsObject:a})},e.prototype.showTipBoxPopUp=function(e){var i=new t.Builder("popup",e.eventData.$target).build();Cog.fireEvent("analytics","track",{analyticsObject:i})},e.prototype.closeTipBoxPopUp=function(e){var i=new t.Builder("click",e.eventData.$target).withClickType("pageAction").withElementExtraInfo("close").build();Cog.fireEvent("analytics","track",{analyticsObject:i})},e}();e.init=function(){t=this.external.analyticsModule.pageEvent,new i},Cog.registerStatic({name:"analyticsTipBoxModule",api:e,requires:[{name:"analyticsModule",apiId:"analyticsModule"}]})}(Cog.jQuery());
!function(t){var a={isTipPage:!1,attachTipPageAnalytics:null};a.isTipPage=1===t("body.template-tip-email").length,a.attachTipPageAnalytics=function(t,a,i){var e=i.data("tip");if(e){var n=2;e.split("~").forEach(function(a){t=t.withElementLayer(a,n),n++})}return 0===i.attr("href").indexOf("#")&&t.withInternalDestination(i.attr("href")),t},Cog.registerStatic({name:"analyticsTipPageModule",api:{},sharedApi:a})}(Cog.jQuery(),_);
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={},i=null,n=null,a=function(){function t(){_classCallCheck(this,t),this.bindElements(),this.bindEvents()}return t.prototype.bindElements=function(){this.$topNavLinks=e(".top-nav-v2 a, .top-nav-v2-mobile-view-top-row a")},t.prototype.bindEvents=function(){var e=this;this.$topNavLinks.on("click",function(t){t.target.classList.contains("top-nav-v2__search")||e.handleTopNavLinksClick(t)}),Cog.addListener("analytics","mobileTopnav.logoClick",this.mobileLogoClickHandler,{scope:this}),Cog.addListener("analytics","mobileTopnav.hamburgerMenuClick",this.mobileHamburgerMenuClickHandler,{scope:this}),Cog.addListener("analytics","mobileTopnav.moreButtonClick",this.handleTopNavLinksClick,{scope:this})},t.prototype.handleTopNavLinksClick=function(t){var i=e(t.currentTarget||t.eventData.currentTarget),n=e(t.target||t.eventData.target),a=this.createTopNavAnalyticsObject(i,n);Cog.fireEvent("analytics","track",{analyticsObject:a})},t.prototype.createTopNavAnalyticsObject=function(e,t){var a=e.attr("href"),r=this.getItemIdentifier(t,e,"MastHead TopNav");return new i.Builder("click",e).withClickType(n.getClickType(a)).withItemIdentifier(r).withInternalDestination(n.getInternalDestination(a)).withDestination(n.getDestination(a)).withSiteSection("MastHead TopNav").build()},t.prototype.isImage=function(e){return"IMG"===e.prop("tagName")},t.prototype.getItemIdentifier=function(e,t){return this.isImage(e)?e.attr("alt"):t.text().trim()},t.prototype.mobileLogoClickHandler=function(t){var n=t.eventData,a=new i.Builder(n.actionType,e(t.currentTarget)).withClickType(n.clickType).withElementLayer(n.elementLayer1,1).withElementLayer(n.elementLayer2,2).withElementLayer(n.elementLayer3,3).withItemIdentifier(n.itemIdentifier).withInternalDestination(n.internalDestination).withSiteSection(n.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:a})},t.prototype.mobileHamburgerMenuClickHandler=function(t){var n=t.eventData,a=new i.Builder(n.actionType,e(t.currentTarget)).withClickType(n.clickType).withElementLayer(n.elementLayer1,1).withElementLayer(n.elementLayer2,2).withElementLayer(n.elementLayer3,3).withItemIdentifier(n.itemIdentifier).withSiteSection(n.siteSection).build();Cog.fireEvent("analytics","track",{analyticsObject:a})},t}();t.init=function(){i=this.external.analyticsModule.pageEvent,n=this.external.analyticsClickTypeProvider.clickTypeProvider,new a},Cog.registerStatic({name:"analyticsTopNavModule",api:t,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}!function(){var t={},i={analyticsModule:null},e=null,n=null,l=function(){function t(){_classCallCheck(this,t),this.bindElements(),this.bindEvents()}return t.prototype.bindElements=function(){this.$leftButton=$(".video-showcase-scroll-left-button"),this.$rightButton=$(".video-showcase-scroll-right-button"),this.$links=$(".video-label-link, .video-image-link")},t.prototype.bindEvents=function(){this.$leftButton.on("click",this.leftButtonClick.bind(this)),this.$rightButton.on("click",this.rightButtonClick.bind(this)),this.$links.on("click",this.linkClick.bind(this))},t.prototype.leftButtonClick=function(t){var i=$(t.target),n=new e.Builder("click",i).withClickType("pageAction").withSiteSection("mainSection").build();Cog.fireEvent("analytics","track",{analyticsObject:n})},t.prototype.rightButtonClick=function(t){var i=$(t.target),n=new e.Builder("click",i).withClickType("pageAction").withSiteSection("mainSection").build();Cog.fireEvent("analytics","track",{analyticsObject:n})},t.prototype.linkClick=function(t){t.stopImmediatePropagation();var i=$(t.target),l=i.attr("href")?i.attr("href"):i.closest("a").attr("href"),a=i.closest(".video-image, .video-label").data("position"),o="IMG"===i.prop("tagName")?"image":"text",c=i.text(),s=new e.Builder("click",i).withClickType(n.getClickType(l)).withSiteSection("mainSection").withListLocation(a).withElementExtraInfo(o).withItemIdentifier(c).build();Cog.fireEvent("analytics","track",{analyticsObject:s})},t}();t.init=function(){e=this.external.analyticsModule.pageEvent,n=this.external.analyticsClickTypeProvider.clickTypeProvider,new l},Cog.registerStatic({name:"analyticsVideoShowcaseModule",api:t,externalApi:i,requires:[{name:"analyticsModule",apiId:"analyticsModule"},{name:"analyticsClickTypeProvider",apiId:"analyticsClickTypeProvider"}]})}(Cog.jQuery());
function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}!function(){var t={},n={skipToContentSnippet:".skip-to-content",skipToContentFocus:"skip-to-content--focus",skipToContentText:".top-nav-v2-skip-to-content",contentContainer:".container-fluid",classStateSkipVisible:"skip-to-content--visible",classStateSkipPresent:"skip-to-content--present",footer:"#footer"},o=function(){function t(n,o){_classCallCheck(this,t),this.$scope=n,this.status=o,this.bindUIElements(),this.ifSkipToContent()&&(this.watchWindowResize(),this.watchFocus())}return t.prototype.bindUIElements=function(){this.$skipToContentSnippet=this.$scope,this.$skipToContentText=this.$skipToContentSnippet.find(n.skipToContentText),this.$skipToContentLink=this.$skipToContentText.find("a"),this.$contentContainer=$(n.contentContainer),this.$footer=$(n.footer)},t.prototype.ifSkipToContent=function(){return this.$skipToContentSnippet},t.prototype.prepareContent=function(t){this.$contentContainer.addClass(n.classStateSkipPresent).css("top",t),this.$skipToContentSnippet.css("display","block"),this.$footer.css("margin-bottom",t)},t.prototype.watchWindowResize=function(){var t=this;$(window).resize(function(){var n=t.$scope.innerHeight();t.$skipToContentLink.is(":focus")||t.$contentContainer.position().top===n?t.$skipToContentLink.is(":focus")&&"0"!==t.$contentContainer.position().top&&t.$contentContainer.css("top","0px"):t.$contentContainer.css("top","-"+n+"px")})},t.prototype.watchFocus=function(){var t=this;this.prepareContent("-"+this.$scope.innerHeight()+"px"),this.$skipToContentLink.on("focus",function(){t.$skipToContentSnippet.addClass(n.skipToContentFocus),t.$contentContainer.addClass(n.classStateSkipVisible),t.$contentContainer.css("top","0px")}),this.$skipToContentLink.on("focusout",function(){t.$skipToContentSnippet.removeClass(n.skipToContentFocus),t.$contentContainer.removeClass(n.classStateSkipVisible),t.$contentContainer.css("top","-"+t.$scope.innerHeight()+"px")})},t}();t.onRegister=function(t){new o(t.$scope,this.external.status)},Cog.registerComponent({name:"skipToContent",api:t,selector:".skip-to-content",requires:[{name:"utils.status",apiId:"status"}]})}();
!function(){var n={};n.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},n.getAnchor=function(){return new URLSearchParams(window.location.search).get("anchor")},n.onRegister=function(){n.isSafari()&&n.getAnchor()&&(window.location.hash=n.getAnchor())},Cog.registerComponent({name:"tipEmail",api:n,selector:".tipEmail"})}();
function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var i={},e={componentSelector:".guidePageNavigation",navigationMobileWrapper:"guide-navigation-mobile-wrapper",navigationDesktop:"guidePageNavigation",navigationMobile:"guidePageNavigationMobile",navigationContentWrapper:"guide-navigation-content-wrapper",navigationWrapper:"> ul",navigationListWrapper:"guide-navigation-list-wrapper",navigationFirstLevelItems:"guide-navigation-first-level",firstLevelNavigationLinkWrapper:"guide-navigation-first-level-link-wrapper",topLevelNavigationLink:".guide-navigation-first-level-link-wrapper a",secondLevelNavigationLink:".guide-navigation-first-level > ul > li > a",toggleSecondLevelButton:"guide-page-navigation-icon",linksWithLevel2:"chapter-has-children",navigationLink:"> ul > li > a",expandedLevel2Class:"expanded",staticLine:"guide-page-navigation-line",reachedLine:"guide-page-navigation-reached-line",reachedChapters:"guide-page-link-reached",navigationTitle:"guide-navigation-title",navigationAccordionPanel:"guide-page-navigation-accordion-panel",navigationMobilePanel:"guide-page-navigation-mobile-panel",navigationMobileFixedClass:"navigation-fixed",navigationCurrentChapterClass:"guide-current-chapter",navigationMobileLinksWrapper:"guide-page-navigation-mobile-links-wrapper",backToTopButton:"sticky-back-to-top",navigationMobileCollapsedOnSticky:"sticky-collapsed",expandedClass:"expanded",navClosedByUser:"closed-by-user"},a=function(){function i(e,a){_classCallCheck(this,i),this.$scope=e,this.status=a,this.bindElements(),this.status.isAuthor()||(this.prepareMobileNavigation(),this.bindEvents(),this.adjustNavigationLineLength(),this.bindAnalyticsEvents())}return i.prototype.bindElements=function(){this.$window=$(window),this.$htmlBody=$("body,html"),this.$document=$(document),this.$navigationContentWrapper=this.$scope.find("."+e.navigationContentWrapper),this.$navigationListWrapper=this.$scope.find("."+e.navigationListWrapper),this.$mainLinksList=this.$navigationListWrapper.find(e.navigationWrapper),this.$allNavigationLinks=this.$scope.find("a"),this.$accordionPanel=this.$scope.find("."+e.navigationAccordionPanel),this.$firstLevelListItems=this.$scope.find("."+e.navigationFirstLevelItems),this.$firstLevelNaviagationLinks=this.$scope.find(e.topLevelNavigationLink),this.$linksWithLevel2=this.$scope.find("."+e.linksWithLevel2),this.$guideContent=this.$document.find(".main-column-content-section-container"),this.$guideHeadline=this.$guideContent.find(".headline"),this.$mobileNavigationWrapper=this.$guideContent.find("."+e.navigationMobileWrapper),this.$staticLine=this.$scope.find("."+e.staticLine),this.$reachedLine=this.$scope.find("."+e.reachedLine)},i.prototype.bindMobileElements=function(){this.$mobileNavigationBG=this.$mobileNavigationWrapper.find(".content"),this.$mobileNavigation=this.$mobileNavigationWrapper.find("."+e.navigationMobile),this.$mobileNavContentWrapper=this.$mobileNavigation.find("."+e.navigationContentWrapper),this.$mobileNavigationListWrapper=this.$mobileNavigation.find("."+e.navigationListWrapper),this.$mobileProgressLine=this.$mobileNavigationWrapper.find("."+e.reachedLine),this.$navigationMobileTitle=this.$mobileNavigationWrapper.find("."+e.navigationTitle),this.$mobileBackToTopButton=this.$mobileNavigationWrapper.find("."+e.backToTopButton),this.$accordionPanelMobile=this.$mobileNavigation.find("."+e.navigationAccordionPanel),this.$staticLineMobile=this.$mobileNavigationWrapper.find("."+e.staticLine),this.$reachedLineMobile=this.$mobileNavigationWrapper.find("."+e.reachedLine)},i.prototype.bindEvents=function(){this.handleTogglingLevel2(),this.watchWindowResize(),this.markReachedLinks(),this.watchScroll(),this.handleLinkClick(),this.handleAccordionPanelClick()},i.prototype.bindMobileEvents=function(){var i=this;this.$mobileNavigationWrapper.on("click",function(e){$(e.target).hasClass("paragraphSystem content")&&i.closeMobileNavigation(!0)}),this.$mobileBackToTopButton.on("click",function(){i.$mobileNavigation.hasClass(e.navClosedByUser)?i.closeMobileNavigation():i.openMobileNavigation()})},i.prototype.bindAnalyticsEvents=function(){var i=this;this.$firstLevelListItems.each(function(a,t){var n=a+1,o=$(t);o.hasClass(e.linksWithLevel2)&&(i.bindToggleButton(o,n),i.bindSubNavLinks(o.find(e.navigationLink),n)),o.find(e.topLevelNavigationLink).on("click",function(i){Cog.fireEvent("analytics","guidePageNavigation.topLevelNavigationClick",{$target:$(i.currentTarget),index:""+n})})})},i.prototype.bindSubNavLinks=function(i,e){i.each(function(i,a){$(a).on("click",function(a){Cog.fireEvent("analytics","guidePageNavigation.secondLevelNavigationClick",{$target:$(a.currentTarget),index:e+"."+(i+1)})})})},i.prototype.bindToggleButton=function(i,a){var t=i.find("."+e.toggleSecondLevelButton);$(t).on("click",function(){var t=i.hasClass(e.expandedLevel2Class);Cog.fireEvent("analytics","guidePageNavigation.toggleSecondLevelClick",{$target:i.find(e.topLevelNavigationLink),index:""+a,expanded:t})})},i.prototype.handleTogglingLevel2=function(){var i=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$linksWithLevel2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$scope;a.on("click",function(a){if("BUTTON"===a.target.nodeName){var n=t.hasClass(e.navigationMobile),o=$(a.target).parent().parent(),s=n?i.$staticLineMobile:i.$staticLine,l=n?i.$reachedLineMobile:i.$reachedLine;o.is(":last-child")?s.css("height",s.height()):s.css("height",""),o.next().hasClass(e.reachedChapters)&&!o.is(":last-child")||l.css("height",l.height()),o.toggleClass(e.expandedLevel2Class),o.find("ul").stop(!0,!0).slideToggle(300,function(){i.changeLineLength(!1,t),i.adjustNavigationLineLength(t),s.css("height",""),l.css("height","")})}})},i.prototype.handleLinkClick=function(){var i=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$allNavigationLinks).on("click",function(e){e.preventDefault();var a=$(e.target),t="none"!==i.$mobileNavigationWrapper.css("display"),n=a.attr("href");t&&i.closeMobileNavigation(),n?(i.animateScroll(n,t),a.blur()):a.parent().attr("href")&&(n=a.parent().attr("href"),i.animateScroll(n,t),a.parent().blur())})},i.prototype.animateScroll=function(i,e){var a=this,t=$(i).offset().top-20,n=$(".main-column-content-section-container").offset().top;this.$window.scrollTop()<n?(t-=.03*n*parseInt($("body").css("font-size"),10)-10,e&&(t-=this.$navigationMobileTitle.height()+150)):e&&(t-=this.$navigationMobileTitle.height()+30),this.$htmlBody.animate({scrollTop:t},1e3).promise().then(function(){a.markReachedLinks()})},i.prototype.watchWindowResize=function(){var i=this;this.$window.resize(function(){i.changeLineLength(!1),i.changeLineLength(!1,i.$mobileProgressLine),i.adjustNavigationLineLength(),i.adjustNavigationLineLength(i.$mobileNavigation),i.adjustMobileNavPosition()})},i.prototype.watchScroll=function(){var i=this,a=this.$mobileNavigation.find(e.topLevelNavigationLink);this.$window.scroll(function(){i.markReachedLinks(),i.markReachedLinks(a,!0);var t=i.$mobileNavigationWrapper.offset().top+i.$mobileNavigationWrapper.height(),n=i.$mobileNavigation.find("."+e.linksWithLevel2);i.$window.scrollTop()<=t&&(n.each(function(i,a){var t=$(a);t.hasClass(e.expandedLevel2Class)||(t.addClass(e.expandedLevel2Class),t.find("ul").slideDown(0))}),i.$mobileNavigationWrapper.removeClass(e.navigationMobileFixedClass),i.$mobileNavigation.removeClass(e.navigationMobileCollapsedOnSticky),i.followChaptersOnMobile(),i.adjustNavigationLineLength(i.$mobileNavigation),i.$mobileNavigationBG.css("height",""),i.$mobileNavigationWrapper.css("height",""),i.adjustNavigationLineLength(i.$mobileNavigation),i.$mobileNavigation.hasClass(e.expandedClass)?i.$mobileNavigation.hasClass(e.expandedClass)&&i.$mobileNavigation.hasClass(e.navClosedByUser)&&(i.openMobileNavigation(),i.$mobileNavigation.removeClass(e.navClosedByUser)):i.$mobileNavigation.hasClass(e.navClosedByUser)?i.closeMobileNavigation():i.openMobileNavigation(),i.$mobileProgressLine.css("bottom","")),i.$window.scrollTop()>t?(i.$mobileNavigationWrapper.height(i.$mobileNavigationWrapper.height()),i.$mobileNavigationWrapper.addClass(e.navigationMobileFixedClass),i.$mobileNavigation.hasClass(e.expandedClass)&&!i.$mobileNavigation.hasClass(e.navigationMobileCollapsedOnSticky)&&(i.closeMobileNavigation(),i.$mobileNavigation.addClass(e.navigationMobileCollapsedOnSticky),i.$mobileNavigation.find("."+e.linksWithLevel2).each(function(i,a){var t=$(a);t.hasClass(e.expandedLevel2Class)&&(t.removeClass(e.expandedLevel2Class),t.find("ul").slideUp())})),i.$mobileNavigation.hasClass(e.expandedClass)&&i.changeLineLength(!0,i.$mobileNavigation)):i.$mobileNavigation.removeClass(e.navigationMobileCollapsedOnSticky)})},i.prototype.markReachedLinks=function(){var i=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$firstLevelNaviagationLinks,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=.2*this.$window.height();a.each(function(a,t){var o=$(t),s=o.attr("href"),l=o.parent().parent(),r=$(s).offset(),h=r?r.top-n:0;l.removeClass(e.navigationCurrentChapterClass),!l.hasClass(e.reachedChapters)&&r&&i.$window.scrollTop()>=h?l.addClass(e.reachedChapters):!l.hasClass(e.reachedChapters)||!r||i.$window.scrollTop()>=h||l.removeClass(e.reachedChapters)}),this.markCurrentChapter(),t&&(this.followChaptersOnMobile(),this.markCurrentChapter(this.$mobileNavigation))},i.prototype.markCurrentChapter=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$scope,a=this.$scope.find("."+e.reachedChapters);a.length>=1&&(a.last().addClass(e.navigationCurrentChapterClass),this.adjustNavigationLineLength(i),this.changeLineLength(!0,i))},i.prototype.changeLineLength=function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$scope,t=a.hasClass(e.navigationMobile)?this.$reachedLineMobile:this.$reachedLine,n="."+e.navigationListWrapper+" > ul > ."+e.reachedChapters,o=a.find(n),s=a.find("."+e.navigationFirstLevelItems),l=0,r=!1;if(a.hasClass("expanded")||(r=!0),!r){if(i?t.addClass("line-animation"):t.removeClass("line-animation"),s.each(function(i,e){l+=$(e).height()}),o.length>=1){var h=o.last().last().prevAll();h.each(function(i,e){l-=$(e).height()}),h.length>=1&&(l-=15)}t.css("bottom",l)}},i.prototype.adjustNavigationLineLength=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$scope,a=i.hasClass(e.navigationMobile)?this.$staticLineMobile:this.$staticLine,t="."+e.navigationListWrapper+" > ul > li:last-of-type",n=i.find(t).height();a.css("bottom",n-20)},i.prototype.handleAccordionPanelClick=function(){var i=this;this.$accordionPanel.on("click",function(e){i.toggleNavigationAccordion(e)}),this.$accordionPanelMobile.on("click",function(e){i.toggleNavigationAccordion(e)})},i.prototype.toggleNavigationAccordion=function(){var i=this,a=(arguments.length>0&&void 0!==arguments[0]&&arguments[0]).currentTarget.parentNode.className.indexOf(e.navigationMobile)>=0,t=a?this.$mobileNavigation:this.$scope,n=a?this.$mobileNavContentWrapper:this.$navigationContentWrapper,o=a?this.$reachedLineMobile:this.$reachedLine,s=t.hasClass(e.expandedClass);!this.$mobileNavigationWrapper.hasClass(e.navigationMobileFixedClass)&&a&&(this.$mobileNavigation.hasClass(e.navClosedByUser)?this.$mobileNavigation.removeClass(e.navClosedByUser):this.$mobileNavigation.addClass(e.navClosedByUser)),s?(o.css("height",o.height()),a&&this.$mobileNavigationBG.css("height",""),t.removeClass(e.expandedClass)):(t.addClass(e.expandedClass),this.$mobileNavigationWrapper.hasClass(e.navigationMobileFixedClass)&&this.$mobileNavigationBG.css("height","100vh")),n.slideToggle(300,function(){i.adjustNavigationLineLength(t),s?(o.css("height",""),o.css("bottom","100%"),i.$mobileNavigationWrapper.hasClass(e.navigationMobileFixedClass)&&i.$mobileNavigationBG.css("height","")):(i.changeLineLength(!0,t),i.adjustNavigationLineLength(i.$mobileNavigation))})},i.prototype.prepareMobileNavigation=function(){var i=this;this.$mobileNavigationWrapper.find(".content").append(this.$scope.clone());var a=this.$guideContent.find(e.componentSelector),t=a.find("."+e.linksWithLevel2),n=a.find("a:not(."+e.navigationAccordionPanel+")"),o=a.find(e.topLevelNavigationLink);a.removeClass("guidePageNavigation").addClass(e.navigationMobile+" "+e.expandedClass),t.addClass(e.expandedClass),this.bindMobileElements(),this.bindMobileEvents(),this.adjustNavigationLineLength(this.$mobileNavigation),this.adjustMobileNavPosition(),this.handleLinkClick(n),this.markReachedLinks(o,!0),this.handleTogglingLevel2(t,a);var s=$('<div class="sticky-back-to-top-mobile-wrapper"></div>'),l=$('<button class="sticky-back-to-top">Back to top</button>');s.append(l),this.$mobileNavContentWrapper.append(s),n.on("focusin",function(e){i.handleMobileFocus(e,!0)}).on("focusout",function(e){i.handleMobileFocus(e,!1)})},i.prototype.handleMobileFocus=function(i,e){var a=$(i.target).parent();a.is("div")&&(a=a.parent()),e?a.addClass("pressed"):a.removeClass("pressed")},i.prototype.adjustMobileNavPosition=function(){var i=$("."+e.navigationMobileWrapper);window.innerWidth<768?i.css({marginLeft:-this.$guideHeadline.offset().left,width:this.$window.width()}):i.css({marginLeft:"",width:""})},i.prototype.followChaptersOnMobile=function(){var i=this.$document.find("."+e.navigationMobileWrapper),a=i.find("."+e.navigationMobile),t=a.find("."+e.navigationTitle),n=a.find("."+e.reachedChapters);if(n.length>=1&&i.hasClass(e.navigationMobileFixedClass)){var o=n.last().find("."+e.firstLevelNavigationLinkWrapper+" a");o.parent().parent().addClass(e.navigationCurrentChapterClass),t.html(o.html())}else t.html("In this guide")},i.prototype.closeMobileNavigation=function(){var i=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?300:0;this.$mobileNavigationBG.css("height",""),this.$mobileNavContentWrapper.slideUp(a,function(){i.$mobileProgressLine.css("height",""),i.$mobileProgressLine.css("bottom","100%")}),this.$mobileNavigation.removeClass(e.expandedClass)},i.prototype.openMobileNavigation=function(){var i=this;this.$mobileNavContentWrapper.slideDown(0,function(){i.$mobileProgressLine.css("height","auto"),i.$mobileProgressLine.css("bottom","100%")}),this.$mobileNavigation.addClass(e.expandedClass)},i}();i.onRegister=function(i){new a(i.$scope,this.external.status)},Cog.registerComponent({name:"guidePageNavigation",selector:e.componentSelector,api:i,requires:[{name:"utils.status",apiId:"status"}]})}();
function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}!function(){var t={},o={componentSelector:"left-hand-side-sidebar-section-container",sidebarContent:"sidebar-section",sidebarHeight:"sidebar-sticky-height",sidebarSticky:"sidebar-sticky",backToTopWrapper:"sticky-back-to-top-wrapper",backToTopWrapperBorder:"sticky-back-to-top-wrapper-border",backToTopButton:"sticky-back-to-top",backToTopButtonDisabled:"lhs-disabled-back-to-top"},s=function(){function t(o,s){_classCallCheck(this,t),this.$scope=o,this.status=s,this.isIE()||this.status.isAuthor()||(this.bindElements(),this.addStickyClass(),this.bindAnalyticsEvent(),this.onOffSticky(),this.bindWatchers())}return t.prototype.bindElements=function(){this.$window=$(window),this.$body=$("body"),this.$htmlBody=$("body,html"),this.$document=$(document),this.$guideDropdowns=this.$document.find(".guide-side-column-dropdown"),this.$sidebarContent=this.$scope.find("."+o.sidebarContent)},t.prototype.bindAnalyticsEvent=function(){this.$scope.on("click",function(t){$(t.target).hasClass(o.backToTopButton)&&Cog.fireEvent("analytics","guide.backToTopClick",{$target:$(t.target)})})},t.prototype.bindWatchers=function(){this.watchScroll(),this.addSimpleScrollbar(),this.$body.hasClass(o.backToTopButtonDisabled)||(this.watchSidebarContentHeight(),this.createBackToTop(),this.handleBackToTop())},t.prototype.addStickyClass=function(){this.$scope.addClass(o.sidebarSticky)},t.prototype.isIE=function(){var t=navigator.userAgent,o=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1;return o},t.prototype.createBackToTop=function(){var t=o.backToTopWrapper+" "+o.backToTopWrapperBorder,s=$('<div class="'+t+'"></div>'),e=$('<button class="'+o.backToTopButton+'">Back to top</button>');s.append(e),this.$scope.append(s)},t.prototype.handleBackToTop=function(){var t=this;$("."+o.backToTopButton).on("click",function(o){t.$htmlBody.animate({scrollTop:0},1e3).promise().then(function(){$(o.target).blur()})})},t.prototype.watchScroll=function(){var t=this;this.$window.on("scroll",_.throttle(function(){t.onOffSticky()},200))},t.prototype.addSimpleScrollbar=function(){window.SimpleScrollbar.initEl(this.$scope.get(0))},t.prototype.onOffSticky=function(){var t=this;this.$window.scrollTop()>=this.$scope.offset().top-24?(this.handleCollapsingDropdowns(),this.$scope.addClass(o.sidebarHeight)):this.$scope.find(".ss-content").animate({scrollTop:0},200).promise().then(function(){t.$scope.removeClass(o.sidebarHeight)})},t.prototype.handleCollapsingDropdowns=function(){this.$guideDropdowns.each(function(t,o){var s=$(o).find("div.accordion-content-wrapper"),e=s.parent();"block"!==s.css("display")||e.hasClass("sticky-collapsed")?e.hasClass("sticky-collapsed")||e.addClass("sticky-collapsed"):(s.stop().slideUp(300),e.removeClass("is-active").addClass("sticky-collapsed"))})},t.prototype.watchSidebarContentHeight=function(){var t=this;new ResizeObserver(function(){var s=$("."+o.backToTopWrapper);t.$scope.height()-s.height()>=t.$sidebarContent[0].scrollHeight?s.removeClass(o.backToTopWrapperBorder):s.addClass(o.backToTopWrapperBorder)}).observe(this.$sidebarContent[0])},t}();t.onRegister=function(t){new s(t.$scope,this.external.status)},Cog.registerComponent({name:"stickySidebar",selector:".left-hand-side-sidebar-section-container",api:t,requires:[{name:"utils.status",apiId:"status"}]})}();
function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}!function(){var t={},n={mainContentContainer:"main-column-content-section-container",bylineComponent:"byline-short"},i={mainImage:.012,mainContent:.03},o=parseInt(window.getComputedStyle(document.body).fontSize,10),e=function(){function t(n,i){_classCallCheck(this,t),this.$scope=n,this.status=i,this.windowScroll=0,this.status.isAuthor()||this.isiOS()||(this.bindElements(),this.watchWindowEvents())}return t.prototype.bindElements=function(){this.$window=$(window),this.$mainArticleImage=this.$scope,this.$mainContentContainer=$("."+n.mainContentContainer),this.$bylineComponent=$("."+n.bylineComponent)},t.prototype.calculateParallax=function(){var t=this.windowScroll*o;this.$mainArticleImage.css("margin-top","-"+Math.ceil(t*i.mainImage)+"px"),this.$mainContentContainer.css("margin-top","-"+Math.ceil(t*i.mainContent)+"px")},t.prototype.isElementInViewport=function(t){var n=t[0].getBoundingClientRect();return n.top>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)},t.prototype.isiOS=function(){return navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},t.prototype.onScroll=function(){var t=this;this.windowScroll=this.$window.scrollTop(),this.isElementInViewport(this.$bylineComponent)&&requestAnimationFrame(function(){t.calculateParallax()})},t.prototype.watchWindowEvents=function(){var t=this;this.$window.on("scroll resize touchmove",function(){t.onScroll()})},t}();t.onRegister=function(t){new e(t.$scope,this.external.status)},Cog.registerComponent({name:"articleMainImageParallax",selector:".article-main-guide-heading-image",api:t,requires:[{name:"utils.status",apiId:"status"}]})}();
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t={},e={topStoriesItem:".top-stories-item",topStoriesTitle:".item-title",topStoriesImage:".item-image",topStoriesImageLink:".item-image > a",lhsAccordion:".accordion.guide-side-column-dropdown",lhsAccordionTitle:".accordion-title-text"},i=function(){function t(e){_classCallCheck(this,t),this.$scope=e,this.init()}return t.prototype.init=function(){this.bindElements(),this.handleTracking()},t.prototype.bindElements=function(){this.$topStoriesItem=this.$scope.find(e.topStoriesItem),this.$titleLink=this.$topStoriesItem.find(e.topStoriesTitle).parent(),this.$imageLink=this.$topStoriesItem.find(e.topStoriesImageLink)},t.prototype.handleTracking=function(){var t=this;this.$titleLink.add(this.$imageLink).on("click",function(e){var i=$(e.target),o=$(e.currentTarget);Cog.fireEvent("analytics","promoBoxLeftHandSide.linkClick",{$target:i,$currentTarget:o,elementLayer1:t.getAccordionTitle(i),elementLayer2:"Links",elementLayer3:"link",elementLayer4:t.getTopStoriesItemIndex(i),itemIdentifier:i.text()||t.getTopStoriesItemTitle(i),href:o.attr("href")})})},t.prototype.getAccordionTitle=function(t){return t.closest(e.lhsAccordion).find(e.lhsAccordionTitle).text()},t.prototype.getTopStoriesItemIndex=function(t){return t.closest(e.topStoriesItem).index()+1},t.prototype.getTopStoriesItemTitle=function(t){return t.closest(e.topStoriesItem).find(e.topStoriesTitle).text()},t}();t.onRegister=function(t){new i(t.$scope)},Cog.registerComponent({name:"TopStories",api:t,selector:".topStories"})}();
function _classCallCheck(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var s={},t={component:"singleButtonShareThis",shareThisButton:"share-this-btn",shareThisButtonOpen:"share-this-btn-open",shareThisList:"shareThis-list",shareThisListItem:"shareThis-item > a",slideIn:"slide-in",bylineDataVisible:"hidden",hideSibling:"singleButtonShareThis-hide-sibling",hidePreviousComponent:"singleButtonShareThis-hide-previous",hiddenClass:"singleButtonShareThis-sibling-hidden",openToTheLeft:"singleButtonShareThis-left",openToTheRight:"singleButtonShareThis-right",byline:{component:"byline",elementToHide:"by-line__datacontainer"},dealsList:{component:"dealsFullList",expired:"expired",manuallyExpired:"manually-expired"}},e=function(){function s(t,e){_classCallCheck(this,s),this.$scope=t,this.status=e,this.status.isAuthor()||(this.bindElements(),this.bindEvents(),this.watchWindowResize())}return s.prototype.bindElements=function(){this.$window=$(window),this.$siblingToHide=this.$scope.next(),this.$shareThisButton=this.$scope.find("."+t.shareThisButton),this.$shareThisList=this.$scope.find("."+t.shareThisList),this.$shareThisListItem=this.$shareThisList.find("."+t.shareThisListItem),this.$scope.parents().hasClass(t.byline.component)&&(this.$byline=this.$scope.closest("."+t.byline.component),this.$siblingToHide=this.$byline.find("."+t.byline.elementToHide))},s.prototype.bindEvents=function(){var s=this;this.ifActivateButton()&&(this.$shareThisButton.on("click",function(e){var i=e.currentTarget;e.preventDefault(),Cog.fireEvent("analytics","singleButtonShareThis.shareThisButton",{$target:$(i),elementLayer1:"Sharing",itemIdentifier:$(i).hasClass(""+t.shareThisButtonOpen)?"Close":"Expand Options"}),s.toggleCloseButtonText(),s.toggleSlideInClass()}),this.$shareThisListItem.on("click",function(s){Cog.fireEvent("analytics","singleButtonShareThis.shareThisItem",{$target:$(s.currentTarget),elementLayer1:"Sharing"})}))},s.prototype.ifActivateButton=function(){var s=this.$scope.closest("."+t.dealsList.component);if(s.length){var e=s.find("."+t.dealsList.expired).length,i=this.$scope.closest("."+t.dealsList.manuallyExpired).length;return!(e||i)}return!0},s.prototype.setShareThisListPosition=function(s){var e=s?0:this.calculateShareThisButtonWidth();this.$scope.find("."+t.openToTheLeft).length&&(e=-e),this.$shareThisList[0].style.transform="translate3d("+e+"px, 0, 0)",this.$shareThisButton.blur()},s.prototype.calculateShareThisButtonWidth=function(){return Math.round(this.$shareThisButton[0].getBoundingClientRect().width)},s.prototype.toggleCloseButtonText=function(){var s=this.$scope.hasClass(t.hideSibling),e=this.$scope.hasClass(t.hidePreviousComponent);this.$shareThisButton.hasClass(t.shareThisButtonOpen)?(this.$shareThisButton.removeClass(t.shareThisButtonOpen),this.setShareThisListPosition(!0),s&&this.$siblingToHide.removeClass(t.hiddenClass),e&&this.$scope.prev().removeClass(t.hiddenClass)):(s&&this.$siblingToHide.addClass(t.hiddenClass),e&&this.$scope.prev().addClass(t.hiddenClass),this.$shareThisButton.addClass(t.shareThisButtonOpen),this.setShareThisListPosition(!1))},s.prototype.toggleSlideInClass=function(){this.$shareThisList.toggleClass(t.slideIn)},s.prototype.watchWindowResize=function(){var s=this;this.$window.on("resize",_.throttle(function(){s.setShareThisListPosition(!1)},200))},s}();s.onRegister=function(s){new e(s.$scope,this.external.status)},Cog.registerComponent({name:"singleButtonShareThis",selector:".singleButtonShareThis",api:s,requires:[{name:"utils.status",apiId:"status"}]})}();
