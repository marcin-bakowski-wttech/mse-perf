!function(){"use strict";var e,r;r={},(e=function(e){e=e.toLowerCase();var r=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:r[1]||"",version:r[2]||"0"}}(navigator.userAgent)).browser&&(r[e.browser]=!0,r.version=e.version),r.chrome?r.webkit=!0:r.webkit&&(r.safari=!0),Cog.registerStatic({name:"utils.browser",sharedApi:r,api:{}})}();
Cog.utils=Cog.utils||{},function(){"use strict";Cog.registerStatic({name:"utils.namespace",sharedApi:function(t){for(var i=t.split("."),e=window,n="",s=0,r=i.length;s<r;s++)e[n=i[s]]=e[n]||{},e=e[n];return e},api:{}})}();
!function(e){"use strict";function o(o,t){this.obj=o,this.url=t,this.properties={href:e(o).attr("href"),width:e(o).data("overlaywidth")}}function t(){return"mobile"===Cog.Cookie.read("device-group")}var i,n,r,a,l,s,c,d={},v=!1,h=!1;o.prototype.attachEvents=function(){var o=this,t=o.properties.href;t&&(h||(t.indexOf(".html")>-1?t=this.url.setSelector(t,"lightbox"):"/"===t.substring(t.length-1)?t=t.substring(0,t.lastIndexOf("/"))+".lightbox/":t+=".lightbox/"),e(o.obj).on("click",function(i){i.preventDefault(),i.stopPropagation(),h||(o.initOverlayContainer(),o.showLoadingContainer()),o.visible=!0,e.ajax({type:"GET",url:t,dataType:"html",success:function(e){o.overlayBuilder(e),Cog.init({$element:r})}})}),e(document).on("click touchstart",".overlay-content",function(e){e.stopPropagation()}).on("click touchstart",".overlay-background, .overlay-container, .overlay-close",function(){o.visible&&o.hideOverlay()}).on("keydown",function(e){27===e.keyCode&&o.hideOverlay()}))},o.prototype.initOverlayContainer=function(){var o=e("body");i?r.empty():(o.append("<div class='overlay-background'></div>","<div class='overlay-container'><div class='overlay-content'><div tabindex='0' class='overlay-close'></div><div class='overlay-loading'></div><div class='overlay-content-inner'></div></div></div>"),a=e(".overlay-background"),i=e(".overlay-container"),n=e(".overlay-content"),r=e(".overlay-content-inner"),l=e(".overlay-loading"),s=e(".overlay-close"))},o.prototype.showLoadingContainer=function(){s.hide(),a.show(),i.css({top:"50px"}),i.show(),l.show()},o.prototype.overlayBuilder=function(e){var o=this;h?window.open(o.properties.href,"_blank"):o.showOverlay(e)},o.prototype.showOverlay=function(o){var t=this.properties.width;l.hide(),s.show(),c=e(window).scrollTop(),e("body").addClass("overlayVisible"),n.removeClass("lightbox--full-content-size lightbox--default-size"),n.css("max-width","none"),t?n.addClass("lightbox--default-size"):n.addClass("lightbox--full-content-size"),r.append(o),r.find(".video").length?n.css({width:t}):n.css({"max-width":t}),e(".container-fluid").on("scroll",function(e){return e.preventDefault(),e.stopPropagation(),!1})},o.prototype.hideOverlay=function(){i.fadeOut(),a.fadeOut(),this.visible&&(this.visible=!1,Cog.fireEvent("overlay","close"),e("body").removeClass("overlayVisible")),e(".container-fluid").off("scroll"),e(window).scrollTop(c)},d.onRegister=function(e){var i=this;v||(h=t(),v=!0),e.$scope.each(function(){new o(this,i.external.url).attachEvents()})},Cog.registerComponent({name:"overlay",api:d,selector:"a.lightbox:not(.eligibility-overlay-trigger)",requires:[{name:"utils.url",apiId:"url"}]})}(Cog.jQuery());
!function(t){"use strict";function e(e){var i=t(e.target);return e.preventDefault(),"A"!==i.prop("tagName").toUpperCase()&&(i=i.closest(".external")),o=i.attr("href"),a=i.attr("target"),c.scope.removeClass(r),!1}function i(){"_blank"===a?(window.open(o,"_blank"),c.scope.addClass(r)):window.location.href=o}function n(){c.scope.addClass(r)}var o,a,c={},r="is-hidden";c.init=function(o){c.scope=o,c.scope.find(".exit-notification-accept").click(i),c.scope.find(".exit-notification-deny").click(n),t("body").on("click","a.external",e)},Cog.register({name:"exitNotification",api:c,selector:"#exit-notification"})}(Cog.jQuery());
!function(n){"use strict";var e={},i={};i.isMobile=function(){return!!window.matchMedia("screen and (max-width: 767px)").matches},i.isMobileOrTablet=function(){return!window.matchMedia("screen and (min-width: 992px)").matches},i.isTablet=function(){return!!window.matchMedia("screen and (min-width: 768px) and (max-width: 1023px)").matches},i.isTabletOrDesktopSmall=function(){return!!window.matchMedia("screen and (min-width: 768px) and (max-width: 1200px)").matches},i.isTabletOrDesktop=function(){return!!window.matchMedia("screen and (min-width: 768px)").matches},i.isTabletHorizontalOrDesktop=function(){return!!window.matchMedia("screen and (min-width: 992px)").matches},i.isDesktop=function(){return!!window.matchMedia("screen and (min-width: 1024px)").matches},i.isDesktopLarge=function(){return!!window.matchMedia("screen and (min-width: 1201px)").matches},Cog.registerStatic({name:"utils.media",api:e,sharedApi:i})}(Cog.jQuery());
!function(t){"use strict";var e={},i={};e.init=function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/\{\%(.+?)\%\}/g},t.extend(i,t("body").data())},Cog.registerStatic({name:"utils.settings",api:e,sharedApi:i})}(Cog.jQuery());
!function(i){"use strict";var t={};t.init=function(){i(document).on("click","a[href*=#]:not([href^=#])",function(t){var n=this.hash,o=i(i("[id="+n.substring(1)+"]").size()?"[id="+n.substring(1)+"]":"[name="+n.substring(1)+"]");o.size()&&window.location.origin+window.location.pathname+this.hash===this.href&&(i("html, body").stop().animate({scrollTop:o.offset().top},800,function(){window.location.hash=n}),t.preventDefault())})},Cog.registerStatic({name:"utils.scroll",api:t})}(Cog.jQuery());
!function(){"use strict";var e={},r={};r.setSelector=function(e,n,t){var i="",s=e.indexOf("?");-1===s&&(s=e.indexOf("#")),-1!==s&&(i=e.substring(s),e=e.substring(0,s)),t=t||0;var a=r.getSelectors(e),o=e.substring(e.lastIndexOf("."));e=e.substring(0,e.lastIndexOf("."));var f=a.length>0?e.replace("."+a.join("."),""):e;if(a.length>0)for(var u=0;u<a.length;u++)f+=t===u?"."+n:"."+a[u];else f+="."+n;return f+o+i},r.getSelectors=function(e){var n=[];e=e||window.location.href,e=r.removeParameters(e);var t=(e=r.removeAnchor(e)).substring(e.lastIndexOf("/"));if(t){var i=t.split(".");if(i.length>2)for(var s=0;s<i.length;s++)s>0&&s<i.length-1&&n.push(i[s])}return n},r.removeParameters=function(e){return-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):e},r.removeAnchor=function(e){return-1!==e.indexOf("#")?e.substring(0,e.indexOf("#")):e},Cog.registerStatic({name:"utils.url",api:e,sharedApi:r})}();
!function(i){"use strict";var t={},r={},s={},u={edit:".cq-wcm-edit, .cq-wcm-edit-touch"};s.isEdit=function(){return void 0===r.isEdit&&(r.isEdit=i("body").is(u.edit)),r.isEdit},s.isAuthor=function(){return void 0===r.isAuthor&&(r.isAuthor=window.Granite&&window.Granite.author),r.isAuthor},s.isPublish=function(){return!s.isAuthor()},Cog.registerStatic({name:"utils.status",api:t,sharedApi:s})}(Cog.jQuery());
!function(o){"use strict";var e={},t={},r={homepage:".homepage-top-promo-box",category:".category-top-promo-box",categorySubcategory:".category-subcategory-section",subcategory:".subcategory-top-promo-box"};t.isSection=function(o){return o.parents().is(r.homepage+", "+r.category+", "+r.categorySubcategory+", "+r.subcategory)},t.isSectionHero=function(o){return o.parents().is(r.homepage+", "+r.category+", "+r.subcategory)},Cog.registerStatic({name:"utils.promoBoxSection",api:e,sharedApi:t})}(Cog.jQuery());
!function(){"use strict";var e={},r={};r.setSelector=function(e,n,t){var i="",s=e.indexOf("?");-1===s&&(s=e.indexOf("#")),-1!==s&&(i=e.substring(s),e=e.substring(0,s)),t=t||0;var a=r.getSelectors(e),o=e.substring(e.lastIndexOf("."));e=e.substring(0,e.lastIndexOf("."));var f=a.length>0?e.replace("."+a.join("."),""):e;if(a.length>0)for(var u=0;u<a.length;u++)f+=t===u?"."+n:"."+a[u];else f+="."+n;return f+o+i},r.getSelectors=function(e){var n=[];e=e||window.location.href,e=r.removeParameters(e);var t=(e=r.removeAnchor(e)).substring(e.lastIndexOf("/"));if(t){var i=t.split(".");if(i.length>2)for(var s=0;s<i.length;s++)s>0&&s<i.length-1&&n.push(i[s])}return n},r.removeParameters=function(e){return-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):e},r.removeAnchor=function(e){return-1!==e.indexOf("#")?e.substring(0,e.indexOf("#")):e},Cog.registerStatic({name:"utils.url",api:e,sharedApi:r})}();
!function(e){"use strict";var n={},t={activeItemContent:"> .component-content > .accordion-container > .is-active > .accordion-content-wrapper",accordionHead:"> div > ul > li.accordion-slide > div.accordion-head",accordionSlide:"li.accordion-slide",contentWrapper:"div.accordion-content-wrapper"};n.onHeaderClick=function(o){var i=e(o.currentTarget),c=n.liParent(i),r=i.next(t.contentWrapper),a=i.find("a");Cog.fireEvent("accordion","change",{$target:a,elementExtraInfo:i.next().is(":visible")?"close":"open",manual:void 0!==o.originalEvent}),Cog.fireEventAsync("table","check-overflow",{scope:this}),c.toggleClass("is-active"),r.stop(!0,!0).slideToggle(300),Cog.fireEventAsync("table","check-swipe-icon-position",{scope:this}),o.preventDefault()},n.previous=function(t){n.focus(n.liParent(e(t.currentTarget)).prev()),t.preventDefault()},n.next=function(t){n.focus(n.liParent(e(t.currentTarget)).next()),t.preventDefault()},n.first=function(t){n.focus(n.liParent(e(t.currentTarget)).parent().children("li").first()),t.preventDefault()},n.last=function(t){n.focus(n.liParent(e(t.currentTarget)).parent().children("li").last()),t.preventDefault()},n.liParent=function(e){return e.parents("li").first()},n.focus=function(e){e.find("> .accordion-head > a, > .accordion-head > .accordion-title > a").focus()},n.findAnchorElementInAccordionRelatedToUrlHash=function(e){var n=e.find(window.location.hash),t=n.closest(".accordion.component");return 1===t.length&&e[0]===t[0]?n:null},n.scrollTo=function(n){setTimeout(function(){e("html, body").stop().animate({scrollTop:n.offset().top},300)},310)},n.onHeaderKeydown=function(e){switch(e.which||e.keyCode){case 32:n.onHeaderClick(e);break;case 35:n.last(e);break;case 36:n.first(e);break;case 37:case 38:n.previous(e);break;case 39:case 40:n.next(e)}},n.bindAnchorClicks=function(t){t.find("[id]").each(function(){for(var o=e(this),i=null,c=o.parent();0!==c.length&&c[0]!==t[0];)c.hasClass("accordion-slide")&&(i=c),c=c.parent();o[0]&&i&&e('a[href="#'+o[0].id+'"]').on("click",function(t){!!e(t.target).closest(".accordion-head").length||n.openPanel(i,o)})})},n.openPanel=function(e,t){var o=n.findContentWrapper(e).attr("style");o&&"display: none;"!==o||(e.find("> div.accordion-head").click(),n.scrollTo(t))},n.findContentWrapper=function(e){return e.find("> "+t.contentWrapper)},n.findParentSlide=function(e){return e?e.closest(t.accordionSlide).parents(t.accordionSlide):null},n.onRegister=function(e){if(!this.external.status.isEdit()){var o=e.$scope;o.on("click",t.accordionHead,n.onHeaderClick),o.on("keydown",t.accordionHead,n.onHeaderKeydown),n.bindAnchorClicks(o);var i=n.findAnchorElementInAccordionRelatedToUrlHash(o),c=n.findParentSlide(i);if(c){var r=n.findContentWrapper(c);r.css("display","block"),(s=n.liParent(r)).addClass("is-active")}var a=i?n.findContentWrapper(i.closest(t.accordionSlide)):o.find(t.activeItemContent);if(a.length){a.css("display","block");var s=n.liParent(a);s.addClass("is-active")}i&&n.scrollTo(i)}},Cog.registerComponent({name:"accordion",api:n,selector:".accordion",requires:[{name:"utils.status",apiId:"status"}]})}(Cog.jQuery());
(function($){"use strict";var api={};api.delay=0;api.showSlide=function(nextIndex,context,delay,autoRotate){clearTimeout(context.timerId);var current=context.slides.filter(".is-active"),currentIndex=current.index();nextIndex=(nextIndex<0)?(context.slides.length-1):((nextIndex>=context.slides.length)?0:nextIndex);if(Number(nextIndex)!==Number(currentIndex)){context.slides.stop(true,true);current.removeClass("is-active").fadeOut(function(){$(this).removeClass("is-active");context.controls.removeClass("is-active").eq(nextIndex).addClass("is-active");});context.slides.eq(nextIndex).fadeIn(function(){$(this).addClass("is-active");});}
if(delay>0&&autoRotate!==false){context.timerId=setTimeout(function(){api.showSlide(nextIndex+1,context,delay,autoRotate);},delay*1000);}};api.onRegister=function(scope){var $carousel=scope.$scope,$slideNav=$carousel.find(".carousel-nav"),$slideControls=$slideNav.find("li:not(.carousel-nav-prev):not(.carousel-nav-next)"),$slidesList=$carousel.find(".carousel-slides"),$slides=$slidesList.find(".carousel-slide"),slidesMaxHeight=$slidesList.data("height"),delay=0,autoRotate=$slidesList.data("rotate"),context={slides:$slides,controls:$slideControls},status=this.external.status,resizeView=function(){if(status.isAuthor()){return;}
var maxHeight=0;$slides.each(function(){var height=$(this).height();maxHeight=height>maxHeight?height:maxHeight;});if(slidesMaxHeight){if(maxHeight>slidesMaxHeight){maxHeight=slidesMaxHeight;}}
$slidesList.css("height",maxHeight+"px");};$(window).resize(_.throttle(function(){resizeView();},250));resizeView();delay=$slidesList.data("delay")||0;$slides.hide().first().show();$slideNav.on("click","a",function(e){e.preventDefault();var $parent=$(this).parent(),index=$slideControls.index($parent);if($parent.is(".carousel-nav-prev,.carousel-nav-next")){index=$slides.filter(".is-active").index();index=$parent.hasClass("carousel-nav-prev")?index-1:index+1;}
api.showSlide(index,context);});if(delay>0&&autoRotate!==false){context.timerId=setTimeout(function(){api.showSlide(1,context,delay,autoRotate);},delay*1000);}};Cog.registerComponent({name:"carousel",api:api,selector:".carousel",requires:[{name:"utils.status",apiId:"status"}]});})(Cog.jQuery());(function($){"use strict";var api={},clearForm,resetForm,manualInputs;clearForm=function($form,oldbrowser){$form.find("input:text, input:password, input:file, select, textarea").val("");$form.find("input:radio").prop("checked",false);$form.find("input:checkbox").prop("checked",false);if(oldbrowser){$form.find("input:text, input:password, input:file, select, textarea").blur();}};resetForm=function($form){$form[0].reset();$form.find("input, textarea").blur();};manualInputs=(function(){function applyStyle($input,$label){if($input.is(":checked")){$label.addClass("checked");}else{$label.removeClass("checked");}}
return function($inputs){$inputs.each(function(i,input){var $input=$(input),$label=$input.parent().find("label");$label.on("click",function(ev){ev.preventDefault();input.checked=!input.checked;});applyStyle($input,$label);$input.on("change",function(){applyStyle($input,$label);});});};})();api.onRegister=function(scope){var form=scope.$scope,disabledMessage="Submit functionality is disabled"+
" in Edit mode - switch to Preview mode to use it.",browser=this.external.browser,status=this.external.status;form.find("textarea[maxlength]").bind("change keyup",function(){var maxlength=$(this).attr("maxlength"),val=$(this).val();if(val.length>maxlength){$(this).val(val.substring(0,maxlength));}});manualInputs(form.find("input[type=radio], input[type=checkbox]"));form.find("button.clearButton").bind("click",function(){clearForm($(this.form));});form.find("button.control-tooltip-button").bind("click",function(e){e.preventDefault();});if(browser.msie&&browser.version<10){form.on("click","button.clearButton",function(){clearForm($(this.form),true);});form.find("input.reset").bind("click",function(e){e.preventDefault();resetForm($(this.form));});form.find("button.editSubmit").bind("click",function(e){if(status.isAuthor()){return true;}
e.preventDefault();window.alert(disabledMessage);});}else{form.on("click","button.clearButton",function(){clearForm($(this.form));});form.find("button.editSubmit").bind("click",function(e){if(status.isAuthor()){return true;}
e.preventDefault();window.alert(disabledMessage);});}};Cog.registerComponent({name:"form",api:api,selector:".form",requires:[{name:"utils.browser",apiId:"browser"},{name:"utils.status",apiId:"status"}]});}(Cog.jQuery()));(function($){"use strict";var api={},refs={componentName:"imageGallery",thumbnailsContainerSelector:".imageGallery-thumbnails",imageViewOverlaySelector:".imageGallery-view-overlay",imageViewSelector:".imageGallery-view",thumbnailsListContainerSelector:".imageGallery-list",mainArrowsSelector:".imageGallery-view .imageGallery-arrow",thumbnailsArrowsSelector:".imageGallery-thumbnails .imageGallery-arrow",thumbnailsArrowsLeftClass:"imageGallery-arrow-left",thumbnailsArrowsRightClass:"imageGallery-arrow-right",descriptionSelector:".imageGallery-description",thumbnailsListInner:".imageGallery-list-inner",thumbnailsList:".imageGallery-list"},Direction={PREV:-1,NEXT:1},settings={loop:true,playTimeout:4000};api.onRegister=function(scope){function showNext($context){var currentItem=$context.filter(".is-active"),$nextItem=currentItem.next();if($nextItem.length){$nextItem.trigger("click");}else if(settings.loop){$context.eq(0).trigger("click");}}
function showPrev($context){var currentItem=$context.filter(".is-active"),$prevItem=currentItem.prev();if($prevItem.length){$prevItem.trigger("click");}else if(settings.loop){$context.last().trigger("click");}}
function centerActiveThumbnail($context){var activeItem=$context.filter(".is-active"),currentItemPosition=activeItem.position();scrollThumbnails($context,currentItemPosition.left*-1);}
function scrollThumbnails($context,to){to+=$thumbnailsList.parent().width()/2-$context.filter(".is-active").width()/2;to=Math.max(to,-1*$thumbnailsList.width()+$thumbnailsList.parent().width());to=Math.min(0,to);$thumbnailsList.animate({left:to});}
var $this=scope.$scope,$mainImage=$this.find(refs.imageViewSelector+" img"),$mainImageContainer=$this.find(refs.imageViewSelector),$thumbnailsContainer=$this.find(refs.thumbnailsContainerSelector),$thumbnailsListContainer=$thumbnailsContainer.find(refs.thumbnailsListContainerSelector),$thumbnailsList=$thumbnailsListContainer.find(refs.thumbnailsListInner),$thumbnailsItems=$thumbnailsList.find("li"),$arrowsMain=$this.find(refs.mainArrowsSelector),$arrowsThumbs=$this.find(refs.thumbnailsArrowsSelector),$descriptionContainer=$this.find(refs.descriptionSelector),$firstItem=$thumbnailsItems.eq(0),playingTimer,maxImageHeight=$mainImageContainer.data("height");function setListWidth(){var thumbnailWidth=$firstItem.outerWidth(true),listOuterWidth=$thumbnailsItems.length*thumbnailWidth;$thumbnailsList.css("width",listOuterWidth);}
$mainImageContainer.on("click",function(){clearInterval(playingTimer);if($this.hasClass("is-playing")){$this.removeClass("is-playing");}else{playingTimer=setInterval(function(){var $activeItem=$thumbnailsItems.filter(".is-active"),$nextItem=$activeItem.next();if($nextItem.length){$nextItem.trigger("click");}else{$thumbnailsItems.eq(0).trigger("click");}},settings.playTimeout);$this.addClass("is-playing");}});$thumbnailsItems.on("click",function(ev){ev.preventDefault();ev.stopPropagation();var $this=$(this),$link=$this.find("a"),$linkImg=$link.find("img");if(!$this.hasClass("is-active")){$thumbnailsItems.removeClass("is-active");$this.addClass("is-active");$mainImage.on("load",function(){$mainImage.fadeIn(200);$descriptionContainer.text($link.data("description"));});if($linkImg.attr("src")!==$mainImage.attr("src")){var thumbnailsListLeft=$thumbnailsList.parent().offset().left,thumbnailsListRight=thumbnailsListLeft+
$thumbnailsList.parent().width(),thumbnailLeft=$this.offset().left,thumbnailRight=thumbnailLeft+$this.outerWidth(false);if(thumbnailsListLeft>thumbnailLeft){$thumbnailsList.animate({left:"+="+(thumbnailsListLeft-thumbnailLeft)});}else if(thumbnailsListRight<thumbnailRight){$thumbnailsList.animate({left:"-="+(thumbnailRight-thumbnailsListRight)});}
$mainImage.fadeTo(200,0,function(){var originalHeight=$linkImg.data("height"),correctHeight=!maxImageHeight||originalHeight<=maxImageHeight?originalHeight:maxImageHeight,originalWidth=$linkImg.data("width"),correctWidth=(correctHeight*originalWidth)/originalHeight;$mainImage.attr("width",parseInt(correctWidth,10));$mainImage.attr("height",parseInt(correctHeight,10));$mainImage.attr("src",$link.attr("href"));$mainImage.fadeTo(200,1);});}}});$arrowsThumbs.on("click",function(e){e.preventDefault();e.stopPropagation();var vector=$(this).hasClass(refs.thumbnailsArrowsLeftClass)?Direction.PREV:Direction.NEXT,currentScroll=parseInt($thumbnailsList.css("left"),10),to=currentScroll-vector*$thumbnailsItems.eq(0).width()*2;to-=$thumbnailsList.parent().width()/2-
$thumbnailsItems.filter(".is-active").width()/2;scrollThumbnails($thumbnailsItems,to);});$arrowsMain.on("click",function(ev){ev.preventDefault();ev.stopPropagation();$thumbnailsList.stop(false,true);var $this=$(this),vector=$this.hasClass(refs.thumbnailsArrowsLeftClass)?Direction.PREV:Direction.NEXT;if(vector===Direction.NEXT){showNext($thumbnailsItems);}else{showPrev($thumbnailsItems);}
centerActiveThumbnail($thumbnailsItems);$arrowsMain.removeClass("is-disabled");});var originalHeight=$mainImage.attr("height"),correctHeight=!maxImageHeight||originalHeight<=maxImageHeight?originalHeight:maxImageHeight,originalWidth=$mainImage.attr("width"),correctWidth=(correctHeight*originalWidth)/originalHeight;$mainImage.attr("width",parseInt(correctWidth,10));$mainImage.attr("height",parseInt(correctHeight,10));setListWidth();};Cog.registerComponent({name:"imageGallery",api:api,selector:".imageGallery"});})(Cog.jQuery());(function($){"use strict";var api={},loaded=false,$maps=[],URL="https://maps.googleapis.com/maps/api/js",defaultOptions={height:250,zoom:14,latitude:51.500134,longitude:-0.12623,mapType:"ROADMAP",markers:[]};function loadScript(params){var scriptElement=document.createElement("script"),to=document.getElementsByTagName("script")[0];scriptElement.async=true;scriptElement.src=URL+"?"+$.param(params);to.parentNode.insertBefore(scriptElement,to);loaded=true;}
function showMarkers(scope){if(!scope.mapOptions.markers.length){return;}
var marker,k,infoWindow,tmarker;for(k in scope.mapOptions.markers){if(scope.mapOptions.markers.hasOwnProperty(k)&&scope.mapOptions.markers[k].title.length){marker=scope.mapOptions.markers[k];tmarker=new google.maps.Marker({position:new google.maps.LatLng(marker.latitude,marker.longitude),map:scope.gmap,title:marker.title});if(marker.description.length){infoWindow=new google.maps.InfoWindow({content:_.unescape(marker.description)});google.maps.event.addListener(tmarker,"click",openInfoWindow(tmarker,infoWindow,scope.gmap));}}}}
function openInfoWindow(tmarker,infoWindow,gMap){return(function(tmarker,infoWindow){return function(){infoWindow.open(gMap,tmarker);};})(tmarker,infoWindow);}
function onRegister(scope){var map=scope,options=$.extend(defaultOptions,map.data()),centerPosition;map.height(options.height);centerPosition=new google.maps.LatLng(options.latitude,options.longitude);scope.mapOptions={zoom:options.zoom,center:centerPosition,markers:options.markers,mapTypeId:google.maps.MapTypeId[options.mapType]};scope.gmap=new google.maps.Map(map[0],scope.mapOptions);showMarkers(scope);var tabContent=map.parents(".tabs-content");if(tabContent.size()){Cog.addListener("tab","change",function(e){if(tabContent.attr("id")===e.eventData.id){google.maps.event.trigger(scope.gmap,"resize");}});}}
api.callback=function(){_.each($maps,function(el){onRegister($(el));});};api.init=function(components){var params={};$maps=components;if(!$maps.size()){return false;}
if(loaded){api.callback();return false;}
if($maps.first().data("key")){params.key=$maps.first().data("key");}
params.callback="Cog.component.map.callback";loadScript(params);};api.onRegister=$.noop;Cog.registerComponent({name:"map",api:api,selector:".map-canvas"});Cog.component.map=api;})(Cog.jQuery());(function($){"use strict";function Nav($nav){this.$nav=$nav;this.bindUIEvents();}
Nav.prototype.bindUIEvents=function(){var self=this;self.$nav.on("tap click",".navigation-mobile-menu",function(e){e.preventDefault();$(this).next(".navigation-root").toggleClass("is-open");$(this).attr("aria-expanded",function(_,attr){if(attr==="false"){attr=false;}
return!attr;});});if(!self.$nav.is(".navigation-horizontal")||$("html").hasClass("mod-touch")){self.$nav.on("tap click",".has-children > .navigation-item-title >"+
" .navigation-item-decoration",function(event){event.preventDefault();event.stopPropagation();var $this=$(this).closest(".has-children"),$siblings=$this.siblings(".has-children");$siblings.not($this).removeClass("is-open").find(".has-children").removeClass("is-open");$this.toggleClass("is-open");}).on("keydown",".has-children > .navigation-item-title >"+
" .navigation-item-decoration",function(event){if(event.which===13){event.stopPropagation();event.preventDefault();$(this).trigger("click");}});self.$nav.on("click",".has-children > .navigation-item-title >"+
".navigation-item-decoration",function(event){event.preventDefault();event.stopPropagation();});}else{self.$nav.on("mouseenter focusin",".has-children",function(){var $this=$(this);$this.addClass("is-open");}).on("mouseleave",".has-children",function(){$(this).removeClass("is-open");}).on("focusout",".has-children",function(){var $this=$(this);setTimeout(function(){if(!$this.is(":focus")&&!$this.find(":focus").size()){$this.removeClass("is-open");}},0);});}};var api={};api.navs=[];api.onRegister=function(scope){var $nav=scope.$scope;api.navs.push(new Nav($nav));};Cog.registerComponent({name:"navigation",api:api,selector:".navigation"});return api;}(Cog.jQuery()));
!function(t){"use strict";function i(t){this.$scope=t,this.init(),this.bindEvents(),this.adjustPosition()}var s={tabs:[]};i.prototype.init=function(){var i=this.$scope;this.$contents=i.find("> .component-content > .tabs-content"),this.$contents.addClass("is-hidden"),this.isVertical=i.hasClass("tabs-vertical"),this.$tabs=i.find("> .component-content > .tabs-nav .tabs-nav-item"),this.showSwipeIcon(),t(window).on("resize",_.debounce(this.showSwipeIcon.bind(this),150))},i.prototype.bindEvents=function(){function i(t){var i=-1,s=t.closest(".tabs-content")[0];return s&&s.id&&(i=s.id.substring(s.id.lastIndexOf("-")+1)),i}function s(i){setTimeout(function(){t("html, body").stop().animate({scrollTop:i.offset().top},300)},0)}var n=this;this.navWidth=this.$scope.find("> .component-content > .tabs-nav").width(),this.listWidth=0,this.listHeight=0,this.$tabs.each(function(){n.listWidth+=t(this).outerWidth(!0),n.listHeight+=t(this).outerHeight(!0)}),this.isVertical?this.setContentHeight():this.navWidth<this.listWidth&&this.initializeScrolling(),this.$tabs.on("click",function(i){var s,e=t(i.currentTarget),o=e.find("a");n.$contents.addClass("is-hidden"),(s=n.$contents.filter(o.attr("href"))).removeClass("is-hidden"),n.$tabs.removeClass("is-active"),e.addClass("is-active"),i.preventDefault(),Cog.fireEvent("tab","change",{id:s.attr("id"),container:s,$target:o,manual:void 0!==i.originalEvent})}),this.$tabs.filter(".is-active").trigger("click"),function(n,e){n.find(".tabContent > .content [id]").each(function(){var n=t(this),o=i(n),a=t(e[o]);n[0]&&a&&t('a[href="#'+n[0].id+'"]').on("click",function(){a.hasClass(".is-active")||a.click(),s(n)})})}(this.$scope,this.$tabs);var e=function(){var i=window.location.hash;return(i=i?i.substr(1):void 0)?t(document.getElementById(i)):void 0}();if(e&&1===e.length&&function(t){return 1===t.closest(".tabs.component").length}(e)){var o=i(e),a=n.$tabs[o];a&&(t(a).click(),s(e))}},i.prototype.initializeScrolling=function(){var i=this.$scope.find(".tabs-nav-switcher"),s=i.filter(".tabs-nav-switcher-right"),n=i.filter(".tabs-nav-switcher-left"),e=this.$scope.find(".tabs-nav-list"),o=this;s.removeClass("is-hidden"),i.on("click",function(){var i=t(this).hasClass("tabs-nav-switcher-right")?-20:20,a=parseInt(e.css("left"),10)+i;a<0?(n.removeClass("is-hidden"),-1*a>=o.listWidth-o.navWidth?s.addClass("is-hidden"):s.removeClass("is-hidden")):n.addClass("is-hidden"),e.stop().animate({left:a+"px"})})},i.prototype.setContentHeight=function(){var i=this;this.$contents.each(function(){t(this).height()<i.listHeight&&t(this).css("min-height",i.listHeight+"px")})},i.prototype.showSwipeIcon=function(){for(var i=this.$scope.find(".tabs-nav"),s=i.find(">ul li"),n=0,e=0;e<=s.length;e++)n+=t(s[e]).outerWidth();i.width()<n-2?i.addClass("tabs-nav-scroll"):i.removeClass("tabs-nav-scroll")},i.prototype.adjustPosition=function(){t(document).ready(function(){if(window.location.href){var i=t(document.getElementById(window.location.hash.substr(1)));i.length&&t("html, body").stop().animate({scrollTop:i.offset().top},0)}})},s.onRegister=function(t){s.tabs.push(new i(t.$scope))},Cog.registerComponent({name:"tabs",api:s,selector:".tabs"})}(Cog.jQuery());
!function(t){"use strict";var e={};e.preprocess={twitter:function(t,e){var a=e.blankLinks?' target="_blank"':"";t.text=t.text.replace(/(^|\s)https:\/\/t.co\/(\w+)/,'$1<a href="https://t.co/$2"'+a+"><strong>http://t.co/$2</strong></a>").replace(/(^|\s)@(\w+)/g,'$1<a href="https://www.twitter.com/$2"'+a+">@<strong>$2</strong></a>").replace(/(^|\s)#(\w+)/g,'$1<a href="https://twitter.com/search?q=%23$2&src=hash"'+a+">#<strong>$2</strong></a>");var r=function(t){var e=new Date(Date.parse(t)),a=new Date;(function(){return{ie:navigator.userAgent.match(/MSIE\s([^;]*)/)}}).ie&&(e=Date.parse(t.replace(/( \+)/," UTC$1")));var r=Math.floor((a-e)/1e3);return r<=1?"just now":r<20?r+" seconds ago":r<40?"half a minute ago":r<60?"less than a minute ago":r<=90?"one minute ago":r<=3540?Math.round(r/60)+" minutes ago":r<=5400?"1 hour ago":r<=86400?Math.round(r/3600)+" hours ago":r<=129600?"1 day ago":r<604800?Math.round(r/86400)+" days ago":r<=777600?"1 week ago":"on "+e}(t.created_at);return t.created_at=r,t.target=a,t.retwitted=!1,void 0!==t.retweeted_status&&(t.retwitted=t.retweeted_status.user.name),t}},e.onRegister=function(a){var r,s,n,o,i,c;i=function(r,s){var n=e;t.getJSON(r,function(t){e.processData.call(n,t,s,a)})},e.scope=r=a.$scope,s=(n=t(r).find(".component-content")).data("providerPath"),c=e.scope.hasClass("twitter-ticker"),s&&(o=n.data("refresh-interval"),i.call(r,s,n.data()),o&&!c&&function(t,e,a){window.setInterval(function(){i.call(t,e,a)},1e3*o)}(r,s,n.data()))},e.processData=function(a,r,s){if(void 0===a.feedType)return!1;var n=e.getTemplate(a.feedType),o="";if(_.forEach(a.statuses,function(s){"function"==typeof e.preprocess[a.feedType]&&(s=e.preprocess[a.feedType](s,r));var i=t(_.template(n,s)),c=t('<a class="tweet-link" href="https://twitter.com/'+s.user.screen_name+"/status/"+s.id_str+'"><time class="twitter-date-ago">'+s.created_at+"</time></a>");i.find(".twitter-actions").before(c),o+=i[0].outerHTML}),s.$scope.hasClass("twitter-ticker")){for(var i="",c=Math.ceil(8/a.statuses.length),u=1;u<c;u++)i+=o;o+=i}return t(s.$scope).find(".feed-provider-feeds").html(o),Cog.fireEvent("twitter","feedsLoaded"),!0},e.getTemplate=function(e){return t("."+e+"-template")[0].innerHTML},Cog.registerComponent({name:"feedProvider",api:e,selector:".twitter",requires:["utils.settings"]})}(Cog.jQuery());
!function(e){"use strict";function t(e){this.$el=e,this.$video=e.find("video"),this.imageAlt=e.find(".component-content").data("imagealt"),this.initialize(),this.bindEvents()}var i={},s=["playpause","progress","current","duration","tracks","volume","fullscreen"];t.prototype={initialize:function(){var e=this.$video.parents(".tabs-content");e.size()&&Cog.addListener("tab","change",function(t){e.attr("id")===t.eventData.id&&this.mediaElement.player.resetSize()},{scope:this}),this.$video.mediaelementplayer({features:s,enableAutosize:!1,plugins:["flash","youtube"],pluginPath:i.external.settings.themePath+"/assets/swf/",flashName:"flashmediaelement.swf",videoHeight:this.$video.attr("height"),success:this.onMejsSuccess.bind(this)})},bindEvents:function(){Cog.addListener("overlay","close",this.onOverlayClose,{scope:this,disposable:!0})},onOverlayClose:function(){this.$el.parents(".overlay-container").size()&&(this.mediaElement.stop(),this.mediaElement.remove(),Cog.finalize(this.$el))},onMejsSuccess:function(e){this.mediaElement=e;var t=this.$el.find(".mejs-poster > img")[0];t&&(t.alt=this.imageAlt)}},i.onRegister=function(e){this.external.status.isEdit()||new t(e.$scope)},Cog.registerComponent({name:"videoplayer",api:i,selector:".video",requires:[{name:"utils.settings",apiId:"settings"},{name:"utils.status",apiId:"status"}]})}(Cog.jQuery());
(function($){"use strict";var api={},features=["playpause","progress","current","duration","tracks","volume","fullscreen"],refs={thumbnailsListContainerSelector:".videoGallery-list",thumbnailsArrowsSelector:".videoGallery-arrow",descriptionSelector:".videoGallery-description",titleSelector:".videoGallery-heading",videoWrapper:".videoGallery-video"};function provideArrayOfSources(domElement){var data=$(domElement).data(),sources=[{src:data.srcMp4,type:"video/mp4"},{src:data.srcOgg,type:"video/ogg"},{src:data.srcWebm,type:"video/webm"}];return _.filter(sources,"src");}
function VideoGallery($el){this.$el=$el;this.$video=$el.find("video");this.mediaElement=null;this.$thumbnails=this.$el.find(refs.thumbnailsListContainerSelector);this.$thumbnailsList=this.$thumbnails.find("ul");this.$thumbnailsItems=this.$thumbnails.find("li");this.$arrows=this.$el.find(refs.thumbnailsArrowsSelector);this.listContainerWidth=this.$thumbnails.width();this.thumbnailWidth=this.$thumbnailsItems.eq(0).outerWidth(true);this.autoPlayNext=this.$el.find(refs.videoWrapper).data("autoplay-next-video");this.initialize();this.bindEvents();}
VideoGallery.prototype={initialize:function(){var self=this;this.$thumbnailsList.css("width",this.thumbnailWidth*this.$thumbnailsItems.length);this.$video.mediaelementplayer({features:features,enableAutosize:true,plugins:["flash"],pluginPath:api.external.settings.themePath+"/assets/swf/",flashName:"flashmediaelement.swf",success:this.onMejsSuccess.bind(this)});function recalculateListWith(){self.listContainerWidth=self.$thumbnails.width();self.$thumbnailsList.css({left:0});self.$arrows.filter(".videoGallery-arrow-left").addClass("is-disabled");self.$arrows.filter(".videoGallery-arrow-right").removeClass("is-disabled");}
$(window).resize(_.throttle(recalculateListWith,150));},bindEvents:function(){var self=this;Cog.addListener("overlay","close",this.onOverlayClose,{scope:this,disposable:true});this.$thumbnailsItems.on("click",function(){var $this=$(this);self.reloadVideo({src:provideArrayOfSources($this),autoplay:true,title:$this.data("title"),poster:$this.find("img").attr("src"),description:$this.data("description")});self.$thumbnailsItems.removeClass("is-active");$this.addClass("is-active");});this.$arrows.click("click",function(){self.$thumbnailsList.stop(false,true);var $this=$(this),listOuterWidth=self.thumbnailWidth*self.$thumbnailsItems.length,left=parseInt(self.$thumbnailsList.css("left"),10),vector=$this.hasClass("videoGallery-arrow-left")?1:-1,nextLeft=left+(self.thumbnailWidth*vector),maxLeft=listOuterWidth-self.listContainerWidth+
(self.listContainerWidth%self.thumbnailWidth);self.$arrows.removeClass("is-disabled");if(nextLeft<=0&&(-1)*nextLeft<=maxLeft){self.$thumbnailsList.animate({left:nextLeft});}else{$this.addClass("is-disabled");}
nextLeft+=self.thumbnailWidth*vector;if(!(nextLeft<=0&&(-1)*nextLeft<=maxLeft)){$this.addClass("is-disabled");}});},reloadVideo:function(data){var mediaElement=this.mediaElement,$descriptionContainer=this.$el.find(refs.descriptionSelector),$titleContainer=this.$el.find(refs.titleSelector);mediaElement.pause();mediaElement.setSrc(data.src);mediaElement.load();if(data.poster){this.$video.attr("poster",data.poster);this.$video.parents(".mejs-inner").find(".mejs-poster").css({"background-image":"url('"+data.poster+"')","display":"block"});}
if(data.autoplay){mediaElement.play();}
$descriptionContainer.text(data.description);$titleContainer.text(data.title);},onOverlayClose:function(){if(this.$el.parents(".overlay-container").size()){this.mediaElement.stop();this.mediaElement.remove();Cog.finalize(this.$el);}},onMejsSuccess:function(mediaElement){var self=this,$thumbnailsItems=this.$thumbnailsItems;this.mediaElement=mediaElement;mediaElement.addEventListener("ended",function(){var $nextThumbnail=$thumbnailsItems.filter(".is-active").eq(0).next();if($nextThumbnail.length){self.reloadVideo({src:provideArrayOfSources($nextThumbnail),autoplay:self.autoPlayNext,title:$nextThumbnail.data("title"),poster:$nextThumbnail.find("img").attr("src"),description:$nextThumbnail.data("description")});$thumbnailsItems.removeClass("is-active");$nextThumbnail.addClass("is-active");}});}};api.onRegister=function(scope){new VideoGallery(scope.$scope);};Cog.registerComponent({name:"videoGallery",api:api,selector:".videoGallery",requires:[{name:"utils.settings",apiId:"settings"}]});}(Cog.jQuery()));
